{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://gps/./node_modules/events/events.js","webpack://gps/./src/service/city/builder/builder-prod.html","webpack://gps/./src/service/city/builder/queue.css","webpack://gps/./src/service/scheduler/button-panel-extension.html","webpack://gps/./src/service/scheduler/scheduler-list-prod.html","webpack://gps/./src/service/scheduler/scheduler-list.css","webpack://gps/./src/ui/config-popup.css","webpack://gps/./src/ui/config-popup.html","webpack://gps/./gps.config.ts","webpack://gps/./src/main.ts","webpack://gps/./src/service/army/army-movement.ts","webpack://gps/./src/service/city/builder/buildings.ts","webpack://gps/./src/service/city/builder/city-builder.ts","webpack://gps/./src/service/city/city-switch-manager.ts","webpack://gps/./src/service/farm/farm-manager.ts","webpack://gps/./src/service/master/master-manager.ts","webpack://gps/./src/service/resources/resource-manager.ts","webpack://gps/./src/service/scheduler/Scheduler.ts","webpack://gps/./src/ui/config-popup.ts","webpack://gps/./src/utility/config-manager.ts","webpack://gps/./src/utility/plain-utility.ts","webpack://gps/./src/utility/storage-manager.ts","webpack://gps/./src/utility/ui-lock.ts","webpack://gps/./src/utility/ui-utility.ts","webpack://gps/webpack/bootstrap","webpack://gps/webpack/runtime/define property getters","webpack://gps/webpack/runtime/hasOwnProperty shorthand","webpack://gps/webpack/runtime/make namespace object","webpack://gps/webpack/startup"],"sourcesContent":["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","export default \"<div id=\\\"build-container\\\" class=\\\"hidden\\\">\\r\\n  <div id=\\\"build-options\\\">\\r\\n  </div>\\r\\n  <div id=\\\"additional-queue\\\">\\r\\n\\r\\n  </div>\\r\\n</div>\\r\\n<button id=\\\"toggle-builder\\\" class=\\\"hidden\\\">Toggle builder</button>\";","export default \"#additional-queue {\\r\\n  display: flex;\\r\\n  gap: 8px;\\r\\n  box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.5);\\r\\n  border-radius: 4px;\\r\\n  padding: 4px;\\r\\n  max-width: 568px;\\r\\n  width: fit-content;\\r\\n  overflow-y: auto;\\r\\n  font-family: Arial, Helvetica, sans-serif;\\r\\n}\\r\\n\\r\\n.queue-item {\\r\\n  flex-shrink: 0;\\r\\n  position: relative;\\r\\n  width: 45px;\\r\\n  height: 45px;\\r\\n  background-size: cover;\\r\\n  background-position: center;\\r\\n}\\r\\n\\r\\n.queue-item .up {\\r\\n  position: absolute;\\r\\n  bottom: 0;\\r\\n  left: 0;\\r\\n  right: 0;\\r\\n  font-weight: bold;\\r\\n  color: lightgreen;\\r\\n  text-align: end;\\r\\n  margin: 2px;\\r\\n  font-size: 12px;\\r\\n  background-color: rgba(0, 0, 0, 0.4);\\r\\n}\\r\\n\\r\\n.queue-item .cancel {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  right: 0;\\r\\n  font-weight: bold;\\r\\n  color: red;\\r\\n  cursor: pointer;\\r\\n  padding: 1px;\\r\\n  font-size: 10px;\\r\\n}\\r\\n\\r\\n.queue-item .cancel:hover {\\r\\n  transform: scale(1.4);\\r\\n  transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\nhidden {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n#build-container {\\r\\n  z-index: 2000;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  align-items: center;\\r\\n  gap: 8px;\\r\\n  position: fixed;\\r\\n  bottom: 80px;\\r\\n  left: 50%;\\r\\n  transform: translateX(-50%);\\r\\n  border: 1px solid darkgoldenrod;\\r\\n  border-radius: 4px;\\r\\n  padding: 4px;\\r\\n  overflow-x: auto;\\r\\n  max-width: 90%;\\r\\n  background-color: bisque;\\r\\n  width: fit-content;\\r\\n}\\r\\n\\r\\n#build-options {\\r\\n  display: flex;\\r\\n  gap: 4px;\\r\\n}\\r\\n\\r\\n.build-option {\\r\\n  position: relative;\\r\\n  width: 40px;\\r\\n  height: 40px;\\r\\n  background-size: cover;\\r\\n  background-position: center;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.build-option:hover {\\r\\n  transform: scale(1.1);\\r\\n  transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\n.build-options-add {\\r\\n  position: absolute;\\r\\n  top: 50%;\\r\\n  right: 50%;\\r\\n  transform: translate(50%, -50%);\\r\\n  font-weight: bold;\\r\\n  color: white;\\r\\n  cursor: pointer;\\r\\n  font-size: 16px;\\r\\n  user-select: none;\\r\\n}\\r\\n\\r\\n#toggle-builder {\\r\\n  cursor: pointer;\\r\\n  position: fixed;\\r\\n  bottom: 15px;\\r\\n  left: 50%;\\r\\n  transform: translateX(-50%);\\r\\n  font-size: 12px;\\r\\n  z-index: 1000;\\r\\n}\";","export default \"<div style=\\\"margin-top: 8px;\\\">\\r\\n  <input id=\\\"schedule-date\\\" type=\\\"date\\\" />\\r\\n  <input id=\\\"schedule-time\\\" type=\\\"text\\\" size=\\\"5\\\" placeholder=\\\"hh:mm:ss\\\" />\\r\\n  <button type=\\\"button\\\" id=\\\"schedule-button\\\">Schedule</button>\\r\\n  <p id=\\\"schedule-error\\\" style=\\\"color: red;font-size: 0.8em; margin: 4px; padding: 0px; font-weight: bold; background-color: white;\\\"></p>\\r\\n  <p id=\\\"schedule-info\\\" style=\\\"color: green;font-size: 0.8em; margin: 4px; padding: 0px; font-weight: bold; background-color: white;\\\"></p>\\r\\n</div>\";","export default \"<div id=\\\"table-container\\\" class=\\\"hidden\\\">\\r\\n  <table id=\\\"scheduler-lookup-table\\\">\\r\\n    <thead>\\r\\n      <tr>\\r\\n        <th id=\\\"operation-type\\\">Operation Type</th>\\r\\n        <th class=\\\"source-city\\\">Source City</th>\\r\\n        <th class=\\\"destination-city\\\">Destination City</th>\\r\\n        <th class=\\\"departure-time\\\">Departure Time</th>\\r\\n        <th class=\\\"arrival-time\\\">Arrival Time</th>\\r\\n        <th class=\\\"actions\\\"></th>\\r\\n      </tr>\\r\\n    </thead>\\r\\n    <tbody>\\r\\n      <tr>\\r\\n        <td colspan=\\\"6\\\" id=\\\"no-schedules\\\">No schedules</td>\\r\\n      </tr>\\r\\n    </tbody>\\r\\n  </table>\\r\\n</div>\\r\\n<button id=\\\"scheduler-toggle-button\\\">scheduler</button>\";","export default \"#table-container {\\r\\n  max-height: 50vh;\\r\\n  overflow-y: auto;\\r\\n  border: 1px solid #ddd;\\r\\n  width: fit-content;\\r\\n}\\r\\n\\r\\n#scheduler-lookup-table {\\r\\n  font-family: Arial, Helvetica, sans-serif;\\r\\n  border-collapse: collapse;\\r\\n  font-size: 18px;\\r\\n  text-align: left;\\r\\n  position: absolute;\\r\\n  top: 50%;\\r\\n  left: 50%;\\r\\n  transform: translate(-50%, -50%);\\r\\n  z-index: 1000;\\r\\n  background-color: antiquewhite;\\r\\n}\\r\\n\\r\\n#no-schedules {\\r\\n  text-align: center;\\r\\n  height: 50px;\\r\\n}\\r\\n\\r\\n.attack {\\r\\n  font-weight: 600;\\r\\n  color: #d32f2f;\\r\\n}\\r\\n\\r\\n.support {\\r\\n  font-weight: 600;\\r\\n  color: #2979ff;\\r\\n}\\r\\n\\r\\n#scheduler-lookup-table * {\\r\\n  font-size: 14px;\\r\\n}\\r\\n\\r\\n#scheduler-lookup-table th,\\r\\n#scheduler-lookup-table td {\\r\\n  border: 1px solid #ddd;\\r\\n  padding: 8px;\\r\\n}\\r\\n\\r\\n#scheduler-lookup-table th {\\r\\n  background-color: #f2f2f2;\\r\\n  font-weight: bold;\\r\\n}\\r\\n\\r\\n#scheduler-lookup-table td {\\r\\n  text-wrap: nowrap;\\r\\n}\\r\\n\\r\\n\\r\\n.cancel-button {\\r\\n  background-color: #f44336;\\r\\n  color: white;\\r\\n  border: none;\\r\\n  padding: 5px 10px;\\r\\n  cursor: pointer;\\r\\n  transition-duration: 150ms;\\r\\n}\\r\\n\\r\\n.cancel-button:hover {\\r\\n  background-color: #d32f2f;\\r\\n}\\r\\n\\r\\n#scheduler-toggle-button {\\r\\n  padding: 4px 8px;\\r\\n  font-size: 12px;\\r\\n  font-variant: small-caps;\\r\\n  cursor: pointer;\\r\\n  border-radius: 20px;\\r\\n  position: absolute;\\r\\n  bottom: 220px;\\r\\n  right: 10px;\\r\\n  margin: 0;\\r\\n  z-index: 1000;\\r\\n  transition-duration: 150ms;\\r\\n}\\r\\n\\r\\n#scheduler-toggle-button:hover {\\r\\n  background-color: #ddd;\\r\\n}\\r\\n\\r\\n.hidden {\\r\\n  display: none;\\r\\n}\";","export default \"#config-popup-container * {\\r\\n  margin: 0;\\r\\n  padding: 0;\\r\\n  box-sizing: border-box;\\r\\n  font-family: Arial, Helvetica, sans-serif;\\r\\n  color: black;\\r\\n}\\r\\n\\r\\n#config-popup-header {\\r\\n  margin-bottom: 24px;\\r\\n  text-shadow: 2px 2px 2px gray;\\r\\n}\\r\\n\\r\\n#config-popup-container {\\r\\n  position: absolute;\\r\\n  top: 50%;\\r\\n  right: 50%;\\r\\n  transform: translate(50%, -50%);\\r\\n  box-shadow: 0px 3px 8px 0px rgba(157, 157, 157, 0.4);\\r\\n  border-radius: 4px;\\r\\n  width: 350px;\\r\\n  max-width: 80%;\\r\\n  overflow: hidden;\\r\\n  background-color: antiquewhite;\\r\\n  border: 1px solid rgba(165, 125, 11, 1);\\r\\n  z-index: 100;\\r\\n  padding: 16px;\\r\\n}\\r\\n\\r\\n.input-wrapper {\\r\\n  display: grid;\\r\\n  grid-template-columns: auto 1fr;\\r\\n  justify-items: start;\\r\\n  column-gap: 8px;\\r\\n  row-gap: 8px;\\r\\n  align-items: center;\\r\\n  margin-top: 16px;\\r\\n  text-align: start;\\r\\n}\\r\\n\\r\\n.input-wrapper label {\\r\\n  background-color: none;\\r\\n}\\r\\n\\r\\n.expandable-section {\\r\\n  grid-column-start: 2;\\r\\n}\\r\\n\\r\\n#config-popup-content {\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  border-radius: 4px;\\r\\n  gap: 8px;\\r\\n}\\r\\n\\r\\n#config-popup-content h1 {\\r\\n  font-weight: 500;\\r\\n  font-size: 1.7rem;\\r\\n  align-self: center;\\r\\n  margin-bottom: 8px;\\r\\n}\\r\\n\\r\\n.label-chevron {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  gap:8px\\r\\n}\\r\\n\\r\\n\\r\\n#button-panel {\\r\\n  align-self: flex-end;\\r\\n  margin-top: 20px;\\r\\n}\\r\\n\\r\\n#button-panel button {\\r\\n  padding: 4px;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n#config-popup-container.minimized {\\r\\n  top: auto;\\r\\n  bottom: 150px;\\r\\n  right: 30px;\\r\\n  width: 40px;\\r\\n  height: 40px;\\r\\n  border-radius: 50%;\\r\\n  box-shadow: none;\\r\\n}\\r\\n\\r\\n\\r\\n.show-trigger {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n#close-popup {\\r\\n  cursor: pointer;\\r\\n  position: absolute;\\r\\n  right: 10px;\\r\\n  top: 10px;\\r\\n  transition-duration: 125ms;\\r\\n  color: tomato;\\r\\n  text-shadow: 0px 0px 2px black;\\r\\n}\\r\\n\\r\\n#close-popup:hover {\\r\\n  animation: freak 1s ease-in both infinite;\\r\\n}\\r\\n\\r\\n#config-popup-container.minimized #config-popup-content {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n#config-popup-container.minimized #config-popup-header {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n#config-popup-container.minimized {\\r\\n  padding: 0;\\r\\n}\\r\\n\\r\\n#config-popup-container.minimized .show-trigger {\\r\\n  cursor: pointer;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n  font-size: 0.7rem;\\r\\n  font-weight: 600;\\r\\n  text-shadow: 0px 1px 1px rgba(165, 125, 11, 1);\\r\\n}\\r\\n\\r\\n.section-header {\\r\\n  display: flex;\\r\\n  flex-direction: row;\\r\\n  align-items: center;\\r\\n  gap: 5px;\\r\\n}\\r\\n\\r\\n.section-content {\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  gap: 4px;\\r\\n}\\r\\n\\r\\n.arrow-down {\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.hidden {\\r\\n  display: none !important;\\r\\n}\\r\\n\\r\\n.rotate {\\r\\n  transform: rotate(180deg);\\r\\n}\\r\\n\\r\\n@keyframes freak {\\r\\n  0% {\\r\\n    transform: scale(1);\\r\\n  }\\r\\n\\r\\n  33.33% {\\r\\n    transform: scale(0.8);\\r\\n  }\\r\\n\\r\\n  66.66% {\\r\\n    transform: scale(1.2);\\r\\n  }\\r\\n}\";","export default \"<div id=\\\"config-popup-container\\\" class=\\\"\\\">\\r\\n  <div id=\\\"config-popup-header\\\">\\r\\n    <h1>GPS config</h1>\\r\\n    <div id=\\\"close-popup\\\">&#10006;</div>\\r\\n  </div>\\r\\n  <div id=\\\"config-popup-content\\\">\\r\\n    <div class=\\\"input-wrapper\\\">\\r\\n      <input type=\\\"checkbox\\\" id=\\\"city-switch\\\" checked />\\r\\n      <label for=\\\"city-switch\\\">Switch cities automatically</label>\\r\\n    </div>\\r\\n    <div class=\\\"input-wrapper\\\">\\r\\n      <input type=\\\"checkbox\\\" id=\\\"farm\\\" checked />\\r\\n      <div class=\\\"label-chevron\\\">\\r\\n        <label for=\\\"farm\\\">\\r\\n          Farm manager\\r\\n        </label>\\r\\n        <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"arrow-down\\\" width=\\\"16\\\" height=\\\"16\\\" fill=\\\"currentColor\\\"\\r\\n          class=\\\"bi bi-chevron-down\\\" viewBox=\\\"0 0 16 16\\\">\\r\\n          <path fill-rule=\\\"evenodd\\\"\\r\\n            d=\\\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708\\\" />\\r\\n        </svg>\\r\\n      </div>\\r\\n      <div class=\\\"expandable-section hidden\\\">\\r\\n        <div class=\\\"section-header\\\"></div>\\r\\n        <div class=\\\"section-content\\\">\\r\\n          <div class=\\\"input-wapper\\\">\\r\\n            <label>\\r\\n              Time interval\\r\\n            </label>\\r\\n            <select id=\\\"time-interval-select\\\">\\r\\n            </select>\\r\\n          </div>\\r\\n          <div class=\\\"input-wapper\\\">\\r\\n            <input type=\\\"checkbox\\\" id=\\\"humanize-checkbox\\\" />\\r\\n            <label for=\\\"humanize-checkbox\\\">\\r\\n              Humanize\\r\\n            </label>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"input-wrapper\\\">\\r\\n      <input type=\\\"checkbox\\\" id=\\\"builder\\\" />\\r\\n      <label for=\\\"builder\\\">Builder</label>\\r\\n    </div>\\r\\n    <div class=\\\"input-wrapper\\\">\\r\\n      <input type=\\\"checkbox\\\" id=\\\"guard\\\" disabled />\\r\\n      <label for=\\\"guard\\\">Guard (in progress)</label>\\r\\n    </div>\\r\\n\\r\\n    <div id=\\\"button-panel\\\">\\r\\n      <button id=\\\"submit\\\">Submit</button>\\r\\n      <button type=\\\"reset\\\" id=\\\"cancel-all\\\">Cancel all</button>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"show-trigger\\\">\\r\\n    GPS\\r\\n  </div>\\r\\n</div>\";","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FarmTimeInterval = void 0;\nvar FarmTimeInterval;\n(function (FarmTimeInterval) {\n    FarmTimeInterval[FarmTimeInterval[\"FirstOption\"] = 300000] = \"FirstOption\";\n    FarmTimeInterval[FarmTimeInterval[\"SecondOption\"] = 1200000] = \"SecondOption\";\n    FarmTimeInterval[FarmTimeInterval[\"ThirdOption\"] = 5400000] = \"ThirdOption\";\n    FarmTimeInterval[FarmTimeInterval[\"FourthOption\"] = 14400000] = \"FourthOption\";\n})(FarmTimeInterval || (exports.FarmTimeInterval = FarmTimeInterval = {}));\nconst config = {\n    resources: {\n        minPopulationBuffer: 100,\n        storeAlmostFullPercentage: 0.9,\n    },\n    farmConfig: {\n        farmInterval: FarmTimeInterval.FirstOption,\n        humanize: false,\n    },\n    general: {\n        antyTimingMs: 9000,\n        applicationRefreshInterval: 30 * 60 * 1000, // 30 minutes\n        forcedRefresh: false,\n        switch: true,\n        farm: true,\n        builder: true,\n        guard: false,\n    }\n};\nexports.default = config;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst master_manager_1 = __importDefault(require(\"./service/master/master-manager\"));\nconst ui_utility_1 = require(\"./utility/ui-utility\");\nconst main = () => __awaiter(void 0, void 0, void 0, function* () {\n    console.log('VERY POLITE GPS v.0.5.0 MVP walikonie special edition (c) 2024');\n    const masterManager = yield master_manager_1.default.getInstance();\n});\n(0, ui_utility_1.onPageLoad)(main);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ArmyMovement {\n    constructor() {\n        this.callback = null;\n    }\n    static getInstance() {\n        if (!ArmyMovement.instance) {\n            ArmyMovement.instance = new ArmyMovement();\n            ArmyMovement.instance.mountObserver();\n        }\n        return ArmyMovement.instance;\n    }\n    mountObserver() {\n        const observer = new MutationObserver((mutations) => {\n            mutations.forEach((mutation) => {\n                if (mutation.type === 'childList') {\n                    for (const node of mutation.addedNodes) {\n                        if (node instanceof HTMLElement && node.getAttribute('data-commandtype') === 'unit_movements' && node.getAttribute('data-cancelable') != '-1') {\n                            if (this.callback) {\n                                this.callback(node.id);\n                                this.callback = null;\n                                return;\n                            }\n                        }\n                    }\n                }\n            });\n        });\n        const element = document.querySelector('#toolbar_activity_commands_list .content.js-dropdown-item-list');\n        observer.observe(element, {\n            childList: true,\n            subtree: false,\n        });\n    }\n    setCallback(callback) {\n        this.callback = callback;\n    }\n}\nexports.default = ArmyMovement;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.buildings = exports.buildingsSelectors = void 0;\nconst ui_utility_1 = require(\"../../../utility/ui-utility\");\nconst buildActionSafe = (selector) => __awaiter(void 0, void 0, void 0, function* () {\n    const cityViewBtn = document.querySelector('[name=\"city_overview\"]');\n    if (!(cityViewBtn === null || cityViewBtn === void 0 ? void 0 : cityViewBtn.classList.contains('checked'))) {\n        cityViewBtn === null || cityViewBtn === void 0 ? void 0 : cityViewBtn.click();\n    }\n    const buildModeButton = document.querySelector('[class=\"construction_queue_build_button\"] div');\n    if (!buildModeButton.classList.contains('active')) {\n        buildModeButton.click();\n    }\n    yield (0, ui_utility_1.waitForElement)(selector).then((element) => element.click());\n});\nexports.buildingsSelectors = {\n    buildButton: `.btn_build.build_button`,\n    currentLvl: `[class=\"twa_content js-content-area\"] span:nth-of-type(3)`,\n    disabled: 'disabled'\n};\n// .city_overview_overlay.main .btn_build.build_button\nexports.buildings = {\n    main: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/main.png)',\n        elementSelector: '.city_overview_overlay.main',\n        currentLvlElSelector: '.city_overview_overlay.main [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Senate',\n        buildAction: () => buildActionSafe('.city_overview_overlay.main .btn_build.build_button'),\n    },\n    hide: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/hide.png)',\n        elementSelector: '.city_overview_overlay.hide',\n        currentLvlElSelector: '.city_overview_overlay.hide [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Cave',\n        buildAction: () => buildActionSafe('.city_overview_overlay.hide .btn_build.build_button'),\n    },\n    lumber: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/lumber.png)',\n        elementSelector: '.city_overview_overlay.lumber',\n        currentLvlElSelector: '.city_overview_overlay.lumber [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Lumber mill',\n        buildAction: () => buildActionSafe('.city_overview_overlay.lumber .btn_build.build_button'),\n    },\n    stoner: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/stoner.png)',\n        elementSelector: '.city_overview_overlay.stoner',\n        currentLvlElSelector: '.city_overview_overlay.stoner [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Quarry',\n        buildAction: () => buildActionSafe('.city_overview_overlay.stoner .btn_build.build_button'),\n    },\n    ironer: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/ironer.png)',\n        elementSelector: '.city_overview_overlay.ironer',\n        currentLvlElSelector: '.city_overview_overlay.ironer [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Silver mine',\n        buildAction: () => buildActionSafe('.city_overview_overlay.ironer .btn_build.build_button'),\n    },\n    market: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/market.png)',\n        elementSelector: '.city_overview_overlay.market',\n        currentLvlElSelector: '.city_overview_overlay.market [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Market',\n        buildAction: () => buildActionSafe('.city_overview_overlay.market .btn_build.build_button'),\n    },\n    docks: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/docks.png)',\n        elementSelector: '.city_overview_overlay.docks',\n        currentLvlElSelector: '.city_overview_overlay.docks [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Harbor',\n        buildAction: () => buildActionSafe('.city_overview_overlay.docks .btn_build.build_button'),\n    },\n    barracks: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/barracks.png)',\n        elementSelector: '.city_overview_overlay.barracks',\n        currentLvlElSelector: '.city_overview_overlay.barracks [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Barracks',\n        buildAction: () => buildActionSafe('.city_overview_overlay.barracks .btn_build.build_button'),\n    },\n    wall: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/wall.png)',\n        elementSelector: '.city_overview_overlay.wall',\n        currentLvlElSelector: '.city_overview_overlay.wall [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'City wall',\n        buildAction: () => buildActionSafe('.city_overview_overlay.wall .btn_build.build_button'),\n    },\n    storage: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/storage.png)',\n        elementSelector: '.city_overview_overlay.storage',\n        currentLvlElSelector: '.city_overview_overlay.storage [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Warehouse',\n        buildAction: () => buildActionSafe('.city_overview_overlay.storage .btn_build.build_button'),\n    },\n    farm: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/farm.png)',\n        elementSelector: '.city_overview_overlay.farm',\n        currentLvlElSelector: '.city_overview_overlay.farm [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Farm',\n        buildAction: () => buildActionSafe('.city_overview_overlay.farm .btn_build.build_button'),\n    },\n    academy: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/academy.png)',\n        elementSelector: '.city_overview_overlay.academy',\n        currentLvlElSelector: '.city_overview_overlay.academy [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Academy',\n        buildAction: () => buildActionSafe('.city_overview_overlay.academy .btn_build.build_button'),\n    },\n    temple: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/temple.png)',\n        elementSelector: '.city_overview_overlay.temple',\n        currentLvlElSelector: '.city_overview_overlay.temple [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Temple',\n        buildAction: () => buildActionSafe('.city_overview_overlay.temple .btn_build.build_button'),\n    }\n};\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst plain_utility_1 = require(\"../../../utility/plain-utility\");\nconst ui_lock_1 = __importDefault(require(\"../../../utility/ui-lock\"));\nconst ui_utility_1 = require(\"../../../utility/ui-utility\");\nconst queue_css_1 = __importDefault(require(\"./queue.css\"));\nconst builder_prod_html_1 = __importDefault(require(\"./builder-prod.html\"));\nconst buildings_1 = require(\"./buildings\");\nconst resource_manager_1 = __importDefault(require(\"../../resources/resource-manager\"));\nconst city_switch_manager_1 = __importDefault(require(\"../city-switch-manager\"));\nclass CityBuilder {\n    constructor() {\n        this.allowUnsequentialBuilds = false;\n        this.allowCriticalBuilds = true;\n        this.RUN = false;\n        this.mainQueue = [];\n    }\n    static getInstance() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!CityBuilder.instance) {\n                CityBuilder.instance = new CityBuilder();\n                CityBuilder.instance.lock = ui_lock_1.default.getInstance();\n                CityBuilder.instance.resourceManager = resource_manager_1.default.getInstance();\n                CityBuilder.instance.citySwitchManager = yield city_switch_manager_1.default.getInstance();\n                CityBuilder.instance.addStyle();\n                CityBuilder.instance.renderUI();\n                CityBuilder.instance.loadQueueFromStorage();\n                CityBuilder.instance.listenToCitySwitch();\n            }\n            return CityBuilder.instance;\n        });\n    }\n    renderUI() {\n        const container = document.createElement('div');\n        container.innerHTML = builder_prod_html_1.default;\n        document.body.appendChild(container);\n        this.addBuildButtons();\n        this.initToggleButtonEvents();\n    }\n    initToggleButtonEvents() {\n        const button = document.getElementById(CityBuilder.toggleBuilderButtonId);\n        button.addEventListener('click', () => {\n            const buildContainer = document.getElementById(CityBuilder.buildContainerId);\n            buildContainer.classList.toggle('hidden');\n            if (!buildContainer.classList.contains('hidden')) {\n                this.tryGoToBuildMode('current');\n            }\n            else {\n                this.tryExitBuildMode();\n            }\n        });\n    }\n    listenToCitySwitch() {\n        this.citySwitchManager.on('cityChange', (city) => {\n            const currentCityQueue = this.mainQueue.find(queue => queue.city === city);\n            this.rerenderQueue(currentCityQueue);\n        });\n    }\n    /*\n    <div id=\"build-container\">\n      <div id=\"build-options\">\n        <div class=\"build-option\"\n          style=\"background-image: url(https://gpen.innogamescdn.com/images/game/main/lumber.png)\">\n          <div class=\"build-options-add\">+</div>\n        </div>\n      </div>\n      <div id=\"additional-queue\">\n  \n      </div>\n    </div>\n    <button id=\"show-builder\">Toggle builder</button>\n    */\n    addBuildButtons() {\n        // <div id=\"build-container\">\n        const buildOptions = document.getElementById(CityBuilder.buildOptionsContainerId);\n        // <div class=\"build-option\"\n        Object.values(buildings_1.buildings).forEach(building => {\n            const button = document.createElement('div');\n            button.className = CityBuilder.buildOptionItemClass;\n            button.style.backgroundImage = building.backgroundImageProp;\n            buildOptions.appendChild(button);\n            // <div class=\"build-options-add\">+</div>\n            const addIcon = document.createElement('div');\n            addIcon.className = CityBuilder.buildOptionItemAddClass;\n            addIcon.innerHTML = '+';\n            button.appendChild(addIcon);\n            button.addEventListener('click', () => {\n                this.onOptionBuildButtonClick(building);\n            });\n        });\n    }\n    tryGoToBuildMode(city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            if (city !== 'current') {\n                yield city.switchAction();\n            }\n            (_a = document.querySelector('[name=\"city_overview\"]')) === null || _a === void 0 ? void 0 : _a.click();\n            const buildModeButton = yield (0, ui_utility_1.waitForElement)('[class=\"construction_queue_build_button\"] div', 2000);\n            if (!buildModeButton.classList.contains('active')) {\n                buildModeButton.click();\n            }\n        });\n    }\n    tryExitBuildMode() {\n        const buildModeButton = document.querySelector('[class=\"construction_queue_build_button\"] div');\n        if (buildModeButton === null || buildModeButton === void 0 ? void 0 : buildModeButton.classList.contains('active')) {\n            buildModeButton.click();\n        }\n    }\n    onOptionBuildButtonClick(building) {\n        const currentCity = this.citySwitchManager.getCurrentCity();\n        let currentCityQueue = this.mainQueue.find((queueObj) => queueObj.city.name === currentCity.name);\n        if (!currentCityQueue) {\n            currentCityQueue = {\n                city: currentCity,\n                queue: [],\n                schedule: null\n            };\n            this.mainQueue.push(currentCityQueue);\n        }\n        this.addToQueue(building, currentCityQueue);\n    }\n    /**\n     * Tworzy element DOM przedstawiający element kolejki i zwraca go.\n     * @param building\n     * @returns\n     */\n    addBuldingToUIQueue(queueItem, position = 'end', cityQueue) {\n        const additionalQueue = document.getElementById('additional-queue');\n        const queueItemEl = document.createElement('div');\n        queueItemEl.className = CityBuilder.queueItemClass;\n        queueItemEl.style.backgroundImage = queueItem.building.backgroundImageProp;\n        queueItemEl.setAttribute('data-id', queueItem.id);\n        position === 'start' ? this.appendChildAtIndex(additionalQueue, queueItemEl, 0) : additionalQueue.appendChild(queueItemEl);\n        // <div class=\"up\">+1</div>\n        const upButton = document.createElement('div');\n        upButton.className = CityBuilder.upButtonClass;\n        upButton.textContent = `+${queueItem.toLvl}`;\n        queueItemEl.appendChild(upButton);\n        // <div class=\"cancel\">&#x2715;</div>\n        const cancelButton = document.createElement('div');\n        cancelButton.className = CityBuilder.cancelButtonClass;\n        cancelButton.innerHTML = '&#x2715;';\n        queueItemEl.appendChild(cancelButton);\n        cancelButton.addEventListener('click', () => {\n            const index = cityQueue.queue.findIndex(item => item.id === queueItem.id);\n            if (index !== -1) {\n                if (index === 0) {\n                    cityQueue.queue.shift();\n                    if (cityQueue.schedule) {\n                        clearInterval(cityQueue.schedule);\n                        clearTimeout(cityQueue.schedule);\n                        cityQueue.schedule = null;\n                    }\n                    this.revalidateQueueItemLevels(queueItem.building, index, cityQueue);\n                    this.handleBuildSchedule(cityQueue);\n                }\n                else {\n                    cityQueue.queue.splice(index, 1);\n                    this.revalidateQueueItemLevels(queueItem.building, index, cityQueue);\n                }\n                queueItemEl.remove();\n                this.saveQueueToStorage();\n            }\n            else {\n                console.log('Item not found in queue');\n            }\n        });\n        console.log('queueItemEl', queueItemEl);\n        return queueItemEl;\n    }\n    revalidateQueueItemLevels(building, fromIndex, cityQueue) {\n        console.log('--------revalidateQueueItemLevels', building, fromIndex);\n        const itemsToRevalidate = cityQueue.queue.filter((item, index) => index >= fromIndex && item.building.name === building.name);\n        itemsToRevalidate.forEach((item) => {\n            const newToLvl = item.toLvl - 1;\n            const newId = `${item.building.name}-${newToLvl}`;\n            const queueItemEl = document.querySelector(`[data-id=\"${item.id}\"]`);\n            if (queueItemEl) {\n                queueItemEl.querySelector('.up').textContent = `+${newToLvl}`;\n                queueItemEl.setAttribute('data-id', newId);\n            }\n            item.toLvl = newToLvl;\n            item.id = newId;\n        });\n    }\n    addToQueue(building, cityQueue) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.tryGoToBuildMode('current');\n            let currentLvl;\n            const buildingElement = yield (0, ui_utility_1.waitForElement)(building.elementSelector, 1000).catch(() => null);\n            if (buildingElement) {\n                const buildingcurrentLvlText = yield (0, ui_utility_1.waitForElement)(`${building.elementSelector} ${buildings_1.buildingsSelectors.currentLvl}`, 1000)\n                    .then(el => el.textContent)\n                    .catch(() => null);\n                currentLvl = (buildingcurrentLvlText !== 'max' || buildingcurrentLvlText !== null) ? Number(buildingcurrentLvlText) : Infinity;\n            }\n            else {\n                currentLvl = 0;\n            }\n            if (currentLvl === Infinity) {\n                return;\n            }\n            const lvlCounter = cityQueue.queue.filter(item => item.building.name === building.name).length + 1;\n            const id = `${building.name}-${currentLvl + lvlCounter}`;\n            const queueItem = { id, building, toLvl: currentLvl + lvlCounter };\n            console.log('queueItem', queueItem);\n            this.addBuldingToUIQueue(queueItem, 'end', cityQueue);\n            cityQueue.queue.push(queueItem);\n            this.saveQueueToStorage();\n            console.log('pushed to queue:', JSON.parse(JSON.stringify(cityQueue.queue)));\n            this.buildOrSchedule(cityQueue);\n        });\n    }\n    buildOrSchedule(cityQueue) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (cityQueue.queue.length === 1) {\n                console.log('\\t-queue has only one item, handling immediately');\n                if (cityQueue.schedule) {\n                    clearInterval(cityQueue.schedule);\n                    clearTimeout(cityQueue.schedule);\n                    cityQueue.schedule = null;\n                }\n                yield this.handleBuildSchedule(cityQueue);\n            }\n            else {\n                console.log('\\t-queue has more than one item, waiting for its turn');\n            }\n        });\n    }\n    performBuildSchedule(cityQueue) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!cityQueue || !cityQueue.queue.length) {\n                if (!(yield this.isQueueEmpty(cityQueue.city))) {\n                    yield this.setTimeoutForNextSpeedUpAndSchedule(cityQueue);\n                }\n                return;\n            }\n            console.log('performBuildSchedule with queue:', JSON.parse(JSON.stringify(cityQueue.queue)));\n            if (yield this.isEmptySlot(cityQueue.city)) {\n                const item = cityQueue.queue[0];\n                yield this.checkIfItemCanBeBuiltAndAddDeleteOrSchedule(cityQueue, item);\n            }\n            else {\n                yield this.setTimeoutForNextSpeedUpAndSchedule(cityQueue);\n            }\n        });\n    }\n    setTimeoutForNextSpeedUpAndSchedule(cityQueue) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const timeToSpeedUp = yield this.getTimeToCanSpeedUp(cityQueue.city).catch(() => null);\n            if (timeToSpeedUp === null) {\n                console.log('\\t-timeToSpeedUp is null, performing build schedule');\n                yield this.performBuildSchedule(cityQueue);\n                return;\n            }\n            if (timeToSpeedUp <= 0) {\n                console.log('\\t-will speed up first build immediately');\n                const emptySlots = this.getEmptySlotsCount();\n                yield this.speedUpFirstBuild(cityQueue.city);\n                yield this.untilEmptyslotsAreEqual(emptySlots + 1);\n                yield this.performBuildSchedule(cityQueue);\n            }\n            else {\n                console.log('\\t-speed up will be scheduled at:', (0, plain_utility_1.getTimeInFuture)(timeToSpeedUp));\n                cityQueue.schedule = setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n                    try {\n                        console.log('setTimeoutForNextSpeedUpAndSchedule, wait for lock', cityQueue.city.name);\n                        yield this.lock.acquire();\n                        console.log('setTimeoutForNextSpeedUpAndSchedule, take lock', cityQueue.city.name);\n                        const emptySlots = this.getEmptySlotsCount();\n                        yield this.speedUpFirstBuild(cityQueue.city);\n                        yield this.untilEmptyslotsAreEqual(emptySlots + 1);\n                        yield this.performBuildSchedule(cityQueue);\n                    }\n                    catch (e) {\n                        console.warn('CityBuilder.setTimeoutForNextSpeedUpAndSchedule().catch', e);\n                    }\n                    finally {\n                        console.log('setTimeoutForNextSpeedUpAndSchedule, release lock', cityQueue.city.name);\n                        this.lock.release();\n                    }\n                }), timeToSpeedUp);\n            }\n        });\n    }\n    checkIfItemCanBeBuiltAndAddDeleteOrSchedule(cityQueue_1, item_1) {\n        return __awaiter(this, arguments, void 0, function* (cityQueue, item, forced = false) {\n            const building = item.building;\n            console.log('check if can build item:', item);\n            const canBuild = yield this.canBuild(building, cityQueue.city);\n            console.log('\\t-canBuild:', canBuild);\n            if (canBuild === true) {\n                console.log('\\t-canBuild is true, building...');\n                const emptySlots = this.getEmptySlotsCount();\n                yield building.buildAction();\n                yield this.untilEmptyslotsAreEqual(emptySlots - 1);\n                yield this.shiftQueueCleanScheduleAndTryNext(item, cityQueue);\n            }\n            else if (canBuild === 'maxed') {\n                console.log('\\t-canBuild is maxed or not possible at the moment, shifting queue');\n                if (forced) {\n                    this.clearUIQueueItem(cityQueue.queue[1]);\n                    cityQueue.queue.splice(1, 1);\n                    yield this.shiftQueueCleanScheduleAndTryNext(item, cityQueue);\n                }\n                else {\n                    yield this.shiftQueueCleanScheduleAndTryNext(item, cityQueue);\n                }\n            }\n            else if (canBuild === 'impossible') {\n                if (!(yield this.isQueueEmpty(cityQueue.city))) {\n                    console.log('\\t-canBuild is impossible, but queue is not empty, scheduling build because maybe after that it will be possible');\n                    yield this.setTimeoutForNextSpeedUpAndSchedule(cityQueue);\n                }\n                else {\n                    console.log('\\t-canBuild is impossible, and queue is empty, element must be deleted');\n                    yield this.shiftQueueCleanScheduleAndTryNext(item, cityQueue);\n                }\n            }\n            else {\n                const resourcesInfo = yield this.areResourcesStackable(building, cityQueue.city);\n                if (resourcesInfo.areStackable === true) {\n                    // const timeToSpeedUp = !(await this.isQueueEmpty(cityQueue.city)) ?\n                    //   await this.getTimeToCanSpeedUp(cityQueue.city).catch(() => null) :\n                    //   null;\n                    // const buildRetryCallback = () => setInterval(async () => {\n                    //   try {\n                    //     console.log('checkIfItemCanBeBuiltAndAddDeleteOrSchedule, wait for lock', cityQueue.city.name);\n                    //     await this.lock.acquire();\n                    //     console.log('checkIfItemCanBeBuiltAndAddDeleteOrSchedule, take lock', cityQueue.city.name);\n                    //     if ((await this.resourceManager.hasEnoughResources(resourcesInfo.requiredResources, cityQueue.city)) && (await this.canBuild(building, cityQueue.city))) {\n                    //       console.log('\\t\\t-canBuild is true, building...');\n                    //       const emptySlots = this.getEmptySlotsCount();\n                    //       await building.buildAction();\n                    //       await this.untilEmptyslotsAreEqual(emptySlots - 1);\n                    //       await this.shiftQueueCleanScheduleAndTryNext(item, cityQueue);\n                    //     }\n                    //   } catch (e) {\n                    //     console.warn('CityBuilder.checkIfItemCanBeBuiltAndAddDeleteOrSchedule().catch', e);\n                    //   } finally {\n                    //     console.log('checkIfItemCanBeBuiltAndAddDeleteOrSchedule, release lock', cityQueue.city.name);\n                    //     this.lock.release();\n                    //   }\n                    // }, CityBuilder.BUILD_RETRY_INTERVAL);\n                    // if (timeToSpeedUp && timeToSpeedUp < CityBuilder.BUILD_RETRY_INTERVAL) {\n                    //   cityQueue.schedule = setTimeout(async () => {\n                    //     try {\n                    //       await this.lock.acquire();\n                    //       await this.speedUpFirstBuild(cityQueue.city);\n                    //       cityQueue.schedule = buildRetryCallback();\n                    //     } catch (e) {\n                    //       console.warn('CityBuilder.checkIfItemCanBeBuiltAndAddDeleteOrSchedule().catch', e);\n                    //     } finally {\n                    //       this.lock.release();\n                    //     }\n                    //   }, timeToSpeedUp);\n                    // }\n                    console.log('\\t-areResourcesStackable is true, scheduling build');\n                    cityQueue.schedule = setInterval(() => __awaiter(this, void 0, void 0, function* () {\n                        try {\n                            console.log('checkIfItemCanBeBuiltAndAddDeleteOrSchedule, wait for lock', cityQueue.city.name);\n                            yield this.lock.acquire();\n                            console.log('checkIfItemCanBeBuiltAndAddDeleteOrSchedule, take lock', cityQueue.city.name);\n                            if ((yield this.resourceManager.hasEnoughResources(resourcesInfo.requiredResources, cityQueue.city)) && (yield this.canBuild(building, cityQueue.city))) {\n                                console.log('\\t\\t-canBuild is true, building...');\n                                const emptySlots = this.getEmptySlotsCount();\n                                yield building.buildAction();\n                                yield this.untilEmptyslotsAreEqual(emptySlots - 1);\n                                yield this.shiftQueueCleanScheduleAndTryNext(item, cityQueue);\n                            }\n                        }\n                        catch (e) {\n                            console.warn('CityBuilder.checkIfItemCanBeBuiltAndAddDeleteOrSchedule().catch', e);\n                        }\n                        finally {\n                            console.log('checkIfItemCanBeBuiltAndAddDeleteOrSchedule, release lock', cityQueue.city.name);\n                            this.lock.release();\n                        }\n                    }), CityBuilder.BUILD_RETRY_INTERVAL);\n                }\n                else if (resourcesInfo.areStackable === 'population' && this.allowCriticalBuilds) {\n                    console.log('\\t\\t-areResourcesStackable is population, adding farm to queue');\n                    const farm = buildings_1.buildings.farm;\n                    const buildingLvl = yield this.getBuildingCurrentLvl(farm);\n                    const id = `${farm.name}-${buildingLvl}`;\n                    const queueItem = { id, building, toLvl: buildingLvl + 1 };\n                    cityQueue.queue.unshift(queueItem);\n                    this.addBuldingToUIQueue(queueItem, 'start', cityQueue);\n                    yield this.performBuildSchedule(cityQueue);\n                }\n                else if (resourcesInfo.areStackable === 'storage' && this.allowCriticalBuilds) {\n                    console.log('\\t\\t-areResourcesStackable is storage, adding storage to queue');\n                    const storage = buildings_1.buildings.storage;\n                    const buildingLvl = yield this.getBuildingCurrentLvl(storage);\n                    const id = `${storage.name}-${buildingLvl}`;\n                    const queueItem = { id, building, toLvl: buildingLvl + 1 };\n                    cityQueue.queue.unshift(queueItem);\n                    this.addBuldingToUIQueue(queueItem, 'start', cityQueue);\n                    yield this.performBuildSchedule(cityQueue);\n                }\n                else if (resourcesInfo.areStackable === 'alreadyStacked' && !(yield this.isQueueEmpty(cityQueue.city))) {\n                    console.log('\\t\\t-areResourcesStackable is alreadyStacked, scheduling build');\n                    yield this.setTimeoutForNextSpeedUpAndSchedule(cityQueue);\n                }\n                else {\n                    console.log('Item cannot be scheduled, because it has not met requirements');\n                    yield this.shiftQueueCleanScheduleAndTryNext(item, cityQueue);\n                }\n            }\n        });\n    }\n    getBuildingCurrentLvl(building) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const buildingcurrentLvlText = (yield (0, ui_utility_1.waitForElement)(`${building.elementSelector} ${buildings_1.buildingsSelectors.currentLvl}`)).textContent;\n            const currentLvl = buildingcurrentLvlText !== 'max' ? Number(buildingcurrentLvlText) : Infinity;\n            return currentLvl;\n        });\n    }\n    clearUIQueueItem(item) {\n        const queueItemEl = document.querySelector(`[data-id=\"${item.id}\"]`);\n        if (queueItemEl) {\n            queueItemEl.remove();\n        }\n    }\n    getEmptySlotsCount() {\n        return document.querySelectorAll('.construction_queue_order_container.instant_buy .js-queue-item.empty_slot').length;\n    }\n    untilEmptyslotsAreEqual(emptySlots) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise((res) => {\n                const interval = setInterval(() => {\n                    if (this.getEmptySlotsCount() === emptySlots) {\n                        console.log('\\t-emptyslotsAreEqual:', emptySlots);\n                        clearInterval(interval);\n                        res();\n                    }\n                }, 333);\n            });\n        });\n    }\n    shiftQueueCleanScheduleAndTryNext(item, cityQueue) {\n        return __awaiter(this, void 0, void 0, function* () {\n            cityQueue.queue.shift();\n            this.saveQueueToStorage();\n            if (cityQueue.schedule) {\n                clearInterval(cityQueue.schedule);\n                clearTimeout(cityQueue.schedule);\n                cityQueue.schedule = null;\n            }\n            this.clearUIQueueItem(item);\n            yield this.performBuildSchedule(cityQueue);\n        });\n    }\n    goToCityView() {\n        const cityViewBtn = document.querySelector('[name=\"city_overview\"]');\n        cityViewBtn === null || cityViewBtn === void 0 ? void 0 : cityViewBtn.click();\n    }\n    handleBuildSchedule(cityQueue) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                console.log('handleBuildSchedule, wait for lock', cityQueue.city.name);\n                yield this.lock.acquire();\n                console.log('handleBuildSchedule, take lock', cityQueue.city.name);\n                yield this.performBuildSchedule(cityQueue);\n            }\n            catch (e) {\n                console.warn('CityBuilder.doQueueOperation().catch', e);\n            }\n            finally {\n                console.log('handleBuildSchedule, release lock', cityQueue.city.name);\n                this.lock.release();\n            }\n        });\n    }\n    speedUpFirstBuild(city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.tryGoToBuildMode(city);\n            const freeButton = yield (0, ui_utility_1.waitForElement)('[data-order_index=\"0\"] .type_free', 2000).catch(() => null);\n            if (freeButton) {\n                freeButton.click();\n            }\n            else {\n                throw new Error('No free button found');\n            }\n        });\n    }\n    canBuild(building, city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.tryGoToBuildMode(city);\n            const element = yield (0, ui_utility_1.waitForElement)(building.elementSelector, 2000).catch(() => null);\n            if (!element) {\n                return 'impossible';\n            }\n            const buildButton = yield (0, ui_utility_1.waitForElement)(`${building.elementSelector} ${buildings_1.buildingsSelectors.buildButton}`, 1000).catch(() => null);\n            if (!buildButton) {\n                return 'maxed';\n            }\n            const canBuild = !buildButton.classList.contains(buildings_1.buildingsSelectors.disabled);\n            return canBuild;\n        });\n    }\n    areResourcesStackable(building, city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log('areResourcesStackable');\n            yield this.tryGoToBuildMode(city);\n            // const buildButton = await waitForElement(`${building.elementSelector} ${buildingsSelectors.buildButton}`);\n            let counter = 0;\n            do {\n                (0, ui_utility_1.triggerHover)(document.querySelector(`${building.elementSelector} ${buildings_1.buildingsSelectors.buildButton}`));\n                yield (0, plain_utility_1.addDelay)(333);\n                counter++;\n            } while (!(yield (0, ui_utility_1.waitForElement)('#popup_div img[src*=\"images/game/res/wood.png\"]', 500).catch(() => false)) && counter < 4);\n            if (counter === 4) {\n                console.warn('No popup content found, had to try 4 times. Returning false');\n                return { areStackable: false, requiredResources: { wood: 0, stone: 0, iron: 0 } };\n            }\n            console.log('popup_div found !!!');\n            const requiredWood = Number((yield (0, ui_utility_1.waitForElement)('#popup_div img[src*=\"images/game/res/wood.png\"]', 3000)).nextSibling.textContent);\n            const requiredStone = Number((yield (0, ui_utility_1.waitForElement)('#popup_div img[src*=\"images/game/res/stone.png\"]', 0)).nextSibling.textContent);\n            const requiredIron = Number((yield (0, ui_utility_1.waitForElement)('#popup_div img[src*=\"images/game/res/iron.png\"]', 0)).nextSibling.textContent);\n            const requiredPopulation = Number((yield (0, ui_utility_1.waitForElement)('#popup_div img[src*=\"images/game/res/pop.png\"]', 0)).nextSibling.textContent);\n            (0, ui_utility_1.cancelHover)(document.querySelector(`${building.elementSelector} ${buildings_1.buildingsSelectors.buildButton}`));\n            const resourcesInfo = yield this.resourceManager.getResourcesInfo();\n            console.log(`Resource requirements:\r\n      \\t- Required population: ${requiredPopulation}\r\n      \\t- Current population: ${this.resourceManager.getPopulation()}\r\n      \\t- Store capacity: ${yield this.resourceManager.getStoreCapacity()}\r\n      \\t- Required wood: ${requiredWood}\r\n      \\t- Required stone: ${requiredStone}\r\n      \\t- Required iron: ${requiredIron}`);\n            console.log('Current resources:', resourcesInfo);\n            const requiredResources = {\n                wood: requiredWood,\n                stone: requiredStone,\n                iron: requiredIron,\n            };\n            if (requiredPopulation > (resourcesInfo.population.amount)) {\n                return { areStackable: 'population', requiredResources };\n            }\n            if ([requiredWood, requiredStone, requiredIron].reduce((acc, curr) => curr > acc ? curr : acc, 0) > resourcesInfo.storeMaxSize) {\n                return { areStackable: 'storage', requiredResources };\n            }\n            if (requiredWood <= (resourcesInfo).wood.amount &&\n                requiredStone <= (resourcesInfo).stone.amount &&\n                requiredIron <= (resourcesInfo).iron.amount &&\n                requiredPopulation <= (resourcesInfo).population.amount) {\n                return { areStackable: 'alreadyStacked', requiredResources };\n            }\n            return { areStackable: true, requiredResources };\n        });\n    }\n    ;\n    addStyle() {\n        const style = document.createElement('style');\n        style.textContent = queue_css_1.default;\n        document.head.appendChild(style);\n    }\n    isEmptySlot(city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.goToCityView();\n            yield city.switchAction();\n            yield (0, plain_utility_1.addDelay)(1000);\n            return yield (0, ui_utility_1.waitForElement)('.construction_queue_order_container.instant_buy .js-queue-item.empty_slot', 1000)\n                .then(() => true)\n                .catch(() => false);\n        });\n    }\n    getTimeToCanSpeedUp(city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.goToCityView();\n            yield city.switchAction();\n            yield (0, plain_utility_1.addDelay)(1000);\n            const firstOrder = yield (0, ui_utility_1.waitForElement)('[data-order_index=\"0\"] .countdown.js-item-countdown', 3000).catch(() => null);\n            if (firstOrder) {\n                return (0, plain_utility_1.textToMs)(firstOrder.textContent) - 5 * 60 * 1000;\n            }\n            throw new Error('No item in the queue.');\n        });\n    }\n    loadQueueFromStorage() {\n        const queue = localStorage.getItem('cityBuilderQueue');\n        if (queue) {\n            this.mainQueue = JSON.parse(queue)\n                .map((cityQueue) => {\n                const city = this.citySwitchManager.getCityByName(cityQueue.city.name);\n                if (!city) {\n                    return null;\n                }\n                // actual queue\n                const queueItems = cityQueue.queue.map(item => {\n                    const building = Object.values(buildings_1.buildings).find(building => building.name === item.building.name);\n                    return Object.assign(Object.assign({}, item), { building });\n                });\n                return { city, queue: queueItems, schedule: null };\n            })\n                .filter((queue) => queue !== null);\n        }\n        const currentCity = this.citySwitchManager.getCurrentCity();\n        const currentCityQueue = this.mainQueue.find(queue => queue.city === currentCity);\n        if (currentCityQueue) {\n            currentCityQueue.queue.forEach(item => {\n                this.addBuldingToUIQueue(item, 'end', currentCityQueue);\n            });\n        }\n    }\n    saveQueueToStorage() {\n        localStorage.setItem('cityBuilderQueue', JSON.stringify(this.mainQueue));\n    }\n    isQueueEmpty(city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield city.switchAction();\n            this.goToCityView();\n            return new Promise((res) => setTimeout(() => res(document.querySelector('.empty_queue')) != null, 0));\n        });\n    }\n    start() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.RUN = true;\n            document.getElementById(CityBuilder.toggleBuilderButtonId).classList.remove('hidden');\n            for (const cityQueue of this.mainQueue) {\n                yield this.handleBuildSchedule(cityQueue);\n            }\n        });\n    }\n    stop() {\n        console.log('Stopping');\n        this.RUN = false;\n        this.mainQueue.forEach(cityQueue => {\n            if (cityQueue.schedule) {\n                clearInterval(cityQueue.schedule);\n                clearTimeout(cityQueue.schedule);\n                cityQueue.schedule = null;\n            }\n        });\n        document.getElementById(CityBuilder.toggleBuilderButtonId).classList.add('hidden');\n    }\n    isRunning() {\n        return this.RUN;\n    }\n    appendChildAtIndex(additionalQueue, queueItemEl, index) {\n        additionalQueue.insertBefore(queueItemEl, additionalQueue.children[index]);\n    }\n    rerenderQueue(cityQueue) {\n        document.getElementById('additional-queue').innerHTML = '';\n        if (cityQueue) {\n            cityQueue.queue.forEach(item => {\n                this.addBuldingToUIQueue(item, 'end', cityQueue);\n            });\n        }\n    }\n}\nCityBuilder.queueContainerId = 'additional-queue';\nCityBuilder.queueItemClass = 'queue-item';\nCityBuilder.cancelButtonClass = 'cancel';\nCityBuilder.upButtonClass = 'up';\nCityBuilder.buildOptionsContainerId = 'build-options';\nCityBuilder.buildOptionItemClass = 'build-option';\nCityBuilder.buildOptionItemAddClass = 'build-options-add';\nCityBuilder.buildContainerId = 'build-container';\nCityBuilder.toggleBuilderButtonId = 'toggle-builder';\nCityBuilder.BUILD_RETRY_INTERVAL = 180 * 1000;\nexports.default = CityBuilder;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst events_1 = __importDefault(require(\"events\"));\nconst ui_utility_1 = require(\"../../utility/ui-utility\");\nconst plain_utility_1 = require(\"../../utility/plain-utility\");\nclass CitySwitchManager extends events_1.default {\n    constructor() {\n        super();\n        this.RUN = false;\n        this.cityList = [];\n    }\n    static getInstance() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!CitySwitchManager.instance) {\n                CitySwitchManager.instance = new CitySwitchManager();\n                CitySwitchManager.instance.cityList = yield CitySwitchManager.instance.initCityList();\n                CitySwitchManager.instance.mountObserver();\n            }\n            return CitySwitchManager.instance;\n        });\n    }\n    mountObserver() {\n        new MutationObserver((mutations) => {\n            for (const mutation of mutations) {\n                if (mutation.addedNodes.length) {\n                    this.emit('cityChange', this.getCurrentCity());\n                    console.log('cityChange:', this.getCurrentCity());\n                }\n            }\n        }).observe(document.querySelector('.town_name_area .town_name.js-rename-caption'), { childList: true });\n    }\n    /**\n     * Method parses list of city, and creates shortcut access.\n     */\n    initCityList() {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a, _b, _c, _d, _e;\n            const dropdownTrigger = yield (0, ui_utility_1.waitForElement)('.town_groups_dropdown.btn_toggle_town_groups_menu');\n            dropdownTrigger.click();\n            let townListElement;\n            while (!(townListElement = yield (0, ui_utility_1.waitForElement)('.group_towns', 1000).catch(() => null))) {\n                document.querySelector('.btn_toggle_town_groups_menu').click();\n                yield (0, plain_utility_1.addDelay)(100);\n            }\n            const townList = townListElement.querySelectorAll('span.town_name');\n            const cityList = [];\n            for (const town of townList) {\n                console.log('initCityList.town:', town);\n                const cityId = town.parentElement.getAttribute('data-townid');\n                console.log('\\t-cityId:', cityId);\n                yield this.openTownList();\n                console.log('\\t-openTownList');\n                // for (const el of townList) {\n                for (const el of Array.from(yield (0, ui_utility_1.waitForElements)('.group_towns span.town_name', 3000))) {\n                    console.log('\\t\\t-element to match, element searched:', el.textContent, town.textContent);\n                    if (el.textContent === town.textContent) {\n                        console.log('\\t\\t\\t-found matched element:', el, 'click it');\n                        el.click();\n                        break;\n                    }\n                }\n                ;\n                yield (0, plain_utility_1.addDelay)(100);\n                // here switch to city in order to element be in the dom\n                document.querySelector('.btn_jump_to_town.circle_button.jump_to_town').click();\n                console.log('\\t-click', document.querySelector('.btn_jump_to_town.circle_button.jump_to_town'));\n                const isleId = (_e = (_d = (_c = Array.from((_b = (_a = (yield (0, ui_utility_1.waitForElement)(`#town_${cityId}`, 3000))) === null || _a === void 0 ? void 0 : _a.classList) !== null && _b !== void 0 ? _b : [])\n                    .find(cls => cls.match(/town_\\d+_\\d+_\\d+/))) === null || _c === void 0 ? void 0 : _c.match(/town_(\\d+_\\d+)_\\d+/)) === null || _d === void 0 ? void 0 : _d[1]) !== null && _e !== void 0 ? _e : '';\n                const name = town.textContent;\n                cityList.push({\n                    name,\n                    cityId,\n                    isleId,\n                    switchAction: () => __awaiter(this, void 0, void 0, function* () {\n                        try {\n                            if (document.querySelector('div.town_name').textContent !== name) {\n                                let townListElement = document.querySelector('.group_towns');\n                                if (!townListElement) {\n                                    do {\n                                        yield (0, ui_utility_1.waitForElement)('.town_groups_dropdown.btn_toggle_town_groups_menu', 1000).then(el => el.click()).catch(() => null);\n                                        yield (0, plain_utility_1.addDelay)(333);\n                                    } while (!(townListElement = yield (0, ui_utility_1.waitForElement)('.group_towns', 1500).catch(() => null)));\n                                }\n                                const targetTown = Array.from(townListElement.querySelectorAll('span.town_name'))\n                                    .find(el => el.textContent === name);\n                                targetTown.click();\n                                do {\n                                    yield (0, plain_utility_1.addDelay)(100);\n                                } while (document.querySelector('div.town_name').textContent !== name);\n                            }\n                            document.querySelector('.btn_jump_to_town.circle_button.jump_to_town').click();\n                            yield (0, plain_utility_1.addDelay)(100);\n                        }\n                        catch (e) {\n                            console.warn('switchAction.catch:', e);\n                        }\n                    })\n                });\n            }\n            console.log('CitySwitchManager.cityList.initialized:', cityList);\n            yield this.goBackToFirstTown();\n            return cityList;\n        });\n    }\n    openTownList() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!(yield (0, ui_utility_1.waitForElement)('.group_towns', 1000).catch(() => null))) {\n                const dropdownTrigger = yield (0, ui_utility_1.waitForElement)('.town_groups_dropdown.btn_toggle_town_groups_menu');\n                dropdownTrigger.click();\n            }\n        });\n    }\n    goBackToFirstTown() {\n        return __awaiter(this, void 0, void 0, function* () {\n            document.querySelector('.btn_next_town.button_arrow.right').click();\n            document.querySelector('.btn_jump_to_town.circle_button.jump_to_town').click();\n        });\n    }\n    clickArrowUntilCityFound(cityName) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const cityWrapper = document.querySelector(`.town_name_area`);\n            const arrowLeft = cityWrapper.querySelector('.btn_prev_town.button_arrow.left');\n            const arrowRight = cityWrapper.querySelector('.btn_next_town.button_arrow.right');\n            do {\n                arrowRight.click();\n                yield (0, plain_utility_1.addDelay)(1500);\n                if (document.querySelector('div.town_name').textContent === cityName) {\n                    return;\n                }\n            } while (arrowRight.classList.contains('disabled'));\n            do {\n                arrowLeft.click();\n                yield (0, plain_utility_1.addDelay)(1500);\n                if (document.querySelector('div.town_name').textContent === cityName) {\n                    return;\n                }\n            } while (!arrowLeft.classList.contains('disabled'));\n        });\n    }\n    getCurrentCity() {\n        var _a, _b;\n        const name = (_b = (_a = document.querySelector('div.town_name')) === null || _a === void 0 ? void 0 : _a.textContent) !== null && _b !== void 0 ? _b : '';\n        return this.getCityByName(name);\n    }\n    getCityByName(name) {\n        return this.cityList.find(city => city.name === name);\n    }\n    getCityList() {\n        return this.cityList;\n    }\n    isRunning() {\n        return this.RUN;\n    }\n    run() {\n        this.RUN = true;\n    }\n    stop() {\n        // TODO: stop potential scheduled switchActions\n        this.RUN = false;\n    }\n}\nexports.default = CitySwitchManager;\nfunction sleep(arg0) {\n    throw new Error(\"Function not implemented.\");\n}\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst events_1 = __importDefault(require(\"events\"));\nconst gps_config_1 = require(\"../../../gps.config\");\nconst config_manager_1 = __importDefault(require(\"../../utility/config-manager\"));\nconst plain_utility_1 = require(\"../../utility/plain-utility\");\nconst ui_lock_1 = __importDefault(require(\"../../utility/ui-lock\"));\nconst ui_utility_1 = require(\"../../utility/ui-utility\");\nconst city_switch_manager_1 = __importDefault(require(\"../city/city-switch-manager\"));\nclass FarmManager extends events_1.default {\n    constructor() {\n        super();\n        this.schedulerArray = [];\n        this.messageDialogObserver = null;\n        this.humanMessageDialogObserver = null;\n        this.RUN = false;\n        this.scheduleNextFarmingOperationForCity = (timeInterval, city) => {\n            const scheduledDate = new Date(Date.now() + timeInterval);\n            const scheduleItem = {\n                scheduledDate,\n                timeout: null,\n                city\n            };\n            const timeout = setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n                this.schedulerArray = this.schedulerArray.filter(item => item !== scheduleItem);\n                this.farmVillages(city);\n            }), timeInterval);\n            scheduleItem.timeout = timeout;\n            this.schedulerArray.push(scheduleItem);\n            console.log('scheduler:', this.schedulerArray);\n        };\n        /**\n         * Metoda jest odpowiedzią na blokadę farmienia wynikającą z konieczności potwierdzenia farmienia w przypadku pełengo magazynu.\n         * Metoda obserwuje czy pojawił się popup z promptem do potwierdzenia kontynuacji i klika akceptuj.\n         */\n        this.mountMessageDialogsObservers = (city) => __awaiter(this, void 0, void 0, function* () {\n            if (!this.messageDialogObserver) {\n                const observer = new MutationObserver((mutations) => __awaiter(this, void 0, void 0, function* () {\n                    for (const mutation of mutations) {\n                        if (mutation.type === 'childList') {\n                            for (const node of mutation.addedNodes) {\n                                if (node instanceof HTMLElement && node.getAttribute('class') === 'window_curtain ui-front show_curtain is_modal_window') {\n                                    yield (0, plain_utility_1.addDelay)(100);\n                                    const confirmButton = node.querySelector('.btn_confirm.button_new');\n                                    confirmButton.click();\n                                    return;\n                                }\n                            }\n                        }\n                    }\n                }));\n                this.messageDialogObserver = observer;\n                this.messageDialogObserver.observe(document.body, { childList: true });\n            }\n            if (!this.humanMessageDialogObserver) {\n                const observer = new MutationObserver((mutations) => __awaiter(this, void 0, void 0, function* () {\n                    for (const mutation of mutations) {\n                        if (mutation.type === 'childList') {\n                            observer.disconnect();\n                            yield city.switchAction();\n                        }\n                    }\n                }));\n                this.humanMessageDialogObserver = observer;\n                observer.observe(document.querySelector('#human_message'), { childList: true, subtree: true });\n            }\n            this.messageDialogObserver.observe(document.body, { childList: true });\n        });\n        // Private constructor to prevent direct instantiation\n    }\n    static getInstance() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!FarmManager.instance) {\n                FarmManager.instance = new FarmManager();\n                FarmManager.instance.citySwitch = yield city_switch_manager_1.default.getInstance();\n                FarmManager.instance.config = config_manager_1.default.getInstance().getConfig().farmConfig;\n                FarmManager.instance.lock = ui_lock_1.default.getInstance();\n            }\n            return FarmManager.instance;\n        });\n    }\n    start() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.RUN) {\n                console.log('FarmManager started');\n                this.RUN = true;\n                yield this.initFarmAllVillages();\n            }\n        });\n    }\n    /**\n     * Obecna implementacja. Sprawdzenie pierwszej wioski z brzegu, czy posiada czas oczekiwania.\n     * -jeżeli nie, farmienie wszystkich posiadanych wiosek na wyspie (bez względu na stan)\n     * -jeżeli tak (nawet jeżeli pozostałe nie mają czasu oczekiwania), ma miejsce oczekiwanie\n     *\n     * Sposób działania w przypadku wielu miast gracza:\n     * -Wzięcia locka raz na wszystkie miasta\n     * -iteracja przez wszystkie miasta (switchowanie miast)\n     * -farmienie jednym ciągiem tzn traktowanie, że wszystkie miasta mają zawsze ta samą strategię farmienia wiosek i są na tym samym czasie oczekiwania\n     *\n     * Alternatywne podejście\n     * -na każde miasto gracza jest osobny callback\n     *  :w efekcie każde miasto może farmić swoje wioski z potencjalnie innym odsępem czasowym\n     * -wszystkie wioski przypisane od miasta są traktowane jako jeden byt, czyli losowa wioska określa ten sam czas oczekiwania dla wszystkich innych\n     * -sposób przechodzenia między wioskami ten sam: inicjalna funkcja start, która bierze Locka raz na wszystkie iteracje miast\n     *  a potem farmienie przez callbacki\n     */\n    farmVillages(city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                console.log('farmVillages, wait for lock', city.name);\n                yield this.lock.acquire();\n                console.log('farmVillages, take lock', city.name);\n                yield this.farmVillagesFlow(city);\n            }\n            catch (e) {\n                console.warn('FarmManager.farmVillages().catch', e);\n            }\n            finally {\n                this.disconnectObservers();\n                console.log('farmVillages, release lock', city.name);\n                this.lock.release();\n                this.emit('farmingFinished');\n            }\n        });\n    }\n    /**\n     * Make sure, that if there are 2 or more cities on the same isle not to duplicate farming operation and scheduling.\n     * Although nothing bad or unpredictable will happen, it is a waste of resources.\n     * Solution\n     * :store villages unique selectors, and check if previous ones (on condtition that there is more than 1 village) are not the same.\n     *  -if previous ones are the same, omit\n     *  -else allow normal flow\n     */\n    farmVillagesFlow(city_1) {\n        return __awaiter(this, arguments, void 0, function* (city, forced = false) {\n            var _a, _b, _c;\n            try {\n                console.log('farmVillagesFlow, switch to city', city.name);\n                yield city.switchAction();\n                let timeout = this.config.farmInterval;\n                this.config.humanize ? (0, plain_utility_1.addDelay)((0, plain_utility_1.getRandomMs)(400, 1200)) : (0, plain_utility_1.addDelay)(333);\n                // Selectors mapping and timeout check\n                const villages = yield (0, ui_utility_1.waitForElementsInterval)('a.owned.farm_town[data-same_island=\"true\"]', { timeout: 3000 }).catch(() => null);\n                console.log('\\t-villages to farm:', villages === null || villages === void 0 ? void 0 : villages.length);\n                if (!villages || villages.length === 0)\n                    return;\n                const villageStyleSelectors = Array.from(villages).map(v => {\n                    return `[style=\"${v.getAttribute('style')}\"]`;\n                });\n                const villagesAmount = villageStyleSelectors.length;\n                this.mountMessageDialogsObservers(city);\n                console.log('\\t-start farming villages');\n                for (const [i, villageSelector] of villageStyleSelectors.entries()) {\n                    console.log(`\\t-checking village: ${villageSelector}, from town: ${city.name}`);\n                    let counter = 0;\n                    do {\n                        yield (0, ui_utility_1.performComplexClick)(document.querySelector(villageSelector));\n                        // console.log('\\t-clicked village element on the map (found/not found):', !!document.querySelector<HTMLElement>(villageSelector));\n                        yield (0, plain_utility_1.addDelay)(100);\n                        if (counter === 3)\n                            throw new Error('Farm villages dialog didn\\'t show up');\n                        counter++;\n                    } while (!(yield (0, ui_utility_1.waitForElement)('.farm_towns', 1000).catch(() => false)));\n                    this.config.humanize ? yield (0, plain_utility_1.addDelay)((0, plain_utility_1.getRandomMs)(400, 1200)) : (0, plain_utility_1.addDelay)(100);\n                    const farmOptionIndex = this.getFarmOptionIndex();\n                    counter = 0;\n                    do {\n                        yield (0, ui_utility_1.waitForElements)('.btn_claim_resources.button.button_new', 500)\n                            .then((els) => els[farmOptionIndex].click())\n                            .catch(() => { });\n                        // console.log('\\t-clicked button (found/not found):', !!document.querySelectorAll<HTMLElement>('.btn_claim_resources.button.button_new')[farmOptionIndex]);\n                        if (counter === 3)\n                            throw new Error('Farm button not found');\n                        counter++;\n                        yield (0, plain_utility_1.addDelay)(100);\n                    } while (!(yield (0, ui_utility_1.waitForElement)('.actions_locked_banner.cooldown', 1500).catch(() => false)));\n                    this.config.humanize ? yield (0, plain_utility_1.addDelay)((0, plain_utility_1.getRandomMs)(400, 1200)) : (0, plain_utility_1.addDelay)(100);\n                    if (i === villagesAmount - 1) {\n                        timeout = (_a = yield this.getUnlockTimeOrNull(yield (0, ui_utility_1.waitForElement)('.farm_towns'), 2000)) !== null && _a !== void 0 ? _a : this.config.farmInterval;\n                    }\n                    (_b = document.querySelector('.btn_wnd.close')) === null || _b === void 0 ? void 0 : _b.click();\n                    this.config.humanize ? yield (0, plain_utility_1.addDelay)((0, plain_utility_1.getRandomMs)(400, 1200)) : (0, plain_utility_1.addDelay)(100);\n                }\n                (_c = document.querySelector('.btn_wnd.close')) === null || _c === void 0 ? void 0 : _c.click();\n                this.disconnectObservers();\n                this.scheduleNextFarmingOperationForCity(timeout + 1000, city);\n            }\n            catch (e) {\n                console.warn('FarmManager.farmVillagesFlow().catch', e);\n                yield this.forceRepeatFarming(city);\n            }\n        });\n    }\n    /**\n     * Bierze locka, iteruje przez wszystkie miasta, farmi wszystkie wioski danego miasta, dodaje osobnego callbacka dla każdego miasta.\n     * Po przejściu powraca do pierwszego miasta, zwraca locka, a wioski będą farmione przez osobną metodę: 'farmVillages'.\n     */\n    initFarmAllVillages() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // const cityList = this.citySwitch.getCityList();\n            var _a;\n            // Quickfix, init farming only for one city per island\n            const cityList = this.citySwitch.getCityList().reduce((acc, cityInfo) => {\n                if (!cityInfo.isleId || !acc.some(el => el.isleId === cityInfo.isleId)) {\n                    acc.push(cityInfo);\n                }\n                return acc;\n            }, []);\n            try {\n                console.log('initFarmAllVillages, wait for lock');\n                yield this.lock.acquire();\n                console.log('initFarmAllVillages, take lock');\n                for (const cityInfo of cityList) {\n                    yield this.farmVillagesFlow(cityInfo);\n                }\n                if (cityList.length !== 1)\n                    yield cityList[0].switchAction();\n            }\n            catch (e) {\n                console.warn('FarmManager.initFarmAllVillages().catch', e);\n            }\n            finally {\n                this.lock.release();\n                (_a = this.messageDialogObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\n                this.emit('farmingFinished');\n            }\n        });\n    }\n    forceRepeatFarming(city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield city.switchAction();\n            yield this.farmVillagesFlow(city, true);\n        });\n    }\n    disconnectObservers() {\n        var _a, _b;\n        (_a = this.messageDialogObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\n        (_b = this.humanMessageDialogObserver) === null || _b === void 0 ? void 0 : _b.disconnect();\n    }\n    getUnlockTimeOrNull(window, timeout) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const cooldownBar = yield (0, ui_utility_1.waitForElementFromNode)(window, '.actions_locked_banner.cooldown', timeout !== null && timeout !== void 0 ? timeout : 500).catch(() => null);\n            if (cooldownBar) {\n                const unlcokTimeEl = cooldownBar.querySelector('.pb_bpv_unlock_time');\n                return new Promise((res, rej) => {\n                    let counter = 0;\n                    const getTextInterval = setInterval(() => {\n                        if (unlcokTimeEl === null || unlcokTimeEl === void 0 ? void 0 : unlcokTimeEl.textContent) {\n                            clearInterval(getTextInterval);\n                            console.log('next unlock time:', unlcokTimeEl.textContent);\n                            res((0, plain_utility_1.textToMs)(unlcokTimeEl.textContent));\n                        }\n                        else if (counter === 10) {\n                            clearInterval(getTextInterval);\n                            console.warn('nie znaleziono czasu odblokowania');\n                            res(null);\n                        }\n                        counter++;\n                    }, 100);\n                });\n            }\n            return null;\n        });\n    }\n    /**\n     * Depending on the length of the farm options, it returns the index of the farm option to click.\n     */\n    getFarmOptionIndex() {\n        switch (this.config.farmInterval) {\n            case gps_config_1.FarmTimeInterval.FirstOption:\n                return 0;\n            case gps_config_1.FarmTimeInterval.SecondOption:\n                return 1;\n            case gps_config_1.FarmTimeInterval.ThirdOption:\n                return 2;\n            case gps_config_1.FarmTimeInterval.FourthOption:\n                return 3;\n            default:\n                return 0;\n        }\n    }\n    getFarmOptionTimeRegex() {\n        switch (this.config.farmInterval) {\n            case gps_config_1.FarmTimeInterval.FirstOption:\n                return /(5|10)/;\n            case gps_config_1.FarmTimeInterval.SecondOption:\n                return /^(20|40)/;\n            case gps_config_1.FarmTimeInterval.ThirdOption:\n                return /^(1.*30|3\\D+)/;\n            case gps_config_1.FarmTimeInterval.FourthOption:\n                return /^(4|8)h/;\n            default:\n                return /^(5|10)/;\n        }\n    }\n    getFarmOption() {\n        return Array.from(document.querySelectorAll('.btn_claim_resources.button.button_new'))\n            .find((el) => { var _a; return this.getFarmOptionTimeRegex().test((_a = el.textContent) !== null && _a !== void 0 ? _a : ''); });\n    }\n    stop() {\n        this.RUN = false;\n        console.log('FarmManager stopped');\n        this.schedulerArray.forEach(item => {\n            clearTimeout(item.timeout);\n        });\n        this.schedulerArray = [];\n    }\n    isRunning() {\n        return this.RUN;\n    }\n}\nexports.default = FarmManager;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst gps_config_1 = require(\"../../../gps.config\");\nconst config_popup_1 = __importDefault(require(\"../../ui/config-popup\"));\nconst config_manager_1 = __importDefault(require(\"../../utility/config-manager\"));\nconst plain_utility_1 = require(\"../../utility/plain-utility\");\nconst city_builder_1 = __importDefault(require(\"../city/builder/city-builder\"));\nconst city_switch_manager_1 = __importDefault(require(\"../city/city-switch-manager\"));\nconst farm_manager_1 = __importDefault(require(\"../farm/farm-manager\"));\nconst Scheduler_1 = __importDefault(require(\"../scheduler/Scheduler\"));\nclass MasterManager {\n    constructor() {\n        this.pausedManagersSnapshot = {\n            farmManager: false,\n            switchManager: false,\n            scheduler: false,\n            builder: false,\n        };\n        // Private constructor to prevent direct instantiation\n    }\n    static getInstance() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!MasterManager.instance) {\n                MasterManager.instance = new MasterManager();\n                MasterManager.instance.config = config_manager_1.default.getInstance().getConfig();\n                MasterManager.instance.switchManager = yield city_switch_manager_1.default.getInstance();\n                MasterManager.instance.farmManager = yield farm_manager_1.default.getInstance();\n                MasterManager.instance.scheduler = yield Scheduler_1.default.getInstance();\n                MasterManager.instance.builder = yield city_builder_1.default.getInstance();\n                MasterManager.instance.initCaptchaPrevention();\n                MasterManager.instance.initRefreshUtility();\n                MasterManager.instance.initConfigDialog();\n            }\n            return MasterManager.instance;\n        });\n    }\n    initRefreshUtility(timeout) {\n        setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n            const scheduler = yield Scheduler_1.default.getInstance();\n            const canRefresh = !scheduler.isRunning() || scheduler.canSafelyRefresh();\n            if (canRefresh) {\n                console.log('canRefresh, will refresh', canRefresh);\n                console.log('timeout ?? this.config.general.applicationRefreshInterval', timeout !== null && timeout !== void 0 ? timeout : this.config.general.applicationRefreshInterval);\n                console.log('this.config.general.applicationRefreshInterval', this.config.general.applicationRefreshInterval);\n                this.config.general.forcedRefresh = true;\n                config_manager_1.default.getInstance().persistConfig();\n                yield (0, plain_utility_1.addDelay)(10000);\n                window.location.reload();\n            }\n            else {\n                console.log('canRefresh', canRefresh);\n                this.initRefreshUtility(5 * 1000 * 60);\n            }\n        }), timeout !== null && timeout !== void 0 ? timeout : (this.config.general.applicationRefreshInterval + (Math.floor(Math.random() * 121) - 60)) * 1000);\n    }\n    // id=\"recaptcha_window\"\n    // document.querySelector('[class=\"recaptcha-checkbox-border\"]')\n    // document.querySelector('#recaptcha_window [class=\"caption js-caption\"]').click()\n    initCaptchaPrevention() {\n        new MutationObserver((mutations) => __awaiter(this, void 0, void 0, function* () {\n            for (const mutation of mutations) {\n                if (mutation.type === 'childList') {\n                    const recaptchaWindow = document.querySelector('#recaptcha_window');\n                    const captchaCurtain = document.querySelector('#captcha_curtain');\n                    if (recaptchaWindow) {\n                        const checkbox = recaptchaWindow.querySelector('[class=\"recaptcha-checkbox-border\"]');\n                        if (checkbox) {\n                            yield (0, plain_utility_1.addDelay)(4000);\n                            checkbox.click();\n                            const caption = recaptchaWindow.querySelector('#recaptcha_window [class=\"caption js-caption\"]');\n                            if (caption) {\n                                yield (0, plain_utility_1.addDelay)(4000);\n                                caption.click();\n                            }\n                        }\n                    }\n                    else if (captchaCurtain) {\n                        const checkbox = captchaCurtain.querySelector('[class=\"captcha-checkbox-border\"]');\n                        if (checkbox) {\n                            yield (0, plain_utility_1.addDelay)(2000);\n                            checkbox.click();\n                            const caption = captchaCurtain.querySelector('#captcha_curtain [class=\"caption js-caption\"]');\n                            if (caption) {\n                                yield (0, plain_utility_1.addDelay)(2000);\n                                caption.click();\n                            }\n                        }\n                    }\n                }\n            }\n        })).observe(document.body, { childList: true });\n    }\n    runManagersFromConfig() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.configMenuWindow.isSwitchChecked()) {\n                if (!this.switchManager.isRunning()) {\n                    console.log('switchManager will be started...');\n                    this.switchManager.run();\n                }\n            }\n            else {\n                if (this.switchManager.isRunning()) {\n                    console.log('switchManager will be stopped...');\n                    this.switchManager.stop();\n                }\n            }\n            if (this.configMenuWindow.isBuilderChecked()) {\n                if (!this.builder.isRunning()) {\n                    console.log('Builder will be started...');\n                    this.builder.start();\n                }\n            }\n            else {\n                if (this.builder.isRunning()) {\n                    console.log('Builder will be stopped...');\n                    this.builder.stop();\n                }\n            }\n            if (this.configMenuWindow.isFarmChecked()) {\n                if (!this.farmManager.isRunning()) {\n                    console.log('FarmManager will be started...');\n                    yield this.farmManager.start();\n                }\n            }\n            else {\n                if (this.farmManager.isRunning()) {\n                    console.log('FarmManager will be stopped...');\n                    this.farmManager.stop();\n                }\n            }\n        });\n    }\n    initConfigDialog() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.configMenuWindow = new config_popup_1.default();\n            this.configMenuWindow.addListener('managersChange', () => __awaiter(this, void 0, void 0, function* () {\n                yield this.runManagersFromConfig();\n            }));\n            this.configMenuWindow.render();\n            if (this.config.general.forcedRefresh) {\n                this.config.general.forcedRefresh = false;\n                this.config.farmConfig.farmInterval = gps_config_1.FarmTimeInterval.FirstOption;\n                config_manager_1.default.getInstance().persistConfig();\n                this.configMenuWindow.minimize();\n                yield this.runManagersFromConfig();\n            }\n        });\n    }\n    run() {\n        this.runManagersFromConfig();\n    }\n    pauseRunningManagers(except) {\n        if (!except.includes('farmManager')) {\n            this.farmManager.stop();\n        }\n        if (!except.includes('switchManager')) {\n            this.switchManager.stop();\n        }\n        if (!except.includes('scheduler')) {\n            this.scheduler.stop();\n        }\n        if (!except.includes('builder')) {\n            this.builder.stop();\n        }\n        this.pausedManagersSnapshot = {\n            farmManager: !this.farmManager.isRunning(),\n            switchManager: !this.switchManager.isRunning(),\n            scheduler: !this.scheduler.isRunning(),\n            builder: !this.builder.isRunning(),\n        };\n        console.log('pauseRunningManagers', this.pausedManagersSnapshot);\n    }\n    resumeRunningManagers(except) {\n        Object.entries(this.pausedManagersSnapshot).forEach(([key, isPaused]) => {\n            switch (key) {\n                case 'farmManager':\n                    if (isPaused && !except.includes('farmManager')) {\n                        this.farmManager.start();\n                    }\n                    break;\n                case 'switchManager':\n                    if (isPaused && !except.includes('switchManager')) {\n                        this.switchManager.run();\n                    }\n                    break;\n                case 'scheduler':\n                    if (isPaused && !except.includes('scheduler')) {\n                        this.scheduler.run();\n                    }\n                    break;\n                case 'builder':\n                    if (isPaused && !except.includes('builder')) {\n                        this.builder.start();\n                    }\n                    break;\n            }\n        });\n        Object.keys(this.pausedManagersSnapshot).forEach((key) => {\n            if (except.includes(key)) {\n                this.pausedManagersSnapshot[key] = false;\n            }\n        });\n    }\n    forceRefresh() {\n        this.config.general.forcedRefresh = true;\n        config_manager_1.default.getInstance().persistConfig();\n        window.location.reload();\n    }\n    stopAll() {\n        this.farmManager.stop();\n        this.switchManager.stop();\n        this.scheduler.stop();\n        this.builder.stop();\n    }\n}\nexports.default = MasterManager;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst config_manager_1 = __importDefault(require(\"../../utility/config-manager\"));\nconst plain_utility_1 = require(\"../../utility/plain-utility\");\nconst ui_utility_1 = require(\"../../utility/ui-utility\");\nclass ResourceManager {\n    constructor() {\n        var _a, _b, _c, _d, _e, _f;\n        this.configManager = config_manager_1.default.getInstance();\n        // NOTE: error with fetching this conig data ! probabaly storage sinchronization problem\n        this.minPopulationBuffer = (_c = (_b = (_a = this.configManager.getConfig()) === null || _a === void 0 ? void 0 : _a.resources) === null || _b === void 0 ? void 0 : _b.minPopulationBuffer) !== null && _c !== void 0 ? _c : 100;\n        this.storeAlmostFullPercentage = (_f = (_e = (_d = this.configManager.getConfig()) === null || _d === void 0 ? void 0 : _d.resources) === null || _e === void 0 ? void 0 : _e.storeAlmostFullPercentage) !== null && _f !== void 0 ? _f : 0.9;\n    }\n    static getInstance() {\n        if (!ResourceManager.instance) {\n            ResourceManager.instance = new ResourceManager();\n        }\n        return this.instance;\n    }\n    start() {\n        return __awaiter(this, void 0, void 0, function* () {\n        });\n    }\n    stop() {\n    }\n    getStoreCapacity() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // let maxSizeElement: HTMLDivElement | null = null;\n            // do {\n            //   triggerHover(document.querySelector<HTMLDivElement>('[data-type=\"wood\"] .amount.ui-game-selectable')!);\n            //   await addDelay(100);\n            // } while (!(maxSizeElement = document.querySelector<HTMLDivElement>('.island_resource_info span:nth-of-type(2)')))\n            var _a, _b;\n            (0, ui_utility_1.triggerHover)(document.querySelector('[data-type=\"wood\"] .amount.ui-game-selectable'));\n            const maxSizeText = yield (0, ui_utility_1.waitForElement)('.island_resource_info span:nth-of-type(2)');\n            const storeMaxSize = parseInt(((_b = (_a = maxSizeText === null || maxSizeText === void 0 ? void 0 : maxSizeText.textContent) === null || _a === void 0 ? void 0 : _a.match(/\\d+/)) === null || _b === void 0 ? void 0 : _b[0]) || '0');\n            (0, ui_utility_1.cancelHover)(document.querySelector('[data-type=\"wood\"] .amount.ui-game-selectable'));\n            return storeMaxSize;\n        });\n    }\n    getPopulation() {\n        const population = Number(document.querySelector('[data-type=\"population\"] .amount.ui-game-selectable').textContent);\n        return population;\n    }\n    getResourcesInfo() {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const wood = Number((yield (0, ui_utility_1.waitForElement)('[data-type=\"wood\"] .amount.ui-game-selectable')).textContent);\n            const stone = Number((yield (0, ui_utility_1.waitForElement)('[data-type=\"stone\"] .amount.ui-game-selectable')).textContent);\n            const iron = Number((yield (0, ui_utility_1.waitForElement)('[data-type=\"iron\"] .amount.ui-game-selectable')).textContent);\n            const population = Number((yield (0, ui_utility_1.waitForElement)('[data-type=\"population\"] .amount.ui-game-selectable')).textContent);\n            const resourceItem = yield (0, ui_utility_1.waitForElement)('[data-type=\"wood\"] .amount.ui-game-selectable');\n            let maxSizeElement = null;\n            do {\n                (0, ui_utility_1.triggerHover)(resourceItem);\n                yield (0, plain_utility_1.addDelay)(333);\n            } while (!(maxSizeElement = document.querySelector('.island_resource_info span:nth-of-type(2)')));\n            const maxSizeText = maxSizeElement.textContent;\n            const storeMaxSize = parseInt(((_a = maxSizeText === null || maxSizeText === void 0 ? void 0 : maxSizeText.match(/\\d+/)) === null || _a === void 0 ? void 0 : _a[0]) || '0');\n            (0, ui_utility_1.cancelHover)(resourceItem);\n            const resourcesInfo = {\n                wood: {\n                    amount: wood,\n                    isAlmostFull: wood > this.storeAlmostFullPercentage * storeMaxSize,\n                    isFull: wood === storeMaxSize,\n                },\n                stone: {\n                    amount: stone,\n                    isAlmostFull: stone > this.storeAlmostFullPercentage * storeMaxSize,\n                    isFull: stone === storeMaxSize,\n                },\n                iron: {\n                    amount: iron,\n                    isAlmostFull: iron > this.storeAlmostFullPercentage * storeMaxSize,\n                    isFull: iron === storeMaxSize,\n                },\n                population: {\n                    amount: population,\n                    isLow: population < this.minPopulationBuffer,\n                },\n                storeMaxSize\n            };\n            return resourcesInfo;\n        });\n    }\n    hasEnoughResources(requiredResources, city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield city.switchAction();\n            const wood = Number(document.querySelector('[data-type=\"wood\"] .amount.ui-game-selectable').textContent);\n            const stone = Number(document.querySelector('[data-type=\"stone\"] .amount.ui-game-selectable').textContent);\n            const iron = Number(document.querySelector('[data-type=\"iron\"] .amount.ui-game-selectable').textContent);\n            return wood >= requiredResources.wood && stone >= requiredResources.stone && iron >= requiredResources.iron;\n        });\n    }\n}\nexports.default = ResourceManager;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst config_manager_1 = __importDefault(require(\"../../utility/config-manager\"));\nconst plain_utility_1 = require(\"../../utility/plain-utility\");\nconst ui_lock_1 = __importDefault(require(\"../../utility/ui-lock\"));\nconst ui_utility_1 = require(\"../../utility/ui-utility\");\nconst army_movement_1 = __importDefault(require(\"../army/army-movement\"));\nconst city_switch_manager_1 = __importDefault(require(\"../city/city-switch-manager\"));\nconst master_manager_1 = __importDefault(require(\"../master/master-manager\"));\nconst button_panel_extension_html_1 = __importDefault(require(\"./button-panel-extension.html\"));\nconst scheduler_list_prod_html_1 = __importDefault(require(\"./scheduler-list-prod.html\"));\nconst scheduler_list_css_1 = __importDefault(require(\"./scheduler-list.css\"));\nvar OperationType;\n(function (OperationType) {\n    OperationType[OperationType[\"ARMY_ATTACK\"] = 0] = \"ARMY_ATTACK\";\n    OperationType[OperationType[\"ARMY_SUPPORT\"] = 1] = \"ARMY_SUPPORT\";\n    OperationType[OperationType[\"ARMY_WITHDRAW\"] = 2] = \"ARMY_WITHDRAW\";\n    OperationType[OperationType[\"RESOURCE_SHIPMENT\"] = 3] = \"RESOURCE_SHIPMENT\";\n})(OperationType || (OperationType = {}));\nclass Scheduler {\n    constructor() {\n        this.isLockTakenByScheduler = false;\n        this.scheduler = [];\n        this._error = null;\n        this._hydrationError = null;\n        this._info = null;\n        this.RUN = true;\n    }\n    privateconstructor() { }\n    static getInstance() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!Scheduler.instance) {\n                Scheduler.instance = new Scheduler();\n                Scheduler.instance.lock = ui_lock_1.default.getInstance();\n                Scheduler.instance.armyMovement = army_movement_1.default.getInstance();\n                Scheduler.instance.masterManager = yield master_manager_1.default.getInstance();\n                Scheduler.instance.citySwitchManager = yield city_switch_manager_1.default.getInstance();\n                Scheduler.instance.config = config_manager_1.default.getInstance().getConfig();\n                Scheduler.instance.addUIExtenstion();\n                Scheduler.instance.addSchedulerListConfigWindow();\n                Scheduler.instance.synchronizeSchedulerWithStorage();\n            }\n            return Scheduler.instance;\n        });\n    }\n    addUIExtenstion() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.mountCityDialogObserver();\n        });\n    }\n    run() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.RUN = true;\n        });\n    }\n    stop() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.RUN = false;\n        });\n    }\n    isRunning() {\n        return this.RUN;\n    }\n    /**\n     * Potrzebny będzie dodatkowy identyfikator ruchu, ponieważ z danego miasta, do danego miasta może miec miejsce wiele ruchów\n     * i wówczas może zostać anulowany zły ruch. Nie jest to zatem bezpieczna metoda na tą chilę.\n     * Możliwe rozwiązania:\n     * -Mozna zamontować obserwera ruchów wojsk, przekażać mu samo usuwającego się callbacka, któyry otrzyma informację o najnowszym ruchu\n     *  np. unikalne [id=\"movement_1820489002\"], które zostanie przypisane do danego obiektu ruchu. Wówczas cancelowanie ruchów, będzie odbywało się\n     *  po tym id. Przed przypisaniem 'movementId' do obiektu schedulera, będzie miało miejsce sprawdzenie czy parametry ataku się zgadzają, na wypadek, gdyby\n     *  najbliższym ruchem się okazała napaść na wioskę (której nie da się anulować bo nie należy do właściciela)\n     */\n    undoArmyMovement(fromTown, id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            yield fromTown.switchAction();\n            yield (0, plain_utility_1.addDelay)(100);\n            const hoverElement = document.querySelector('#toolbar_activity_commands');\n            (0, ui_utility_1.triggerHover)(hoverElement);\n            (_a = document.querySelector(`#${id}`)) === null || _a === void 0 ? void 0 : _a.click();\n        });\n    }\n    /**\n     * Ma rozpoznawać, czy znajduje się na karcie ATAK/OBRONA\n     * Ma dodać schdule button i inputy do podania czasu wykonania operacji.\n     * Na schedule click:\n     * -zczytać i zapamiętać wartości imputów\n     * -zczytać czas podróży jednostek i obliczyć na podstawie tych danych timeout\n     * -zczytać wioskę źródłową oraz gridy wioski na której operacja ma być wykonana\n     * -dodać obiekt ScheduleItem do listy oraz do LocaleStorage oraz ustawic timeout\n     * -timeout powinien usunąć wszstko co z nim związane powykonaniu operacji\n     */\n    extendAttackSupportUI(node) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // observer mounted, argument is the grand parent of the button panel\n            const buttonWrapper = node.querySelector('.button_wrapper');\n            const div = document.createElement('div');\n            div.innerHTML = button_panel_extension_html_1.default;\n            buttonWrapper.appendChild(div);\n            // Element ready, logic below:\n            const inputDateElement = document.querySelector('#schedule-date');\n            // prefill date input with current date\n            inputDateElement.value = this.getFormattedInputValueFromDate(new Date());\n            const scheduleButton = div.querySelector('#schedule-button');\n            scheduleButton.addEventListener('click', () => __awaiter(this, void 0, void 0, function* () {\n                this.error = null;\n                // get way duration time\n                const wayDurationText = node.querySelector('.way_duration').textContent.slice(1);\n                const wayDurationMs = (0, plain_utility_1.textToMs)(wayDurationText);\n                // get input data (all unit inputs)\n                const inputData = Array.from(node.querySelectorAll('.unit_input')).map(inputEl => {\n                    return {\n                        name: inputEl.getAttribute('name'),\n                        value: inputEl.value\n                    };\n                });\n                const operationType = node.firstElementChild.getAttribute('data-type') === 'attack' ? OperationType.ARMY_ATTACK : OperationType.ARMY_SUPPORT;\n                const inputDateValue = inputDateElement.value;\n                // Wartość z inputu type=\"date\" będzie w formacie \"YYYY-MM-DD\"\n                // Na przykład: \"2023-05-25\" dla 25 maja 2023\n                // #schedule-time      \n                const inputTimeValue = document.querySelector('#schedule-time').value;\n                const targetDate = this.getDateFromDateTimeInputValues(inputDateValue, inputTimeValue);\n                const actionDate = new Date(targetDate.getTime() - wayDurationMs);\n                const sourceCity = this.citySwitchManager.getCurrentCity();\n                // attack_support_tab_target_9542\n                const targetCitySelector = '#town_' + Array.from(node.classList).find(cls => cls.match(/attack_support_tab_target_\\d+/)).match(/\\d+/)[0];\n                // console.log('parsed info:')\n                // console.log('inputData:', inputData)\n                // console.log('operationType', operationType === OperationType.ARMY_ATTACK ? 'attack' : 'support')\n                // console.log('targetCitySelector', targetCitySelector);\n                // console.log('sourceCity', sourceCity);\n                // console.log('wayDuration ms/timeString:', wayDurationMs, msToTimeString(wayDurationMs))\n                // console.log('targetDate', formatDateToSimpleString(targetDate));\n                // console.log('actionDate (targetDate - wayDuration)', formatDateToSimpleString(actionDate));\n                if (!this.canAddSchedulerItem(actionDate)) {\n                    console.warn('unsafe operation, failed to be scheudled');\n                    this.error = 'Schedule failed. Cannot safely schedule operation.';\n                    return;\n                }\n                // jezeli inputy nie są wypełnione, nie dodawaj do schedulera\n                if (!inputData.some(data => data.value)) {\n                    this.error = 'Schedule failed. All units are empty.';\n                    return;\n                }\n                const scheduleTimeout = {\n                    timeout30s: null,\n                    timeout10s: null,\n                    timeoutAction: null,\n                };\n                const schedulerItem = {\n                    operationType: operationType,\n                    targetDate: targetDate,\n                    actionDate: actionDate,\n                    sourceCity: sourceCity,\n                    targetCityIdSelector: targetCitySelector,\n                    data: inputData,\n                    timeoutStructure: scheduleTimeout,\n                    movementId: null,\n                    undoMovementAction: null,\n                    cancelSchedule: () => {\n                        if (scheduleTimeout.timeout30s)\n                            clearTimeout(scheduleTimeout.timeout30s);\n                        if (scheduleTimeout.timeout10s)\n                            clearTimeout(scheduleTimeout.timeout10s);\n                        if (scheduleTimeout.timeoutAction)\n                            clearTimeout(scheduleTimeout.timeoutAction);\n                        if (this.isLockTakenByScheduler) {\n                            this.lock.release();\n                            this.isLockTakenByScheduler = false;\n                        }\n                        this.scheduler = this.scheduler.filter(item => item !== schedulerItem);\n                        localStorage.setItem('scheduler', JSON.stringify(this.scheduler));\n                        this.tryRestoreManagers();\n                    },\n                    postActionCleanup: () => {\n                        setTimeout(() => {\n                            this.scheduler = this.scheduler.filter((item) => item !== schedulerItem);\n                            localStorage.setItem('scheduler', JSON.stringify(this.scheduler));\n                        }, 0);\n                        if (this.isLockTakenByScheduler)\n                            this.lock.release();\n                        this.isLockTakenByScheduler = false;\n                        this.tryRestoreManagers();\n                    }\n                };\n                const halfMinuteBeforeAction = actionDate.getTime() - new Date().getTime() - Scheduler.TURN_OFF_MANAGERS_TIME_MS;\n                scheduleTimeout.timeout30s = setTimeout(() => {\n                    // console.log('NOW half minute before action, time is:', formatDateToSimpleString(new Date()))\n                    this.masterManager.pauseRunningManagers(['scheduler']);\n                    const tenSecondsBeforeAction = actionDate.getTime() - new Date().getTime() - 10 * 1000;\n                    scheduleTimeout.timeout10s = setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n                        var _a;\n                        try {\n                            // console.log('NOW ten seconds before action, time is:', formatDateToSimpleString(new Date()))\n                            yield this.lock.acquire();\n                            this.isLockTakenByScheduler = true;\n                            // znajdź wioskę i kliknij odpowiednią operację\n                            (_a = document.querySelector('.ui-dialog-titlebar-close')) === null || _a === void 0 ? void 0 : _a.click();\n                            (0, ui_utility_1.performComplexClick)((yield (0, ui_utility_1.waitForElement)(targetCitySelector)));\n                            if (operationType === OperationType.ARMY_ATTACK) {\n                                (yield (0, ui_utility_1.waitForElement)('#attack')).click();\n                            }\n                            else {\n                                (yield (0, ui_utility_1.waitForElement)('#support')).click();\n                            }\n                            // wypełnij inputy\n                            for (const data of inputData) {\n                                const input = yield (0, ui_utility_1.waitForElement)(`input[name=\"${data.name}\"]`);\n                                (0, ui_utility_1.setInputValue)(input, data.value);\n                            }\n                            ;\n                        }\n                        catch (error) {\n                            console.error('Error during 10 seconds before action:', error);\n                            this.error = 'Schedule failed. Check console for more details.';\n                            schedulerItem.cancelSchedule();\n                            return;\n                        }\n                        scheduleTimeout.timeoutAction = setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n                            var _a;\n                            try {\n                                // console.log('NOW ACTION, time is:', formatDateToSimpleString(new Date()))\n                                // console.log('now time + way duration:', formatDateToSimpleString(new Date(new Date().getTime() + wayDurationMs)))\n                                if (operationType === OperationType.ARMY_ATTACK) {\n                                    (yield (0, ui_utility_1.waitForElement)('#btn_attack_town')).click();\n                                }\n                                else {\n                                    (yield (0, ui_utility_1.waitForElement)('.attack_support_window a .middle')).click();\n                                }\n                                this.armyMovement.setCallback((id) => {\n                                    schedulerItem.movementId = id;\n                                    schedulerItem.undoMovementAction = () => this.undoArmyMovement(schedulerItem.sourceCity, id);\n                                });\n                                (_a = document.querySelector('.ui-dialog-titlebar-close')) === null || _a === void 0 ? void 0 : _a.click();\n                                this.error = null;\n                            }\n                            catch (error) {\n                                console.error('Error during action:', error);\n                                this.error = 'Schedule failed. Check console for more details.';\n                            }\n                            finally {\n                                schedulerItem.postActionCleanup();\n                            }\n                        }), actionDate.getTime() - new Date().getTime());\n                    }), tenSecondsBeforeAction);\n                }, halfMinuteBeforeAction);\n                this.scheduler.push(schedulerItem);\n                this.addSchedulerItemToUI(schedulerItem);\n                localStorage.setItem('scheduler', JSON.stringify(this.scheduler));\n                this.info = 'Operation scheduled';\n                console.log('Scheduler.extendAttackSupportUI.schedulerItem', schedulerItem);\n            }));\n        });\n    }\n    /*\n    Wczytuje storage, w którym znajduje się niebędne info do wykonania timeoutów z planem operacji.\n    Iteruje po każdym itemie i uzupełnia jego objekt o id timeoutów, oraz funkcję do anulowania operacji.\n    */\n    synchronizeSchedulerWithStorage() {\n        const storageScheduler = JSON.parse(localStorage.getItem('scheduler') || '[]');\n        storageScheduler.forEach(schedulerItem => this.hydrateSchedulerItem(schedulerItem));\n        this.handleIfSchedulerListIsEmpty();\n    }\n    hydrateSchedulerItem(schedulerItem) {\n        if (schedulerItem.operationType === OperationType.ARMY_ATTACK || schedulerItem.operationType === OperationType.ARMY_SUPPORT) {\n            schedulerItem.actionDate = new Date(schedulerItem.actionDate);\n            schedulerItem.targetDate = new Date(schedulerItem.targetDate);\n            schedulerItem.sourceCity = this.citySwitchManager.getCityByName(schedulerItem.sourceCity.name); //TODO: possible erorr\n            if (!this.canAddSchedulerItem(schedulerItem.actionDate)) {\n                console.warn('unsafe operation, failed to be scheudled during hydration');\n                this.hydrationError = `${schedulerItem.sourceCity.name} ${schedulerItem.operationType === OperationType.ARMY_ATTACK ? 'attack' : 'support'} operation  at '${schedulerItem.targetDate}' on city \"${schedulerItem.targetCityIdSelector}\" failed to be scheduled during hydration.`;\n                return;\n            }\n            schedulerItem.cancelSchedule = () => {\n                if (schedulerItem.timeoutStructure.timeout30s)\n                    clearTimeout(schedulerItem.timeoutStructure.timeout30s);\n                if (schedulerItem.timeoutStructure.timeout10s)\n                    clearTimeout(schedulerItem.timeoutStructure.timeout10s);\n                if (schedulerItem.timeoutStructure.timeoutAction)\n                    clearTimeout(schedulerItem.timeoutStructure.timeoutAction);\n                if (this.isLockTakenByScheduler)\n                    this.lock.release();\n                this.isLockTakenByScheduler = false;\n                this.scheduler = this.scheduler.filter((item) => item !== schedulerItem);\n                localStorage.setItem('scheduler', JSON.stringify(this.scheduler));\n                this.tryRestoreManagers();\n            };\n            schedulerItem.postActionCleanup = () => {\n                // TODO: w pzyszłości item powinien byc usuwany 10 minut później, bo będzie można zaplanować jego odwołanie zawczasu\n                setTimeout(() => {\n                    this.scheduler = this.scheduler.filter((item) => item !== schedulerItem);\n                    localStorage.setItem('scheduler', JSON.stringify(this.scheduler));\n                    this.removeSchedulerItemFromUI(schedulerItem);\n                    this.handleIfSchedulerListIsEmpty();\n                }, 0);\n                if (this.isLockTakenByScheduler)\n                    this.lock.release();\n                this.isLockTakenByScheduler = false;\n                this.tryRestoreManagers();\n            };\n            const halfMinuteBeforeAction = schedulerItem.actionDate.getTime() - new Date().getTime() - Scheduler.TURN_OFF_MANAGERS_TIME_MS;\n            schedulerItem.timeoutStructure.timeout30s = setTimeout(() => {\n                // console.log('NOW half minute before action, time is:', formatDateToSimpleString(new Date()))\n                this.masterManager.pauseRunningManagers(['scheduler']);\n                const tenSecondsBeforeAction = schedulerItem.actionDate.getTime() - new Date().getTime() - 10 * 1000;\n                schedulerItem.timeoutStructure.timeout10s = setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n                    var _a;\n                    try {\n                        // console.log('NOW ten seconds before action, time is:', formatDateToSimpleString(new Date()))\n                        yield this.lock.acquire();\n                        this.isLockTakenByScheduler = true;\n                        // znajdź wioskę i kliknij odpowiednią operację\n                        (_a = document.querySelector('.ui-dialog-titlebar-close')) === null || _a === void 0 ? void 0 : _a.click();\n                        (0, ui_utility_1.performComplexClick)((yield (0, ui_utility_1.waitForElement)(schedulerItem.targetCityIdSelector)));\n                        if (schedulerItem.operationType === OperationType.ARMY_ATTACK) {\n                            (yield (0, ui_utility_1.waitForElement)('#attack')).click();\n                        }\n                        else {\n                            (yield (0, ui_utility_1.waitForElement)('#support')).click();\n                        }\n                        // wypełnij inputy\n                        for (const data of schedulerItem.data) {\n                            const input = yield (0, ui_utility_1.waitForElement)(`input[name=\"${data.name}\"]`);\n                            (0, ui_utility_1.setInputValue)(input, data.value);\n                        }\n                        ;\n                    }\n                    catch (error) {\n                        console.error('Error during 10 seconds before action:', error);\n                        this.error = 'Schedule failed. Check console for more details.';\n                        schedulerItem.cancelSchedule();\n                        return;\n                    }\n                    schedulerItem.timeoutStructure.timeoutAction = setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n                        var _a;\n                        try {\n                            // console.log('NOW ACTION, time is:', formatDateToSimpleString(new Date()))\n                            // console.log('now time + way duration:', formatDateToSimpleString(new Date(new Date().getTime() + wayDurationMs)))\n                            if (schedulerItem.operationType === OperationType.ARMY_ATTACK) {\n                                (yield (0, ui_utility_1.waitForElement)('#btn_attack_town')).click();\n                            }\n                            else {\n                                (yield (0, ui_utility_1.waitForElement)('.attack_support_window a .middle')).click();\n                            }\n                            this.armyMovement.setCallback((id) => {\n                                schedulerItem.movementId = id;\n                                schedulerItem.undoMovementAction = () => this.undoArmyMovement(schedulerItem.sourceCity, id);\n                            });\n                            (_a = document.querySelector('.ui-dialog-titlebar-close')) === null || _a === void 0 ? void 0 : _a.click();\n                            this.error = null;\n                        }\n                        catch (error) {\n                            console.error('Error during action:', error);\n                            this.error = 'Schedule failed. Check console for more details.';\n                        }\n                        finally {\n                            schedulerItem.postActionCleanup();\n                        }\n                    }), schedulerItem.actionDate.getTime() - new Date().getTime());\n                }), tenSecondsBeforeAction);\n            }, halfMinuteBeforeAction);\n            this.scheduler.push(schedulerItem);\n            this.addSchedulerItemToUI(schedulerItem);\n            console.log('Scheduler.hydrateSchedulerItem.item', schedulerItem);\n        }\n    }\n    set error(error) {\n        const errorElement = document.querySelector('#schedule-error');\n        if (error) {\n            if (errorElement) {\n                errorElement.textContent = error;\n            }\n        }\n        else {\n            if (errorElement) {\n                errorElement.textContent = '';\n            }\n        }\n        this._error = error;\n    }\n    set hydrationError(error) {\n        // TODO: add error display container\n        this._hydrationError = error;\n    }\n    set info(info) {\n        const infoElement = document.querySelector('#schedule-info');\n        if (info) {\n            if (infoElement) {\n                infoElement.textContent = info;\n                setTimeout(() => {\n                    infoElement.textContent = '';\n                }, 4000);\n            }\n        }\n        else {\n            if (infoElement) {\n                infoElement.textContent = '';\n            }\n        }\n        this._info = info;\n    }\n    /**\n     * Sprawdza czy można dodać operację do schedulera ze względu na czas do wykonania operacji oraz czas do najbliższej akcji w schedulerze.\n     * Jezeli odstęp czasowy pomiędzy tą operacją a teraz lub najbliższą zaplanowaną operacją jest mniejszy niż 10s zwraca fałsz.\n     */\n    canAddSchedulerItem(actionDate) {\n        // jeżeli czas do wykonbania operacji jest większy niż 10s, sprawdź czy czas do najbliższej akcji jest większy niż 10s\n        if (actionDate.getTime() - new Date().getTime() > 10 * 1000) {\n            // jeżeli scheduler jest pusty, można dodać operację\n            if (this.scheduler.length === 0) {\n                return true;\n            }\n            const hasNoInterlacingTimes = !this.scheduler.some((item) => {\n                if (Math.abs(item.actionDate.getTime() - actionDate.getTime()) < 10 * 1000) {\n                    console.log('Interlacing times:', item.actionDate, actionDate);\n                    console.log('\\t:', item.actionDate.getTime() - actionDate.getTime(), (item.actionDate.getTime() - actionDate.getTime()) / 1000);\n                    return true;\n                }\n                console.log('Not interlacing times:', item.actionDate, actionDate);\n                return false;\n            });\n            return hasNoInterlacingTimes;\n        }\n        // jeżeli czas do wykonbania operacji jest mniejszy niż 10s, nie podejmuj się operacji\n        else {\n            return false;\n        }\n    }\n    /**\n     * Sprawdza czy przywrócenie działania managerów nie koliduje z obecną kolejką schedulera, (minumum 60s do najbliższej akcji)\n     * jeżeli nie koliduje to przywraca działanie managerów.\n     */\n    tryRestoreManagers() {\n        if (this.scheduler.length === 0) {\n            console.log('RESTORE MANAGERS');\n            this.masterManager.resumeRunningManagers(['scheduler']);\n        }\n        else {\n            // znajdź najbliższą akcję w schedulerze\n            const now = new Date();\n            const nextClosestActionTime = this.scheduler.reduce((acc, item) => {\n                if (item.actionDate < now) {\n                    return acc;\n                }\n                if (acc && acc < item.actionDate) {\n                    return acc;\n                }\n                return item.actionDate;\n            }, null);\n            if (nextClosestActionTime) {\n                const timeDiff = nextClosestActionTime.getTime() - new Date().getTime();\n                // jeżeli czas do najbliższej akcji jest większy niż 60s to przywróć działanie managerów\n                if (timeDiff > 60 * 1000) {\n                    console.log('RESTORE MANAGERS');\n                    this.masterManager.resumeRunningManagers(['scheduler']);\n                }\n                else {\n                    console.log('DO NOT RESTORE MANAGERS');\n                }\n                return;\n            }\n            // jeżeli czas Data jest zaprzeszła, przywróć działanie managerów\n            this.masterManager.resumeRunningManagers(['scheduler']);\n        }\n    }\n    getDateFromDateTimeInputValues(inputDateValue, inputTimeValue) {\n        const timeRegex = /(\\d{2})\\D*(\\d{2})\\D*(\\d{2})/;\n        const match = inputTimeValue.match(timeRegex);\n        if (!match || !inputDateValue.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n            throw new Error('Invalid time format');\n        }\n        const [, hours, minutes, seconds] = match;\n        const parsedTime = `${hours}:${minutes}:${seconds}`;\n        return new Date(`${inputDateValue}T${parsedTime}`);\n    }\n    getFormattedInputValueFromDate(date) {\n        const year = date.getFullYear();\n        const month = String(date.getMonth() + 1).padStart(2, '0'); // Miesiące są indeksowane od 0\n        const day = String(date.getDate()).padStart(2, '0');\n        return `${year}-${month}-${day}`;\n    }\n    mountAttackSupportSubpageObserver(parentNode) {\n        const observer = new MutationObserver((mutations) => {\n            for (const mutation of mutations) {\n                if (mutation.type === 'childList') {\n                    for (const node of mutation.addedNodes) {\n                        if (node.nodeType === Node.ELEMENT_NODE && node.classList.contains('attack_support_window')) {\n                            this.extendAttackSupportUI(node);\n                            return;\n                        }\n                    }\n                }\n            }\n        });\n        observer.observe(parentNode, { childList: true, subtree: true });\n        return () => observer.disconnect();\n    }\n    mountCityDialogObserver() {\n        return __awaiter(this, void 0, void 0, function* () {\n            let unobserveAttackSupportSubpages = null;\n            const observer = new MutationObserver((mutations) => {\n                for (const mutation of mutations) {\n                    if (mutation.type === 'childList') {\n                        for (const node of mutation.addedNodes) {\n                            if (node.nodeType === Node.ELEMENT_NODE &&\n                                node.getAttribute('class') === 'ui-dialog ui-corner-all ui-widget ui-widget-content ui-front ui-draggable ui-resizable js-window-main-container') {\n                                unobserveAttackSupportSubpages = this.mountAttackSupportSubpageObserver(node);\n                                return;\n                            }\n                        }\n                        for (const node of mutation.removedNodes) {\n                            if (node.nodeType === Node.ELEMENT_NODE &&\n                                node.getAttribute('role') === 'dialog' &&\n                                node.classList.contains('ui-dialog') &&\n                                node.classList.contains('js-window-main-container')) {\n                                if (unobserveAttackSupportSubpages) {\n                                    unobserveAttackSupportSubpages();\n                                    unobserveAttackSupportSubpages = null;\n                                    return;\n                                }\n                            }\n                        }\n                    }\n                }\n            });\n            observer.observe(document.body, {\n                childList: true,\n            });\n        });\n    }\n    addSchedulerListConfigWindow() {\n        const style = document.createElement('style');\n        style.textContent = scheduler_list_css_1.default;\n        document.head.appendChild(style);\n        const schedulerListConfigWindow = document.createElement('div');\n        schedulerListConfigWindow.innerHTML = scheduler_list_prod_html_1.default;\n        document.body.appendChild(schedulerListConfigWindow);\n        this.addSchedulerListConfigListeners();\n    }\n    addSchedulerListConfigListeners() {\n        const toggleButton = document.querySelector('#scheduler-toggle-button');\n        toggleButton === null || toggleButton === void 0 ? void 0 : toggleButton.addEventListener('click', () => {\n            const tableContainer = document.querySelector('#table-container');\n            tableContainer === null || tableContainer === void 0 ? void 0 : tableContainer.classList.toggle('hidden');\n        });\n    }\n    addSchedulerItemToUI(schedulerItem) {\n        const table = document.querySelector('#scheduler-lookup-table tbody');\n        const row = table.insertRow();\n        const id = this.getSchedulerItemId(schedulerItem);\n        row.setAttribute('data-scheduler-item-id', id);\n        const operaitonTypeCell = row.insertCell();\n        operaitonTypeCell.textContent = schedulerItem.operationType === OperationType.ARMY_ATTACK ? 'Attack' : 'Support';\n        operaitonTypeCell.classList.add(schedulerItem.operationType === OperationType.ARMY_ATTACK ? 'attack' : 'support');\n        row.insertCell().textContent = schedulerItem.sourceCity.name;\n        row.insertCell().textContent = schedulerItem.targetCityIdSelector;\n        row.insertCell().textContent = schedulerItem.actionDate.toLocaleTimeString();\n        row.insertCell().textContent = schedulerItem.targetDate.toLocaleTimeString();\n        const cancelButtonCell = row.insertCell();\n        const cancelButton = document.createElement('button');\n        cancelButton.classList.add('cancel-button');\n        cancelButton.textContent = 'Cancel';\n        cancelButton.addEventListener('click', () => {\n            schedulerItem.cancelSchedule();\n            this.removeSchedulerItemFromUI(schedulerItem);\n        });\n        cancelButtonCell.appendChild(cancelButton);\n        this.handleIfSchedulerListIsEmpty();\n    }\n    removeSchedulerItemFromUI(schedulerItem) {\n        const table = document.querySelector('#scheduler-lookup-table tbody');\n        const row = table.querySelector(`[data-scheduler-item-id=\"${this.getSchedulerItemId(schedulerItem)}\"]`);\n        row.remove();\n        this.handleIfSchedulerListIsEmpty();\n    }\n    getSchedulerItemId(schedulerItem) {\n        return schedulerItem.operationType + schedulerItem.sourceCity.name + schedulerItem.targetCityIdSelector + schedulerItem.targetDate.getTime() + schedulerItem.actionDate.getTime();\n    }\n    handleIfSchedulerListIsEmpty() {\n        const noSchedules = document.querySelector('#no-schedules');\n        if (this.scheduler.length === 0) {\n            noSchedules.classList.remove('hidden');\n        }\n        else {\n            noSchedules.classList.add('hidden');\n        }\n    }\n    canSafelyRefresh() {\n        return this.scheduler.length === 0 || this.scheduler.every((item) => item.actionDate > new Date(new Date().getTime() + 120 * 1000));\n    }\n}\nScheduler.MIN_PRECEDENCE_TIME_MS = 10 * 1000;\nScheduler.TURN_OFF_MANAGERS_TIME_MS = 30 * 1000;\nScheduler.PREPARATION_TIME_MS = 10 * 1000;\nexports.default = Scheduler;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst config_popup_css_1 = __importDefault(require(\"./config-popup.css\"));\nconst config_popup_html_1 = __importDefault(require(\"./config-popup.html\"));\nconst events_1 = __importDefault(require(\"events\"));\nconst config_manager_1 = __importDefault(require(\"../utility/config-manager\"));\nconst gps_config_1 = require(\"../../gps.config\");\nclass ConfigPopup extends events_1.default {\n    constructor() {\n        super();\n        this.isSwitchChecked = () => {\n            return this.switch;\n        };\n        this.isFarmChecked = () => {\n            return this.farm;\n        };\n        this.isBuilderChecked = () => {\n            return this.builder;\n        };\n        this.isGuardChecked = () => {\n            return this.guard;\n        };\n        this.getPlunderConfig = () => {\n        };\n        this.getManagersFlags = () => {\n            return {\n                farm: this.farm,\n                builder: this.builder,\n                guard: this.guard,\n            };\n        };\n        this.configManager = config_manager_1.default.getInstance();\n        this.config = this.configManager.getConfig();\n        this.switch = this.config.general.switch;\n        this.farm = this.config.general.farm;\n        this.builder = this.config.general.builder;\n        this.guard = this.config.general.guard;\n        this.farmInterval = this.config.farmConfig.farmInterval;\n        this.humanize = this.config.farmConfig.humanize;\n    }\n    initEventListeners() {\n        var _a;\n        const container = document.querySelector('#config-popup-container');\n        const switchCheckbox = container.querySelector('#city-switch');\n        const plunderCheckbox = container.querySelector('#farm');\n        const builderCheckbox = container.querySelector('#builder');\n        const guardCheckbox = container.querySelector('#guard');\n        const timeIntervalSelect = container.querySelector('#time-interval-select');\n        const showTrigger = container.querySelector('.show-trigger');\n        const closeTrigger = container.querySelector('#close-popup');\n        const humanizeCheckbox = container.querySelector('#humanize-checkbox');\n        if (!container)\n            throw new Error('\"#config-popup-container\" couldn\\'t be found.');\n        closeTrigger.addEventListener('click', () => {\n            if (!container.classList.contains('minimized'))\n                container.classList.add('minimized');\n        });\n        container.querySelectorAll('#button-panel button').forEach((btn) => btn.addEventListener('click', () => {\n            if (btn.type === 'reset') {\n                switchCheckbox.checked = false;\n                this.switch = false;\n                plunderCheckbox.checked = false;\n                this.farm = false;\n                builderCheckbox.checked = false;\n                this.builder = false;\n                guardCheckbox.checked = false;\n                this.guard = false;\n            }\n            // update config related fields and persist them to local storage if changed\n            if (this.config.farmConfig.farmInterval !== this.farmInterval ||\n                this.config.farmConfig.humanize !== this.humanize ||\n                this.config.general.switch !== this.switch ||\n                this.config.general.farm !== this.farm ||\n                this.config.general.builder !== this.builder ||\n                this.config.general.guard !== this.guard) {\n                // readability comment --------------------------------------------------------------\n                this.config.farmConfig.farmInterval = this.farmInterval;\n                this.config.farmConfig.humanize = this.humanize;\n                this.config.general.switch = this.switch;\n                this.config.general.farm = this.farm;\n                this.config.general.builder = this.builder;\n                this.config.general.guard = this.guard;\n                this.configManager.persistConfig();\n            }\n            if (this.farmInterval === gps_config_1.FarmTimeInterval.FourthOption) {\n                alert('Farmienie ustawione na 4h/8h, odśwież stronę jeżeli to błąd!');\n            }\n            container.classList.add('minimized');\n            this.emit('managersChange');\n        }));\n        showTrigger.addEventListener('click', () => {\n            container.classList.contains('minimized') && container.classList.remove('minimized');\n        });\n        switchCheckbox.addEventListener('change', () => {\n            this.switch = switchCheckbox.checked;\n        });\n        plunderCheckbox.addEventListener('change', () => {\n            this.farm = plunderCheckbox.checked;\n        });\n        builderCheckbox.addEventListener('change', () => {\n            this.builder = builderCheckbox.checked;\n        });\n        guardCheckbox.addEventListener('change', () => {\n            this.guard = guardCheckbox.checked;\n        });\n        timeIntervalSelect.addEventListener('change', () => {\n            this.farmInterval = Number(timeIntervalSelect.value);\n            console.log('this.farmInterval changed to: ', this.farmInterval);\n        });\n        // farm section\n        const farmSection = (_a = container.querySelector('#farm')) === null || _a === void 0 ? void 0 : _a.parentElement;\n        const farmSectionContainer = farmSection.querySelector('.expandable-section');\n        const farmSectionArrow = farmSection.querySelector('.arrow-down');\n        farmSectionArrow.addEventListener('click', () => {\n            farmSectionContainer.classList.toggle('hidden');\n            farmSectionArrow.classList.toggle('rotate');\n        });\n        humanizeCheckbox.addEventListener('change', () => {\n            this.humanize = humanizeCheckbox.checked;\n        });\n        // END farm section\n    }\n    createInitialElement() {\n        var _a;\n        const container = document.createElement('div');\n        container.innerHTML = config_popup_html_1.default;\n        // get initial data from config and change\n        container.querySelector('#city-switch').checked = this.switch;\n        container.querySelector('#farm').checked = this.farm;\n        container.querySelector('#builder').checked = this.builder;\n        container.querySelector('#guard').checked = this.guard;\n        const intervalSelectElement = container.querySelector('#time-interval-select');\n        const farmIntervalValuesUnparsed = Object.values(gps_config_1.FarmTimeInterval);\n        const farmIntervalValues = farmIntervalValuesUnparsed.slice((farmIntervalValuesUnparsed.length / 2));\n        farmIntervalValues.forEach((value) => {\n            const option = document.createElement('option');\n            option.value = value.toString();\n            option.textContent = this.mapTimeIntervalKeyToText(value);\n            intervalSelectElement.appendChild(option);\n        });\n        container.querySelector('#time-interval-select').value = (_a = this.config.farmConfig.farmInterval.toString()) !== null && _a !== void 0 ? _a : gps_config_1.FarmTimeInterval.FirstOption.toString();\n        const humanizeCheckbox = container.querySelector('#humanize-checkbox');\n        humanizeCheckbox.checked = this.config.farmConfig.humanize;\n        return container;\n    }\n    mapTimeIntervalKeyToText(value) {\n        switch (value) {\n            case gps_config_1.FarmTimeInterval.FirstOption:\n                return \"5m/10m\";\n            case gps_config_1.FarmTimeInterval.SecondOption:\n                return \"20m/40m\";\n            case gps_config_1.FarmTimeInterval.ThirdOption:\n                return \"1h 30m/3h\";\n            case gps_config_1.FarmTimeInterval.FourthOption:\n                return \"4h/8h\";\n            default:\n                return \"Unknown interval\";\n        }\n    }\n    addStyle() {\n        const style = document.createElement('style');\n        style.textContent = config_popup_css_1.default;\n        document.head.appendChild(style);\n    }\n    render() {\n        this.addStyle();\n        // utwórz contener, ustaw atrybuty i body\n        const configWindowElement = this.createInitialElement();\n        document.body.appendChild(configWindowElement);\n        this.initEventListeners();\n    }\n    minimize() {\n        const container = document.querySelector('#config-popup-container');\n        container === null || container === void 0 ? void 0 : container.classList.add('minimized');\n    }\n}\nexports.default = ConfigPopup;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst gps_config_1 = __importDefault(require(\"../../gps.config\"));\nconst storage_manager_1 = __importDefault(require(\"./storage-manager\"));\nclass ConfigManager {\n    constructor() { }\n    static getInstance() {\n        if (!ConfigManager.instance) {\n            ConfigManager.instance = new ConfigManager();\n            ConfigManager.instance.storageManager = storage_manager_1.default.getInstance();\n            ConfigManager.instance.config = ConfigManager.instance.initConfig();\n        }\n        return ConfigManager.instance;\n    }\n    initConfig() {\n        const config = this.storageManager.readFromLocalStorage('config');\n        if (!config || !this.isConfigStructureEqual(config, gps_config_1.default)) {\n            this.storageManager.writeToLocalStorage('config', gps_config_1.default);\n            return gps_config_1.default;\n        }\n        return config;\n    }\n    isConfigStructureEqual(config, gpsConfig) {\n        return Object.keys(config).length === Object.keys(gpsConfig).length &&\n            Object.keys(config).every(key => {\n                if (!(key in gpsConfig)) {\n                    return false;\n                }\n                if (typeof config[key] === 'object' && config[key] !== null) {\n                    return this.isConfigStructureEqual(config[key], gpsConfig[key]);\n                }\n                return typeof config[key] === typeof gpsConfig[key];\n            });\n    }\n    getConfig() {\n        return this.config;\n    }\n    persistConfig() {\n        this.storageManager.writeToLocalStorage('config', this.config);\n    }\n    getConfigValue(key) {\n        return this.config[key];\n    }\n}\nexports.default = ConfigManager;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRandomMs = exports.areGridsEqual = exports.msToTimeString = exports.formatDateToSimpleString = exports.getTimeInFuture = exports.addDelay = exports.isVisible = exports.textToMs = void 0;\nexports.getRandomInt = getRandomInt;\nexports.areArraysContentsEqual = areArraysContentsEqual;\nexports.shuffleArray = shuffleArray;\nexports.isMobile = isMobile;\n/**\n * Takes string in format of xx:xx:xx - parses and returns number in miliseconds\n * @param text string in format 00:02:38\n * @returns miliseconds\n */\nconst textToMs = (text) => {\n    const timeArray = text.split(':').map(el => parseInt(el));\n    const timeout = (timeArray[0] * 1000 * 60 * 60) + (timeArray[1] * 1000 * 60) + (timeArray[2] * 1000);\n    return timeout;\n};\nexports.textToMs = textToMs;\nconst isVisible = (element) => {\n    return element.offsetParent;\n};\nexports.isVisible = isVisible;\nconst addDelay = (time = 1000) => {\n    return new Promise(resolve => setTimeout(resolve, time));\n};\nexports.addDelay = addDelay;\nconst getTimeInFuture = (timeMs) => {\n    const now = new Date();\n    const futureDate = new Date(now.getTime() + timeMs);\n    return `${futureDate.getHours().toString().padStart(2, '0')}:${futureDate.getMinutes().toString().padStart(2, '0')}:${futureDate.getSeconds().toString().padStart(2, '0')}`;\n};\nexports.getTimeInFuture = getTimeInFuture;\nconst formatDateToSimpleString = (date) => {\n    return `${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}:${date.getSeconds().toString().padStart(2, '0')}`;\n};\nexports.formatDateToSimpleString = formatDateToSimpleString;\nconst msToTimeString = (ms) => {\n    const hours = Math.floor(ms / (1000 * 60 * 60));\n    const minutes = Math.floor((ms % (1000 * 60 * 60)) / (1000 * 60));\n    const seconds = Math.floor((ms % (1000 * 60)) / 1000);\n    return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n};\nexports.msToTimeString = msToTimeString;\nfunction getRandomInt(max) {\n    return Math.floor(Math.random() * max);\n}\nconst areGridsEqual = (grid1, grid2) => {\n    return grid1[0] === grid2[0] && grid1[1] === grid2[1];\n};\nexports.areGridsEqual = areGridsEqual;\nfunction areArraysContentsEqual(arr1, arr2) {\n    if (arr1.length !== arr2.length)\n        return false;\n    for (let i = 0; i < arr1.length; i++) {\n        if (arr1[i] !== arr2[i])\n            return false;\n    }\n    return true;\n}\nfunction shuffleArray(array) {\n    for (let i = array.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [array[i], array[j]] = [array[j], array[i]];\n    }\n}\nfunction isMobile() {\n    if (navigator.userAgentData) {\n        return navigator.userAgentData.mobile;\n    }\n    else {\n        if (navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/Android/i))\n            return true;\n        return false;\n    }\n}\nconst getRandomMs = (min, max) => {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n};\nexports.getRandomMs = getRandomMs;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass StorageManager {\n    constructor() { }\n    static getInstance() {\n        if (!StorageManager.instance) {\n            StorageManager.instance = new StorageManager();\n        }\n        return StorageManager.instance;\n    }\n    readFromLocalStorage(key) {\n        const item = localStorage.getItem(key);\n        return item ? JSON.parse(item) : null;\n    }\n    writeToLocalStorage(key, value) {\n        localStorage.setItem(key, JSON.stringify(value));\n    }\n}\nexports.default = StorageManager;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Lock {\n    constructor() {\n        this.isLocked = false;\n        this.lockedBy = null;\n        this.lockedAt = null;\n        this.lockCheckInterval = null;\n        this.queue = [];\n    }\n    static getInstance() {\n        if (!this.instance) {\n            this.instance = new Lock();\n            this.instance.setLockCheckInterval();\n        }\n        return this.instance;\n    }\n    setLockCheckInterval() {\n        this.lockCheckInterval = setInterval(() => {\n            if (this.lockedAt && (Date.now() - this.lockedAt > 1000 * 60 * 5)) {\n                console.warn(`lock is locked for too long by ${this.lockedBy}, releasing...`);\n                // TODO: or consider restarting all managers\n                this.release();\n            }\n        }, 1000 * 60 * 5);\n    }\n    acquire(lockedBy) {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log('try acquiring');\n            if (!this.isLocked) {\n                console.log('\\tlock is free, acquire Lock');\n                this.isLocked = true;\n                this.lockedBy = lockedBy !== null && lockedBy !== void 0 ? lockedBy : null;\n                this.lockedAt = Date.now();\n                return;\n            }\n            console.log('\\tlock is locked, add to queue');\n            yield new Promise((resolve) => {\n                this.queue.push(resolve);\n            });\n        });\n    }\n    release() {\n        console.log('release lock()');\n        // Release the next waiting task in the queue\n        if (this.queue.length > 0) {\n            const nextResolve = this.queue.shift();\n            if (nextResolve) {\n                console.log('\\t-but next element in the queue takes it turn');\n                nextResolve();\n            }\n        }\n        else {\n            this.isLocked = false;\n            console.log('lock released()');\n        }\n    }\n    isTaken() {\n        return this.isLocked;\n    }\n}\nLock.instance = null;\nexports.default = Lock;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cancelHover = exports.triggerHover = void 0;\nexports.simulateClick = simulateClick;\nexports.setInputValue = setInputValue;\nexports.waitForElements = waitForElements;\nexports.waitForElement = waitForElement;\nexports.waitForElementInterval = waitForElementInterval;\nexports.waitForElementsInterval = waitForElementsInterval;\nexports.waitForElementFromNode = waitForElementFromNode;\nexports.onPageLoad = onPageLoad;\nexports.mouseDownEvent = mouseDownEvent;\nexports.performComplexClick = performComplexClick;\nexports.mouseUpEvent = mouseUpEvent;\nconst plain_utility_1 = require(\"./plain-utility\");\nfunction simulateClick(element) {\n    if (element) {\n        const rect = element.getBoundingClientRect();\n        const event = new MouseEvent('click', {\n            clientX: rect.left + rect.width / 2,\n            clientY: rect.top + rect.height / 2,\n            bubbles: true,\n            cancelable: true,\n            view: window\n        });\n        element.dispatchEvent(event);\n    }\n}\nconst triggerHover = (element) => {\n    element && element.dispatchEvent(new Event('mouseover', {\n        bubbles: true,\n        cancelable: true,\n    }));\n};\nexports.triggerHover = triggerHover;\nconst cancelHover = (element) => {\n    element && element.dispatchEvent(new Event('mouseout', {\n        bubbles: true,\n        cancelable: true,\n    }));\n};\nexports.cancelHover = cancelHover;\nfunction appendChildAtIndex(parent, newChild, index) {\n    const children = parent.children;\n    if (index >= children.length) {\n        parent.appendChild(newChild);\n    }\n    else {\n        parent.insertBefore(newChild, children[index]);\n    }\n}\n// Funkcja do ustawienia wartości i wywołania zdarzeń\nfunction setInputValue(inputElement, value) {\n    // Sprawdzenie, czy element jest rzeczywiście <input>\n    if (inputElement && inputElement.tagName === 'INPUT') {\n        // Ustawienie wartości inputu\n        inputElement.value = typeof value === \"number\" ? value.toString() : value;\n        // Tworzenie zdarzenia input\n        const inputEvent = new Event('input', { bubbles: true });\n        inputElement.dispatchEvent(inputEvent);\n        // Tworzenie zdarzenia change\n        const changeEvent = new Event('change', { bubbles: true });\n        inputElement.dispatchEvent(changeEvent);\n    }\n    else {\n        console.warn(`setInputValue(${inputElement.name}) unsuccessful`);\n    }\n}\nfunction waitForElements(selector, timeoutMs = 8000) {\n    return new Promise((resolve, reject) => {\n        // Funkcja do aktualizacji wyników\n        const elements = document.querySelectorAll(selector);\n        if (elements.length > 0) {\n            resolve(elements);\n        }\n        else {\n            // Ustawienie observera do monitorowania DOM\n            let timeout = setTimeout(() => {\n                observer.disconnect();\n                reject(`waitForElements(${selector}) - not found within timeout`);\n            }, timeoutMs);\n            const observer = new MutationObserver((mutations) => {\n                for (const mutation of mutations) {\n                    if (mutation.type === 'childList') {\n                        const elements = document.querySelectorAll(selector);\n                        if (elements.length > 0) {\n                            observer.disconnect();\n                            clearTimeout(timeout);\n                            resolve(elements);\n                        }\n                    }\n                }\n            });\n            observer.observe(document.body, { childList: true, subtree: true });\n        }\n    });\n}\nfunction waitForElement(selector, timeout = 8000) {\n    return new Promise((resolve, reject) => {\n        const element = document.querySelector(selector);\n        if (element) {\n            return resolve(element);\n        }\n        else {\n            const timeoutId = setTimeout(() => {\n                observer.disconnect();\n                reject(`${selector} - not found within timeout`);\n            }, timeout);\n            const observer = new MutationObserver((mutations) => {\n                for (const mutation of mutations) {\n                    if (mutation.type === 'childList') {\n                        for (const node of mutation.addedNodes) {\n                            if (node.nodeType === Node.ELEMENT_NODE && node.matches(selector)) {\n                                observer.disconnect();\n                                clearTimeout(timeout);\n                                resolve(node);\n                            }\n                        }\n                    }\n                }\n            });\n            // Rozpoczęcie obserwacji\n            observer.observe(document.body, { childList: true, subtree: true });\n        }\n    });\n}\nconst WaitForElementOptionsDefaults = {\n    timeout: 8000,\n    fromNode: document,\n    interval: 333,\n};\nfunction waitForElementInterval(selector, options = WaitForElementOptionsDefaults) {\n    const { timeout = 8000, fromNode = document, interval = 333 } = options;\n    return new Promise((resolve, reject) => {\n        const element = fromNode.querySelector(selector);\n        if (element) {\n            resolve(element);\n        }\n        else {\n            const timeoutId = setTimeout(() => {\n                clearInterval(observer);\n                reject(`${selector} - not found within timeout`);\n            }, timeout);\n            const observer = setInterval(() => {\n                const element = fromNode.querySelector(selector);\n                if (element) {\n                    clearInterval(observer);\n                    clearTimeout(timeoutId);\n                    resolve(element);\n                }\n            }, interval);\n        }\n    });\n}\nfunction waitForElementsInterval(selector, options = WaitForElementOptionsDefaults) {\n    const { timeout = 8000, fromNode = document, interval = 333 } = options;\n    return new Promise((resolve, reject) => {\n        const elements = fromNode.querySelectorAll(selector);\n        if (elements.length > 0) {\n            resolve(elements);\n        }\n        else {\n            const timeoutId = setTimeout(() => {\n                clearInterval(observer);\n                reject(`${selector} - not found within timeout`);\n            }, timeout);\n            const observer = setInterval(() => {\n                const elements = fromNode.querySelectorAll(selector);\n                if (elements.length > 0) {\n                    clearInterval(observer);\n                    clearTimeout(timeoutId);\n                    resolve(elements);\n                }\n            }, interval);\n        }\n    });\n}\nfunction waitForElementFromNode(parentNode, selector, timeout = 8000) {\n    return new Promise((resolve, reject) => {\n        const element = parentNode.querySelector(selector);\n        // Jeśli element już istnieje to zostaje zwrócony odrazu\n        if (element) {\n            // console.log(`${selector} - FOUND, resolve:`, element);\n            return resolve(element);\n        }\n        else {\n            // console.log(`${selector} - not found, mount observer`);\n            // Inicjalizacja timeoutu\n            const timeoutId = setTimeout(() => {\n                observer.disconnect();\n                reject(`${selector} - not found within timeout`);\n            }, timeout);\n            // Inicjalizacja MutationObserver\n            const observer = new MutationObserver((mutations) => {\n                for (const mutation of mutations) {\n                    if (mutation.type === 'childList') {\n                        for (const node of mutation.addedNodes) {\n                            if (node.nodeType === Node.ELEMENT_NODE && node.matches(selector)) {\n                                observer.disconnect();\n                                clearTimeout(timeoutId);\n                                resolve(node);\n                            }\n                        }\n                    }\n                }\n            });\n            // Rozpoczęcie obserwacji\n            observer.observe(parentNode instanceof Document ? parentNode.body : parentNode, { childList: true, subtree: true });\n        }\n    });\n}\n/** Function that waits for DOM to load then applies main loop. */\nfunction onPageLoad(callback) {\n    const initWrapper = () => {\n        // const lodadingContainer = document.querySelector('#screen-loading');\n        const timeout = setTimeout(() => {\n            clearTimeout(timeout);\n            setTimeout(callback, 2000);\n        }, 500);\n    };\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', initWrapper);\n    }\n    else {\n        initWrapper();\n    }\n}\nfunction simulateKeyPress(key) {\n    // Tworzenie zdarzenia keydown\n    const keydownEvent = new KeyboardEvent('keydown', {\n        key: key,\n        code: `Key${key.toUpperCase()}`, // Zakładając, że używasz klawisza alfanumerycznego\n        keyCode: key.charCodeAt(0), // Kod klawisza w starszych przeglądarkach\n        which: key.charCodeAt(0),\n        bubbles: true,\n        cancelable: true\n    });\n    // Tworzenie zdarzenia keyup\n    const keyupEvent = new KeyboardEvent('keyup', {\n        key: key,\n        code: `Key${key.toUpperCase()}`,\n        keyCode: key.charCodeAt(0),\n        which: key.charCodeAt(0),\n        bubbles: true,\n        cancelable: true\n    });\n    // Wywoływanie zdarzeń na całym dokumencie\n    document.dispatchEvent(keydownEvent);\n    setTimeout(() => {\n        document.dispatchEvent(keyupEvent);\n    }, 100); // Czas trwania wciśnięcia klawisza, w milisekundach\n}\nfunction mouseDownEvent(element) {\n    const mouseDownEvent = new MouseEvent('mousedown', {\n        bubbles: true,\n        cancelable: true,\n        view: window\n    });\n    if (element) {\n        element.dispatchEvent(mouseDownEvent);\n    }\n}\nfunction performComplexClick(element) {\n    return __awaiter(this, void 0, void 0, function* () {\n        mouseDownEvent(element);\n        yield (0, plain_utility_1.addDelay)(100);\n        mouseUpEvent(element);\n    });\n}\nfunction mouseUpEvent(element) {\n    const mouseUpEvent = new MouseEvent('mouseup', {\n        bubbles: true,\n        cancelable: true,\n        view: window\n    });\n    if (element) {\n        element.dispatchEvent(mouseUpEvent);\n    }\n    else {\n        console.warn(`mouseUpEvent() - ${element} not found`);\n    }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(927);\n"],"names":["ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","prototype","call","ownKeys","Object","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","value","EventEmitter","init","this","module","exports","once","emitter","name","Promise","resolve","reject","errorListener","err","removeListener","resolver","slice","arguments","eventTargetAgnosticAddListener","handler","on","addErrorHandlerIfEventEmitter","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","m","events","existing","warning","create","newListener","emit","unshift","push","length","warned","w","Error","String","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","Array","i","unwrapListeners","arrayClone","listenerCount","n","copy","flags","addEventListener","wrapListener","arg","removeEventListener","defineProperty","enumerable","get","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","context","len","listeners","addListener","prependListener","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","key","keys","rawListeners","eventNames","FarmTimeInterval","config","resources","minPopulationBuffer","storeAlmostFullPercentage","farmConfig","farmInterval","FirstOption","humanize","general","antyTimingMs","applicationRefreshInterval","forcedRefresh","switch","farm","builder","guard","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","e","rejected","result","done","then","__importDefault","mod","__esModule","master_manager_1","onPageLoad","log","default","getInstance","ArmyMovement","constructor","callback","instance","mountObserver","observer","MutationObserver","mutations","forEach","mutation","node","addedNodes","HTMLElement","getAttribute","id","element","document","querySelector","observe","childList","subtree","setCallback","buildings","buildingsSelectors","ui_utility_1","buildActionSafe","selector","cityViewBtn","classList","contains","click","buildModeButton","waitForElement","buildButton","currentLvl","disabled","main","backgroundImageProp","elementSelector","currentLvlElSelector","buildAction","hide","lumber","stoner","ironer","market","docks","barracks","wall","storage","academy","temple","plain_utility_1","ui_lock_1","queue_css_1","builder_prod_html_1","buildings_1","resource_manager_1","city_switch_manager_1","CityBuilder","allowUnsequentialBuilds","allowCriticalBuilds","RUN","mainQueue","lock","resourceManager","citySwitchManager","addStyle","renderUI","loadQueueFromStorage","listenToCitySwitch","container","createElement","innerHTML","body","appendChild","addBuildButtons","initToggleButtonEvents","getElementById","toggleBuilderButtonId","buildContainer","buildContainerId","toggle","tryExitBuildMode","tryGoToBuildMode","city","currentCityQueue","find","queue","rerenderQueue","buildOptions","buildOptionsContainerId","values","building","button","className","buildOptionItemClass","style","backgroundImage","addIcon","buildOptionItemAddClass","onOptionBuildButtonClick","_a","switchAction","currentCity","getCurrentCity","queueObj","schedule","addToQueue","addBuldingToUIQueue","queueItem","cityQueue","additionalQueue","queueItemEl","queueItemClass","setAttribute","appendChildAtIndex","upButton","upButtonClass","textContent","toLvl","cancelButton","cancelButtonClass","findIndex","item","clearInterval","clearTimeout","revalidateQueueItemLevels","handleBuildSchedule","splice","remove","saveQueueToStorage","fromIndex","filter","newToLvl","newId","catch","buildingcurrentLvlText","el","Infinity","lvlCounter","JSON","parse","stringify","buildOrSchedule","performBuildSchedule","isEmptySlot","checkIfItemCanBeBuiltAndAddDeleteOrSchedule","setTimeoutForNextSpeedUpAndSchedule","isQueueEmpty","timeToSpeedUp","getTimeToCanSpeedUp","emptySlots","getEmptySlotsCount","speedUpFirstBuild","untilEmptyslotsAreEqual","getTimeInFuture","setTimeout","acquire","release","cityQueue_1","item_1","forced","canBuild","shiftQueueCleanScheduleAndTryNext","clearUIQueueItem","resourcesInfo","areResourcesStackable","areStackable","setInterval","hasEnoughResources","requiredResources","BUILD_RETRY_INTERVAL","buildingLvl","getBuildingCurrentLvl","querySelectorAll","res","interval","goToCityView","freeButton","counter","triggerHover","addDelay","wood","stone","iron","requiredWood","nextSibling","requiredStone","requiredIron","requiredPopulation","cancelHover","getResourcesInfo","getPopulation","getStoreCapacity","population","reduce","acc","curr","storeMaxSize","amount","head","firstOrder","textToMs","localStorage","getItem","map","getCityByName","assign","setItem","start","stop","add","isRunning","insertBefore","children","queueContainerId","events_1","CitySwitchManager","super","cityList","initCityList","_b","_c","_d","_e","townListElement","townList","town","cityId","parentElement","openTownList","from","waitForElements","isleId","cls","match","goBackToFirstTown","clickArrowUntilCityFound","cityName","cityWrapper","arrowLeft","arrowRight","getCityList","run","gps_config_1","config_manager_1","FarmManager","schedulerArray","messageDialogObserver","humanMessageDialogObserver","scheduleNextFarmingOperationForCity","timeInterval","scheduleItem","scheduledDate","Date","now","timeout","farmVillages","mountMessageDialogsObservers","disconnect","citySwitch","getConfig","initFarmAllVillages","farmVillagesFlow","disconnectObservers","city_1","getRandomMs","villages","waitForElementsInterval","villageStyleSelectors","v","villagesAmount","villageSelector","entries","performComplexClick","farmOptionIndex","getFarmOptionIndex","els","getUnlockTimeOrNull","forceRepeatFarming","cityInfo","some","window","cooldownBar","waitForElementFromNode","unlcokTimeEl","rej","getTextInterval","SecondOption","ThirdOption","FourthOption","getFarmOptionTimeRegex","getFarmOption","test","config_popup_1","city_builder_1","farm_manager_1","Scheduler_1","MasterManager","pausedManagersSnapshot","farmManager","switchManager","scheduler","initCaptchaPrevention","initRefreshUtility","initConfigDialog","canRefresh","canSafelyRefresh","persistConfig","location","reload","Math","floor","random","recaptchaWindow","captchaCurtain","checkbox","caption","runManagersFromConfig","configMenuWindow","isSwitchChecked","isBuilderChecked","isFarmChecked","render","minimize","pauseRunningManagers","except","includes","resumeRunningManagers","isPaused","forceRefresh","stopAll","ResourceManager","_f","configManager","maxSizeText","parseInt","resourceItem","maxSizeElement","isAlmostFull","isFull","isLow","army_movement_1","button_panel_extension_html_1","scheduler_list_prod_html_1","scheduler_list_css_1","OperationType","Scheduler","isLockTakenByScheduler","_error","_hydrationError","_info","privateconstructor","armyMovement","masterManager","addUIExtenstion","addSchedulerListConfigWindow","synchronizeSchedulerWithStorage","mountCityDialogObserver","undoArmyMovement","fromTown","hoverElement","extendAttackSupportUI","buttonWrapper","div","inputDateElement","getFormattedInputValueFromDate","wayDurationText","wayDurationMs","inputData","inputEl","operationType","firstElementChild","ARMY_ATTACK","ARMY_SUPPORT","inputDateValue","inputTimeValue","targetDate","getDateFromDateTimeInputValues","actionDate","getTime","sourceCity","targetCitySelector","canAddSchedulerItem","data","scheduleTimeout","timeout30s","timeout10s","timeoutAction","schedulerItem","targetCityIdSelector","timeoutStructure","movementId","undoMovementAction","cancelSchedule","tryRestoreManagers","postActionCleanup","halfMinuteBeforeAction","TURN_OFF_MANAGERS_TIME_MS","tenSecondsBeforeAction","input","setInputValue","addSchedulerItemToUI","info","hydrateSchedulerItem","handleIfSchedulerListIsEmpty","hydrationError","removeSchedulerItemFromUI","errorElement","infoElement","abs","nextClosestActionTime","hours","minutes","seconds","date","getFullYear","getMonth","padStart","getDate","mountAttackSupportSubpageObserver","parentNode","nodeType","Node","ELEMENT_NODE","unobserveAttackSupportSubpages","removedNodes","schedulerListConfigWindow","addSchedulerListConfigListeners","toggleButton","tableContainer","row","insertRow","getSchedulerItemId","operaitonTypeCell","insertCell","toLocaleTimeString","cancelButtonCell","noSchedules","every","MIN_PRECEDENCE_TIME_MS","PREPARATION_TIME_MS","config_popup_css_1","config_popup_html_1","ConfigPopup","isGuardChecked","getPlunderConfig","getManagersFlags","initEventListeners","switchCheckbox","plunderCheckbox","builderCheckbox","guardCheckbox","timeIntervalSelect","showTrigger","closeTrigger","humanizeCheckbox","btn","checked","alert","farmSection","farmSectionContainer","farmSectionArrow","createInitialElement","intervalSelectElement","farmIntervalValuesUnparsed","option","toString","mapTimeIntervalKeyToText","configWindowElement","storage_manager_1","ConfigManager","storageManager","initConfig","readFromLocalStorage","isConfigStructureEqual","writeToLocalStorage","gpsConfig","getConfigValue","areGridsEqual","msToTimeString","formatDateToSimpleString","isVisible","getRandomInt","max","areArraysContentsEqual","arr1","arr2","shuffleArray","array","j","isMobile","navigator","userAgentData","mobile","userAgent","text","timeArray","split","offsetParent","time","timeMs","futureDate","getHours","getMinutes","getSeconds","ms","grid1","grid2","min","StorageManager","Lock","isLocked","lockedBy","lockedAt","lockCheckInterval","setLockCheckInterval","nextResolve","isTaken","simulateClick","rect","getBoundingClientRect","event","MouseEvent","clientX","left","width","clientY","top","height","bubbles","cancelable","view","dispatchEvent","inputElement","tagName","inputEvent","Event","changeEvent","timeoutMs","elements","matches","waitForElementInterval","options","WaitForElementOptionsDefaults","fromNode","timeoutId","Document","initWrapper","readyState","mouseDownEvent","mouseUpEvent","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","d","definition","o","obj","prop","hasOwnProperty","r","Symbol","toStringTag"],"sourceRoot":""}