{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://gps/./node_modules/events/events.js","webpack://gps/./src/config-popup/config-popup.css","webpack://gps/./src/config-popup/config-popup.html","webpack://gps/./src/service/city/builder/builder-prod.html","webpack://gps/./src/service/city/builder/queue.css","webpack://gps/./src/service/master/ui/general-info.css","webpack://gps/./src/service/master/ui/info-template.html","webpack://gps/./src/service/scheduler/button-panel-extension.html","webpack://gps/./src/service/scheduler/scheduler-list-prod.html","webpack://gps/./src/service/scheduler/scheduler-list.css","webpack://gps/./gps.config.ts","webpack://gps/./src/config-popup/config-popup.ts","webpack://gps/./src/main.ts","webpack://gps/./src/service/army/army-movement.ts","webpack://gps/./src/service/city/builder/buildings.ts","webpack://gps/./src/service/city/builder/city-builder.ts","webpack://gps/./src/service/city/city-switch-manager.ts","webpack://gps/./src/service/farm/farm-manager.ts","webpack://gps/./src/service/master/master-manager.ts","webpack://gps/./src/service/master/ui/general-info.ts","webpack://gps/./src/service/resources/resource-manager.ts","webpack://gps/./src/service/scheduler/Scheduler.ts","webpack://gps/./src/utility/config-manager.ts","webpack://gps/./src/utility/plain-utility.ts","webpack://gps/./src/utility/storage-manager.ts","webpack://gps/./src/utility/ui-lock.ts","webpack://gps/./src/utility/ui-utility.ts","webpack://gps/webpack/bootstrap","webpack://gps/webpack/runtime/define property getters","webpack://gps/webpack/runtime/hasOwnProperty shorthand","webpack://gps/webpack/runtime/make namespace object","webpack://gps/webpack/startup"],"sourcesContent":["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","export default \"#config-popup-container * {\\r\\n  margin: 0;\\r\\n  padding: 0;\\r\\n  box-sizing: border-box;\\r\\n  font-family: Arial, Helvetica, sans-serif;\\r\\n  color: black;\\r\\n}\\r\\n\\r\\n#config-popup-header {\\r\\n  margin-bottom: 24px;\\r\\n  text-shadow: 2px 2px 2px gray;\\r\\n}\\r\\n\\r\\n#config-popup-container {\\r\\n  position: absolute;\\r\\n  top: 50%;\\r\\n  right: 50%;\\r\\n  transform: translate(50%, -50%);\\r\\n  box-shadow: 0px 3px 8px 0px rgba(157, 157, 157, 0.4);\\r\\n  border-radius: 4px;\\r\\n  width: 350px;\\r\\n  max-width: 80%;\\r\\n  overflow: hidden;\\r\\n  background-color: antiquewhite;\\r\\n  border: 1px solid rgba(165, 125, 11, 1);\\r\\n  z-index: 100;\\r\\n  padding: 16px;\\r\\n}\\r\\n\\r\\n.input-wrapper {\\r\\n  display: grid;\\r\\n  grid-template-columns: auto 1fr;\\r\\n  justify-items: start;\\r\\n  column-gap: 8px;\\r\\n  row-gap: 8px;\\r\\n  align-items: center;\\r\\n  margin-top: 16px;\\r\\n  text-align: start;\\r\\n}\\r\\n\\r\\n.input-wrapper label {\\r\\n  background-color: none;\\r\\n}\\r\\n\\r\\n.expandable-section {\\r\\n  grid-column-start: 2;\\r\\n}\\r\\n\\r\\n#config-popup-content {\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  border-radius: 4px;\\r\\n  gap: 8px;\\r\\n}\\r\\n\\r\\n#config-popup-content h1 {\\r\\n  font-weight: 500;\\r\\n  font-size: 1.7rem;\\r\\n  align-self: center;\\r\\n  margin-bottom: 8px;\\r\\n}\\r\\n\\r\\n.label-chevron {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  gap:8px\\r\\n}\\r\\n\\r\\n\\r\\n#button-panel {\\r\\n  align-self: flex-end;\\r\\n  margin-top: 20px;\\r\\n}\\r\\n\\r\\n#button-panel button {\\r\\n  padding: 4px;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n#config-popup-container.minimized {\\r\\n  top: auto;\\r\\n  bottom: 150px;\\r\\n  right: 30px;\\r\\n  width: 40px;\\r\\n  height: 40px;\\r\\n  border-radius: 50%;\\r\\n  box-shadow: none;\\r\\n}\\r\\n\\r\\n\\r\\n.show-trigger {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n#close-popup {\\r\\n  cursor: pointer;\\r\\n  position: absolute;\\r\\n  right: 10px;\\r\\n  top: 10px;\\r\\n  transition-duration: 125ms;\\r\\n  color: tomato;\\r\\n  text-shadow: 0px 0px 2px black;\\r\\n}\\r\\n\\r\\n#close-popup:hover {\\r\\n  animation: freak 1s ease-in both infinite;\\r\\n}\\r\\n\\r\\n#config-popup-container.minimized #config-popup-content {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n#config-popup-container.minimized #config-popup-header {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n#config-popup-container.minimized {\\r\\n  padding: 0;\\r\\n}\\r\\n\\r\\n#config-popup-container.minimized .show-trigger {\\r\\n  cursor: pointer;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  justify-content: center;\\r\\n  font-size: 0.7rem;\\r\\n  font-weight: 600;\\r\\n  text-shadow: 0px 1px 1px rgba(165, 125, 11, 1);\\r\\n}\\r\\n\\r\\n.section-header {\\r\\n  display: flex;\\r\\n  flex-direction: row;\\r\\n  align-items: center;\\r\\n  gap: 5px;\\r\\n}\\r\\n\\r\\n.section-content {\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  gap: 4px;\\r\\n}\\r\\n\\r\\n.isle-container {\\r\\n  display: flex;\\r\\n  margin-left: 16px !important;\\r\\n  gap: 4px;\\r\\n  margin-top: 4px !important;\\r\\n}\\r\\n\\r\\n.arrow-down {\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.hidden {\\r\\n  display: none !important;\\r\\n}\\r\\n\\r\\n.rotate {\\r\\n  transform: rotate(180deg);\\r\\n}\\r\\n\\r\\n@keyframes freak {\\r\\n  0% {\\r\\n    transform: scale(1);\\r\\n  }\\r\\n\\r\\n  33.33% {\\r\\n    transform: scale(0.8);\\r\\n  }\\r\\n\\r\\n  66.66% {\\r\\n    transform: scale(1.2);\\r\\n  }\\r\\n}\";","export default \"<div id=\\\"config-popup-container\\\" class=\\\"\\\">\\r\\n  <div id=\\\"config-popup-header\\\">\\r\\n    <h1>GPS config</h1>\\r\\n    <div id=\\\"close-popup\\\">&#10006;</div>\\r\\n  </div>\\r\\n  <div id=\\\"config-popup-content\\\">\\r\\n    <div class=\\\"input-wrapper\\\">\\r\\n      <input type=\\\"checkbox\\\" id=\\\"city-switch\\\" checked />\\r\\n      <label for=\\\"city-switch\\\">Switch cities automatically</label>\\r\\n    </div>\\r\\n    <div class=\\\"input-wrapper\\\">\\r\\n      <input type=\\\"checkbox\\\" id=\\\"farm\\\" checked />\\r\\n      <div class=\\\"label-chevron\\\">\\r\\n        <label for=\\\"farm\\\">\\r\\n          Farm manager\\r\\n        </label>\\r\\n        <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"arrow-down\\\" width=\\\"16\\\" height=\\\"16\\\" fill=\\\"currentColor\\\"\\r\\n          class=\\\"bi bi-chevron-down\\\" viewBox=\\\"0 0 16 16\\\">\\r\\n          <path fill-rule=\\\"evenodd\\\"\\r\\n            d=\\\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708\\\" />\\r\\n        </svg>\\r\\n      </div>\\r\\n      <div class=\\\"expandable-section hidden\\\">\\r\\n        <div class=\\\"section-header\\\"></div>\\r\\n        <div class=\\\"section-content\\\">\\r\\n          <div class=\\\"input-wapper\\\">\\r\\n            <label>\\r\\n              Time interval\\r\\n            </label>\\r\\n            <select id=\\\"time-interval-select\\\">\\r\\n            </select>\\r\\n          </div>\\r\\n          <div class=\\\"input-wapper\\\">\\r\\n            <input type=\\\"checkbox\\\" id=\\\"humanize-checkbox\\\" />\\r\\n            <label for=\\\"humanize-checkbox\\\">\\r\\n              Humanize\\r\\n            </label>\\r\\n          </div>\\r\\n          <div id=\\\"conflicting-cities-container\\\" class=\\\"hidden\\\">\\r\\n            <div class=\\\"section-header\\\">\\r\\n              <span class=\\\"section-name\\\">Conflicting cities</span>\\r\\n              <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"arrow-down\\\" width=\\\"16\\\" height=\\\"16\\\"\\r\\n                fill=\\\"currentColor\\\" class=\\\"bi bi-chevron-down\\\" viewBox=\\\"0 0 16 16\\\">\\r\\n                <path fill-rule=\\\"evenodd\\\"\\r\\n                  d=\\\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708\\\" />\\r\\n              </svg>\\r\\n            </div>\\r\\n            <div class=\\\"section-content hidden\\\">\\r\\n              <!-- <div class=\\\"isle-container\\\">\\r\\n                <div class=\\\"isle-header\\\">Isle 1</div>\\r\\n                <select name=\\\"isle1-cities\\\" id=\\\"isle1-cities\\\">\\r\\n                  <option value=\\\"city1\\\">City 1</option>\\r\\n                  <option value=\\\"city2\\\">City 2</option>\\r\\n                </select>\\r\\n              </div> -->\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"input-wrapper\\\">\\r\\n      <input type=\\\"checkbox\\\" id=\\\"builder\\\" />\\r\\n      <label for=\\\"builder\\\">Builder</label>\\r\\n    </div>\\r\\n    <div class=\\\"input-wrapper\\\">\\r\\n      <input type=\\\"checkbox\\\" id=\\\"guard\\\" disabled />\\r\\n      <label for=\\\"guard\\\">Guard (in progress)</label>\\r\\n    </div>\\r\\n\\r\\n    <div id=\\\"button-panel\\\">\\r\\n      <button id=\\\"submit\\\">Submit</button>\\r\\n      <button type=\\\"reset\\\" id=\\\"cancel-all\\\">Cancel all</button>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"show-trigger\\\">\\r\\n    GPS\\r\\n  </div>\\r\\n</div>\";","export default \"<div id=\\\"build-container\\\" class=\\\"hidden\\\">\\r\\n  <div id=\\\"build-options\\\">\\r\\n  </div>\\r\\n  <div id=\\\"additional-queue\\\">\\r\\n\\r\\n  </div>\\r\\n</div>\\r\\n<button id=\\\"toggle-builder\\\" class=\\\"hidden\\\">Toggle builder</button>\";","export default \"#additional-queue {\\r\\n  display: flex;\\r\\n  gap: 8px;\\r\\n  box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.5);\\r\\n  border-radius: 4px;\\r\\n  padding: 4px;\\r\\n  max-width: 568px;\\r\\n  width: fit-content;\\r\\n  overflow-y: auto;\\r\\n  font-family: Arial, Helvetica, sans-serif;\\r\\n}\\r\\n\\r\\n.queue-item {\\r\\n  flex-shrink: 0;\\r\\n  position: relative;\\r\\n  width: 45px;\\r\\n  height: 45px;\\r\\n  background-size: cover;\\r\\n  background-position: center;\\r\\n}\\r\\n\\r\\n.queue-item .up {\\r\\n  position: absolute;\\r\\n  bottom: 0;\\r\\n  left: 0;\\r\\n  right: 0;\\r\\n  font-weight: bold;\\r\\n  color: lightgreen;\\r\\n  text-align: end;\\r\\n  margin: 2px;\\r\\n  font-size: 12px;\\r\\n  background-color: rgba(0, 0, 0, 0.4);\\r\\n}\\r\\n\\r\\n.queue-item .cancel {\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  right: 0;\\r\\n  font-weight: bold;\\r\\n  color: red;\\r\\n  cursor: pointer;\\r\\n  padding: 1px;\\r\\n  font-size: 10px;\\r\\n}\\r\\n\\r\\n.queue-item .cancel:hover {\\r\\n  transform: scale(1.4);\\r\\n  transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\nhidden {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n#build-container {\\r\\n  z-index: 2000;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  align-items: center;\\r\\n  gap: 8px;\\r\\n  position: fixed;\\r\\n  bottom: 80px;\\r\\n  left: 50%;\\r\\n  transform: translateX(-50%);\\r\\n  border: 1px solid darkgoldenrod;\\r\\n  border-radius: 4px;\\r\\n  padding: 4px;\\r\\n  overflow-x: auto;\\r\\n  max-width: 90%;\\r\\n  background-color: bisque;\\r\\n  width: fit-content;\\r\\n}\\r\\n\\r\\n#build-options {\\r\\n  display: flex;\\r\\n  gap: 4px;\\r\\n}\\r\\n\\r\\n.build-option {\\r\\n  position: relative;\\r\\n  width: 40px;\\r\\n  height: 40px;\\r\\n  background-size: cover;\\r\\n  background-position: center;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.build-option:hover {\\r\\n  transform: scale(1.1);\\r\\n  transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\n.build-options-add {\\r\\n  position: absolute;\\r\\n  top: 50%;\\r\\n  right: 50%;\\r\\n  transform: translate(50%, -50%);\\r\\n  font-weight: bold;\\r\\n  color: white;\\r\\n  cursor: pointer;\\r\\n  font-size: 16px;\\r\\n  user-select: none;\\r\\n}\\r\\n\\r\\n#toggle-builder {\\r\\n  cursor: pointer;\\r\\n  position: fixed;\\r\\n  bottom: 15px;\\r\\n  left: 50%;\\r\\n  transform: translateX(-50%);\\r\\n  font-size: 12px;\\r\\n  z-index: 1000;\\r\\n}\";","export default \"#info-container {\\r\\n  z-index: 3000 !important;\\r\\n  font-family: 'Roboto', sans-serif;\\r\\n  font-size: 0.9em;\\r\\n  position: absolute;\\r\\n  top: 10%;\\r\\n  left: 50%;  \\r\\n  transform: translateX(-50%);\\r\\n  background-color: rgba(1, 11, 152, 0.6); /* Zmiana na rgba z opacity 0.8 */\\r\\n  color: #fff;\\r\\n  padding: 5px 20px;\\r\\n  box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);\\r\\n  display: block;\\r\\n}\\r\\n\\r\\n.info-title {\\r\\n  font-weight: bold;\\r\\n}\\r\\n\\r\\n#info-container.hidden {\\r\\n  display: block;\\r\\n  animation: slideOut 0.4s;\\r\\n  animation-fill-mode: forwards;\\r\\n}\\r\\n\\r\\n@keyframes slideIn {\\r\\n  0% {\\r\\n    opacity: 0;\\r\\n    transform: translateX(-50%) translateY(-100%);\\r\\n  }\\r\\n  80% {\\r\\n    transform: translateX(-50%) translateY(20%);\\r\\n  }\\r\\n  100% {\\r\\n    opacity: 1;\\r\\n    transform: translateX(-50%) translateY(0);\\r\\n  }\\r\\n}\\r\\n\\r\\n@keyframes slideOut {\\r\\n  0% {\\r\\n    display: block;\\r\\n    opacity: 1;\\r\\n  }\\r\\n  100% {\\r\\n    opacity: 0;\\r\\n    display: none;\\r\\n    transform: translateX(0%) translateY(0);\\r\\n  }\\r\\n} \\r\\n\";","export default \"<div id=\\\"info-container\\\" class=\\\"hidden\\\">\\r\\n  <span class=\\\"info-title\\\"></span>\\r\\n  <span class=\\\"info-text\\\"></span>\\r\\n</div>\";","export default \"<div style=\\\"margin-top: 8px;\\\">\\r\\n  <input id=\\\"schedule-date\\\" type=\\\"date\\\" />\\r\\n  <input id=\\\"schedule-time\\\" type=\\\"text\\\" size=\\\"5\\\" placeholder=\\\"hh:mm:ss\\\" />\\r\\n  <button type=\\\"button\\\" id=\\\"schedule-button\\\">Schedule</button>\\r\\n  <p id=\\\"schedule-error\\\" style=\\\"color: red;font-size: 0.8em; margin: 4px; padding: 0px; font-weight: bold; background-color: white;\\\"></p>\\r\\n  <p id=\\\"schedule-info\\\" style=\\\"color: green;font-size: 0.8em; margin: 4px; padding: 0px; font-weight: bold; background-color: white;\\\"></p>\\r\\n</div>\";","export default \"<div id=\\\"table-container\\\" class=\\\"hidden\\\">\\r\\n  <table id=\\\"scheduler-lookup-table\\\">\\r\\n    <thead>\\r\\n      <tr>\\r\\n        <th id=\\\"operation-type\\\">Operation Type</th>\\r\\n        <th class=\\\"source-city\\\">Source City</th>\\r\\n        <th class=\\\"destination-city\\\">Destination City</th>\\r\\n        <th class=\\\"departure-time\\\">Departure Time</th>\\r\\n        <th class=\\\"arrival-time\\\">Arrival Time</th>\\r\\n        <th class=\\\"actions\\\">\\r\\n          <div class=\\\"close-icon\\\">\\r\\n            <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"12\\\" height=\\\"12\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"3\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" style=\\\"display: block;\\\">\\r\\n              <line x1=\\\"1\\\" y1=\\\"1\\\" x2=\\\"23\\\" y2=\\\"23\\\"></line>\\r\\n              <line x1=\\\"23\\\" y1=\\\"1\\\" x2=\\\"1\\\" y2=\\\"23\\\"></line>\\r\\n            </svg>\\r\\n          </div>\\r\\n        </th>\\r\\n      </tr>\\r\\n    </thead>\\r\\n    <tbody>\\r\\n      <tr>\\r\\n        <td colspan=\\\"6\\\" id=\\\"no-schedules\\\">No schedules</td>\\r\\n      </tr>\\r\\n    </tbody>\\r\\n  </table>\\r\\n</div>\\r\\n<button id=\\\"scheduler-toggle-button\\\">scheduler</button>\";","export default \"#table-container {\\r\\n  max-height: 50vh;\\r\\n  overflow-y: auto;\\r\\n  border: 1px solid #ddd;\\r\\n  width: fit-content;\\r\\n}\\r\\n\\r\\n#scheduler-lookup-table {\\r\\n  font-family: Arial, Helvetica, sans-serif;\\r\\n  border-collapse: collapse;\\r\\n  font-size: 18px;\\r\\n  text-align: left;\\r\\n  position: absolute;\\r\\n  top: 50%;\\r\\n  left: 50%;\\r\\n  transform: translate(-50%, -50%);\\r\\n  z-index: 1000;\\r\\n  background-color: antiquewhite;\\r\\n}\\r\\n\\r\\n#no-schedules {\\r\\n  text-align: center;\\r\\n  height: 50px;\\r\\n}\\r\\n\\r\\n.attack {\\r\\n  font-weight: 600;\\r\\n  color: #d32f2f;\\r\\n}\\r\\n\\r\\n.support {\\r\\n  font-weight: 600;\\r\\n  color: #2979ff;\\r\\n}\\r\\n\\r\\n#scheduler-lookup-table * {\\r\\n  font-size: 14px;\\r\\n}\\r\\n\\r\\n#scheduler-lookup-table th,\\r\\n#scheduler-lookup-table td {\\r\\n  border: 1px solid #ddd;\\r\\n  padding: 8px;\\r\\n}\\r\\n\\r\\n#scheduler-lookup-table th {\\r\\n  background-color: #f2f2f2;\\r\\n  font-weight: bold;\\r\\n}\\r\\n\\r\\n#scheduler-lookup-table td {\\r\\n  text-wrap: nowrap;\\r\\n}\\r\\n\\r\\n\\r\\n.cancel-button {\\r\\n  background-color: #f44336;\\r\\n  color: white;\\r\\n  border: none;\\r\\n  padding: 5px 10px;\\r\\n  cursor: pointer;\\r\\n  transition-duration: 150ms;\\r\\n}\\r\\n\\r\\n.cancel-button:hover {\\r\\n  background-color: #d32f2f;\\r\\n}\\r\\n\\r\\n#scheduler-toggle-button {\\r\\n  padding: 4px 8px;\\r\\n  font-size: 12px;\\r\\n  font-variant: small-caps;\\r\\n  cursor: pointer;\\r\\n  border-radius: 20px;\\r\\n  position: absolute;\\r\\n  bottom: 220px;\\r\\n  right: 10px;\\r\\n  margin: 0;\\r\\n  z-index: 1000;\\r\\n  transition-duration: 150ms;\\r\\n}\\r\\n\\r\\n#scheduler-toggle-button:hover {\\r\\n  background-color: #ddd;\\r\\n}\\r\\n\\r\\n.actions {\\r\\n  min-width: 22px;\\r\\n}\\r\\n\\r\\n.close-icon {\\r\\n  position: absolute;\\r\\n  cursor: pointer;\\r\\n  right: 5px;\\r\\n  top: 5px;\\r\\n  color: #000;\\r\\n}\\r\\n\\r\\n.close-icon:hover {\\r\\n  scale: 1.1;\\r\\n  transition-duration: 150ms;\\r\\n}\\r\\n\\r\\n.hidden {\\r\\n  display: none;\\r\\n}\";","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FarmTimeInterval = void 0;\nvar FarmTimeInterval;\n(function (FarmTimeInterval) {\n    FarmTimeInterval[FarmTimeInterval[\"FirstOption\"] = 300000] = \"FirstOption\";\n    FarmTimeInterval[FarmTimeInterval[\"SecondOption\"] = 1200000] = \"SecondOption\";\n    FarmTimeInterval[FarmTimeInterval[\"ThirdOption\"] = 5400000] = \"ThirdOption\";\n    FarmTimeInterval[FarmTimeInterval[\"FourthOption\"] = 14400000] = \"FourthOption\";\n})(FarmTimeInterval || (exports.FarmTimeInterval = FarmTimeInterval = {}));\nconst config = {\n    resources: {\n        minPopulationBuffer: 100,\n        storeAlmostFullPercentage: 0.9,\n    },\n    farmConfig: {\n        farmInterval: FarmTimeInterval.FirstOption,\n        humanize: false,\n        conflictingCities: {},\n    },\n    general: {\n        antyTimingMs: 9000,\n        applicationRefreshInterval: 30 * 60 * 1000, // 30 minutes\n        forcedRefresh: false,\n        switch: true,\n        farm: true,\n        builder: true,\n        guard: false,\n    }\n};\nexports.default = config;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst config_popup_css_1 = __importDefault(require(\"./config-popup.css\"));\nconst config_popup_html_1 = __importDefault(require(\"./config-popup.html\"));\nconst events_1 = __importDefault(require(\"events\"));\nconst config_manager_1 = __importDefault(require(\"../utility/config-manager\"));\nconst gps_config_1 = require(\"../../gps.config\");\nconst city_switch_manager_1 = __importDefault(require(\"../service/city/city-switch-manager\"));\nclass ConfigPopup extends events_1.default {\n    constructor() {\n        super();\n        this.conflictingCities = {};\n        this.isSwitchChecked = () => {\n            return this.switch;\n        };\n        this.isFarmChecked = () => {\n            return this.farm;\n        };\n        this.isBuilderChecked = () => {\n            return this.builder;\n        };\n        this.isGuardChecked = () => {\n            return this.guard;\n        };\n        this.getPlunderConfig = () => {\n        };\n        this.getManagersFlags = () => {\n            return {\n                farm: this.farm,\n                builder: this.builder,\n                guard: this.guard,\n            };\n        };\n        this.configManager = config_manager_1.default.getInstance();\n        this.config = this.configManager.getConfig();\n        this.switch = this.config.general.switch;\n        this.farm = this.config.general.farm;\n        this.builder = this.config.general.builder;\n        this.guard = this.config.general.guard;\n        this.farmInterval = this.config.farmConfig.farmInterval;\n        this.humanize = this.config.farmConfig.humanize;\n    }\n    initEventListeners() {\n        var _a;\n        const container = document.querySelector('#config-popup-container');\n        const switchCheckbox = container.querySelector('#city-switch');\n        const plunderCheckbox = container.querySelector('#farm');\n        const builderCheckbox = container.querySelector('#builder');\n        const guardCheckbox = container.querySelector('#guard');\n        const timeIntervalSelect = container.querySelector('#time-interval-select');\n        const showTrigger = container.querySelector('.show-trigger');\n        const closeTrigger = container.querySelector('#close-popup');\n        const humanizeCheckbox = container.querySelector('#humanize-checkbox');\n        if (!container)\n            throw new Error('\"#config-popup-container\" couldn\\'t be found.');\n        closeTrigger.addEventListener('click', () => {\n            if (!container.classList.contains('minimized'))\n                container.classList.add('minimized');\n        });\n        container.querySelectorAll('#button-panel button').forEach((btn) => btn.addEventListener('click', () => {\n            if (btn.type === 'reset') {\n                switchCheckbox.checked = false;\n                this.switch = false;\n                plunderCheckbox.checked = false;\n                this.farm = false;\n                builderCheckbox.checked = false;\n                this.builder = false;\n                guardCheckbox.checked = false;\n                this.guard = false;\n            }\n            const conflictingCitiesChanged = Object.keys(this.conflictingCities).some(isleId => this.conflictingCities[isleId] !== this.config.farmConfig.conflictingCities[isleId]);\n            // update config related fields and persist them to local storage if changed\n            if (this.config.farmConfig.farmInterval !== this.farmInterval ||\n                this.config.farmConfig.humanize !== this.humanize ||\n                this.config.general.switch !== this.switch ||\n                this.config.general.farm !== this.farm ||\n                this.config.general.builder !== this.builder ||\n                this.config.general.guard !== this.guard ||\n                conflictingCitiesChanged) {\n                // readability comment --------------------------------------------------------------\n                this.config.farmConfig.farmInterval = this.farmInterval;\n                this.config.farmConfig.humanize = this.humanize;\n                this.config.general.switch = this.switch;\n                this.config.general.farm = this.farm;\n                this.config.general.builder = this.builder;\n                this.config.general.guard = this.guard;\n                this.config.farmConfig.conflictingCities = this.conflictingCities;\n                this.configManager.persistConfig();\n            }\n            if (this.farmInterval === gps_config_1.FarmTimeInterval.FourthOption) {\n                alert('Farmienie ustawione na 4h/8h, odśwież stronę jeżeli to błąd!');\n            }\n            container.classList.add('minimized');\n            this.emit('managersChange');\n        }));\n        showTrigger.addEventListener('click', () => {\n            container.classList.contains('minimized') && container.classList.remove('minimized');\n        });\n        switchCheckbox.addEventListener('change', () => {\n            this.switch = switchCheckbox.checked;\n        });\n        plunderCheckbox.addEventListener('change', () => {\n            this.farm = plunderCheckbox.checked;\n        });\n        builderCheckbox.addEventListener('change', () => {\n            this.builder = builderCheckbox.checked;\n        });\n        guardCheckbox.addEventListener('change', () => {\n            this.guard = guardCheckbox.checked;\n        });\n        timeIntervalSelect.addEventListener('change', () => {\n            this.farmInterval = Number(timeIntervalSelect.value);\n            console.log('this.farmInterval changed to: ', this.farmInterval);\n        });\n        // farm section\n        const farmSection = (_a = container.querySelector('#farm')) === null || _a === void 0 ? void 0 : _a.parentElement;\n        const farmSectionContainer = farmSection.querySelector('.expandable-section');\n        const farmSectionArrow = farmSection.querySelector('.arrow-down');\n        farmSectionArrow.addEventListener('click', () => {\n            farmSectionContainer.classList.toggle('hidden');\n            farmSectionArrow.classList.toggle('rotate');\n        });\n        humanizeCheckbox.addEventListener('change', () => {\n            this.humanize = humanizeCheckbox.checked;\n        });\n        // END farm section\n    }\n    createInitialElements() {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const container = document.createElement('div');\n            container.innerHTML = config_popup_html_1.default;\n            // get initial data from config and change\n            container.querySelector('#city-switch').checked = this.switch;\n            container.querySelector('#farm').checked = this.farm;\n            container.querySelector('#builder').checked = this.builder;\n            container.querySelector('#guard').checked = this.guard;\n            // farm section\n            const intervalSelectElement = container.querySelector('#time-interval-select');\n            const farmIntervalValuesUnparsed = Object.values(gps_config_1.FarmTimeInterval);\n            const farmIntervalValues = farmIntervalValuesUnparsed.slice((farmIntervalValuesUnparsed.length / 2));\n            farmIntervalValues.forEach((value) => {\n                const option = document.createElement('option');\n                option.value = value.toString();\n                option.textContent = this.mapTimeIntervalKeyToText(value);\n                intervalSelectElement.appendChild(option);\n            });\n            container.querySelector('#time-interval-select').value = (_a = this.config.farmConfig.farmInterval.toString()) !== null && _a !== void 0 ? _a : gps_config_1.FarmTimeInterval.FirstOption.toString();\n            const humanizeCheckbox = container.querySelector('#humanize-checkbox');\n            humanizeCheckbox.checked = this.config.farmConfig.humanize;\n            // await this.createConfictingCitiesSelects();\n            // END farm section\n            return container;\n        });\n    }\n    createConfictingCitiesSelects() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const listOfCities = (yield city_switch_manager_1.default.getInstance()).getCityList();\n            const uniqueIsleGrids = Array.from(new Set(listOfCities.map(city => city.isleId)));\n            const arrayOfArraysOfCitiesOnTheSameIsland = uniqueIsleGrids.map(isleId => listOfCities.filter(city => city.isleId === isleId));\n            const areAnyConflicts = arrayOfArraysOfCitiesOnTheSameIsland.some(array => array.length > 1);\n            const conflictingCitiesContainer = document.querySelector('#conflicting-cities-container');\n            const conflictingCitiesArrow = conflictingCitiesContainer.querySelector('.arrow-down');\n            const conflictingCitiesContent = conflictingCitiesContainer.querySelector('.section-content');\n            if (!areAnyConflicts) {\n                conflictingCitiesContainer.classList.add('hidden');\n            }\n            else {\n                conflictingCitiesContainer.classList.remove('hidden');\n                /*\n                 *     <!-- <div class=\"isle-container\">\n                 *         <div class=\"isle-header\">Isle 1</div>\n                 *         <select name=\"isle1-cities\" id=\"isle1-cities\">\n                 *         <option value=\"city1\">City 1</option>\n                 *         <option value=\"city2\">City 2</option>\n                 *       </select>\n                 *     </div> -->\n                 */\n                arrayOfArraysOfCitiesOnTheSameIsland.forEach((arrayOfCities, index) => {\n                    const isleContainer = document.createElement('div');\n                    isleContainer.className = 'isle-container';\n                    const isleHeader = document.createElement('div');\n                    isleHeader.className = 'isle-header';\n                    isleHeader.textContent = `Isle ${arrayOfCities[0].isleId}`;\n                    isleContainer.appendChild(isleHeader);\n                    const isleCitiesSelect = document.createElement('select');\n                    isleCitiesSelect.name = `isle-${arrayOfCities[0].isleId}-cities`;\n                    isleCitiesSelect.id = `isle-${arrayOfCities[0].isleId}-cities`;\n                    isleContainer.appendChild(isleCitiesSelect);\n                    arrayOfCities.forEach((city) => {\n                        const option = document.createElement('option');\n                        option.value = city.name;\n                        option.textContent = city.name;\n                        isleCitiesSelect.appendChild(option);\n                    });\n                    isleCitiesSelect.value = arrayOfCities[0].name;\n                    this.conflictingCities[arrayOfCities[0].isleId] = arrayOfCities[0];\n                    isleCitiesSelect.addEventListener('change', () => {\n                        const selectedCity = arrayOfCities.find(city => city.name === isleCitiesSelect.value);\n                        if (selectedCity) {\n                            this.conflictingCities[arrayOfCities[0].isleId] = selectedCity;\n                        }\n                    });\n                    conflictingCitiesContent.appendChild(isleContainer);\n                });\n            }\n            conflictingCitiesArrow.addEventListener('click', () => {\n                conflictingCitiesContent.classList.toggle('hidden');\n                conflictingCitiesArrow.classList.toggle('rotate');\n            });\n        });\n    }\n    mapTimeIntervalKeyToText(value) {\n        switch (value) {\n            case gps_config_1.FarmTimeInterval.FirstOption:\n                return \"5m/10m\";\n            case gps_config_1.FarmTimeInterval.SecondOption:\n                return \"20m/40m\";\n            case gps_config_1.FarmTimeInterval.ThirdOption:\n                return \"1h 30m/3h\";\n            case gps_config_1.FarmTimeInterval.FourthOption:\n                return \"4h/8h\";\n            default:\n                return \"Unknown interval\";\n        }\n    }\n    addStyle() {\n        const style = document.createElement('style');\n        style.textContent = config_popup_css_1.default;\n        document.head.appendChild(style);\n    }\n    render() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.addStyle();\n            // utwórz contener, ustaw atrybuty i body\n            const configWindowElement = yield this.createInitialElements();\n            document.body.appendChild(configWindowElement);\n            this.initEventListeners();\n        });\n    }\n    minimize() {\n        const container = document.querySelector('#config-popup-container');\n        container === null || container === void 0 ? void 0 : container.classList.add('minimized');\n    }\n}\nexports.default = ConfigPopup;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst master_manager_1 = __importDefault(require(\"./service/master/master-manager\"));\nconst ui_utility_1 = require(\"./utility/ui-utility\");\nconst main = () => __awaiter(void 0, void 0, void 0, function* () {\n    console.log('VERY POLITE GPS v.0.5.0 MVP walikonie special edition (c) 2024');\n    const masterManager = yield master_manager_1.default.getInstance();\n});\n(0, ui_utility_1.onPageLoad)(main);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ArmyMovement {\n    constructor() {\n        this.callback = null;\n    }\n    static getInstance() {\n        if (!ArmyMovement.instance) {\n            ArmyMovement.instance = new ArmyMovement();\n            ArmyMovement.instance.mountObserver();\n        }\n        return ArmyMovement.instance;\n    }\n    mountObserver() {\n        const observer = new MutationObserver((mutations) => {\n            mutations.forEach((mutation) => {\n                if (mutation.type === 'childList') {\n                    for (const node of mutation.addedNodes) {\n                        if (node instanceof HTMLElement && node.getAttribute('data-commandtype') === 'unit_movements' && node.getAttribute('data-cancelable') != '-1') {\n                            if (this.callback) {\n                                this.callback(node.id);\n                                this.callback = null;\n                                return;\n                            }\n                        }\n                    }\n                }\n            });\n        });\n        const element = document.querySelector('#toolbar_activity_commands_list .content.js-dropdown-item-list');\n        observer.observe(element, {\n            childList: true,\n            subtree: false,\n        });\n    }\n    setCallback(callback) {\n        this.callback = callback;\n    }\n}\nexports.default = ArmyMovement;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.buildings = exports.buildingsSelectors = void 0;\nconst ui_utility_1 = require(\"../../../utility/ui-utility\");\nconst buildActionSafe = (selector) => __awaiter(void 0, void 0, void 0, function* () {\n    const cityViewBtn = document.querySelector('[name=\"city_overview\"]');\n    if (!(cityViewBtn === null || cityViewBtn === void 0 ? void 0 : cityViewBtn.classList.contains('checked'))) {\n        cityViewBtn === null || cityViewBtn === void 0 ? void 0 : cityViewBtn.click();\n    }\n    const buildModeButton = document.querySelector('[class=\"construction_queue_build_button\"] div');\n    if (!buildModeButton.classList.contains('active')) {\n        buildModeButton.click();\n    }\n    yield (0, ui_utility_1.waitForElement)(selector).then((element) => element.click());\n});\nexports.buildingsSelectors = {\n    buildButton: `.btn_build.build_button`,\n    currentLvl: `[class=\"twa_content js-content-area\"] span:nth-of-type(3)`,\n    disabled: 'disabled'\n};\n// .city_overview_overlay.main .btn_build.build_button\nexports.buildings = {\n    main: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/main.png)',\n        elementSelector: '.city_overview_overlay.main',\n        currentLvlElSelector: '.city_overview_overlay.main [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Senate',\n        buildAction: () => buildActionSafe('.city_overview_overlay.main .btn_build.build_button'),\n    },\n    hide: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/hide.png)',\n        elementSelector: '.city_overview_overlay.hide',\n        currentLvlElSelector: '.city_overview_overlay.hide [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Cave',\n        buildAction: () => buildActionSafe('.city_overview_overlay.hide .btn_build.build_button'),\n    },\n    lumber: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/lumber.png)',\n        elementSelector: '.city_overview_overlay.lumber',\n        currentLvlElSelector: '.city_overview_overlay.lumber [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Lumber mill',\n        buildAction: () => buildActionSafe('.city_overview_overlay.lumber .btn_build.build_button'),\n    },\n    stoner: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/stoner.png)',\n        elementSelector: '.city_overview_overlay.stoner',\n        currentLvlElSelector: '.city_overview_overlay.stoner [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Quarry',\n        buildAction: () => buildActionSafe('.city_overview_overlay.stoner .btn_build.build_button'),\n    },\n    ironer: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/ironer.png)',\n        elementSelector: '.city_overview_overlay.ironer',\n        currentLvlElSelector: '.city_overview_overlay.ironer [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Silver mine',\n        buildAction: () => buildActionSafe('.city_overview_overlay.ironer .btn_build.build_button'),\n    },\n    market: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/market.png)',\n        elementSelector: '.city_overview_overlay.market',\n        currentLvlElSelector: '.city_overview_overlay.market [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Market',\n        buildAction: () => buildActionSafe('.city_overview_overlay.market .btn_build.build_button'),\n    },\n    docks: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/docks.png)',\n        elementSelector: '.city_overview_overlay.docks',\n        currentLvlElSelector: '.city_overview_overlay.docks [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Harbor',\n        buildAction: () => buildActionSafe('.city_overview_overlay.docks .btn_build.build_button'),\n    },\n    barracks: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/barracks.png)',\n        elementSelector: '.city_overview_overlay.barracks',\n        currentLvlElSelector: '.city_overview_overlay.barracks [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Barracks',\n        buildAction: () => buildActionSafe('.city_overview_overlay.barracks .btn_build.build_button'),\n    },\n    wall: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/wall.png)',\n        elementSelector: '.city_overview_overlay.wall',\n        currentLvlElSelector: '.city_overview_overlay.wall [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'City wall',\n        buildAction: () => buildActionSafe('.city_overview_overlay.wall .btn_build.build_button'),\n    },\n    storage: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/storage.png)',\n        elementSelector: '.city_overview_overlay.storage',\n        currentLvlElSelector: '.city_overview_overlay.storage [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Warehouse',\n        buildAction: () => buildActionSafe('.city_overview_overlay.storage .btn_build.build_button'),\n    },\n    farm: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/farm.png)',\n        elementSelector: '.city_overview_overlay.farm',\n        currentLvlElSelector: '.city_overview_overlay.farm [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Farm',\n        buildAction: () => buildActionSafe('.city_overview_overlay.farm .btn_build.build_button'),\n    },\n    academy: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/academy.png)',\n        elementSelector: '.city_overview_overlay.academy',\n        currentLvlElSelector: '.city_overview_overlay.academy [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Academy',\n        buildAction: () => buildActionSafe('.city_overview_overlay.academy .btn_build.build_button'),\n    },\n    temple: {\n        backgroundImageProp: 'url(https://gpen.innogamescdn.com/images/game/main/temple.png)',\n        elementSelector: '.city_overview_overlay.temple',\n        currentLvlElSelector: '.city_overview_overlay.temple [class=\"twa_content js-content-area\"] span:nth-of-type(3)',\n        name: 'Temple',\n        buildAction: () => buildActionSafe('.city_overview_overlay.temple .btn_build.build_button'),\n    }\n};\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst plain_utility_1 = require(\"../../../utility/plain-utility\");\nconst ui_lock_1 = __importDefault(require(\"../../../utility/ui-lock\"));\nconst ui_utility_1 = require(\"../../../utility/ui-utility\");\nconst queue_css_1 = __importDefault(require(\"./queue.css\"));\nconst builder_prod_html_1 = __importDefault(require(\"./builder-prod.html\"));\nconst buildings_1 = require(\"./buildings\");\nconst resource_manager_1 = __importDefault(require(\"../../resources/resource-manager\"));\nconst city_switch_manager_1 = __importDefault(require(\"../city-switch-manager\"));\nconst general_info_1 = __importDefault(require(\"../../master/ui/general-info\"));\nclass CityBuilder {\n    constructor() {\n        this.allowUnsequentialBuilds = false;\n        this.allowCriticalBuilds = true;\n        this.RUN = false;\n        this.mainQueue = [];\n    }\n    static getInstance() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!CityBuilder.instance) {\n                CityBuilder.instance = new CityBuilder();\n                CityBuilder.instance.lock = ui_lock_1.default.getInstance();\n                CityBuilder.instance.resourceManager = resource_manager_1.default.getInstance();\n                CityBuilder.instance.citySwitchManager = yield city_switch_manager_1.default.getInstance();\n                CityBuilder.instance.generalInfo = general_info_1.default.getInstance();\n                CityBuilder.instance.addStyle();\n                CityBuilder.instance.renderUI();\n                CityBuilder.instance.loadQueueFromStorage();\n                CityBuilder.instance.listenToCitySwitch();\n            }\n            return CityBuilder.instance;\n        });\n    }\n    renderUI() {\n        const container = document.createElement('div');\n        container.innerHTML = builder_prod_html_1.default;\n        document.body.appendChild(container);\n        this.addBuildButtons();\n        this.initToggleButtonEvents();\n    }\n    initToggleButtonEvents() {\n        const button = document.getElementById(CityBuilder.toggleBuilderButtonId);\n        button.addEventListener('click', () => {\n            const buildContainer = document.getElementById(CityBuilder.buildContainerId);\n            buildContainer.classList.toggle('hidden');\n            if (!buildContainer.classList.contains('hidden')) {\n                this.tryGoToBuildMode('current');\n            }\n            else {\n                this.tryExitBuildMode();\n            }\n        });\n    }\n    listenToCitySwitch() {\n        this.citySwitchManager.on('cityChange', (city) => {\n            const currentCityQueue = this.mainQueue.find(queue => queue.city === city);\n            this.rerenderQueue(currentCityQueue);\n        });\n    }\n    /*\n    <div id=\"build-container\">\n      <div id=\"build-options\">\n        <div class=\"build-option\"\n          style=\"background-image: url(https://gpen.innogamescdn.com/images/game/main/lumber.png)\">\n          <div class=\"build-options-add\">+</div>\n        </div>\n      </div>\n      <div id=\"additional-queue\">\n  \n      </div>\n    </div>\n    <button id=\"show-builder\">Toggle builder</button>\n    */\n    addBuildButtons() {\n        // <div id=\"build-container\">\n        const buildOptions = document.getElementById(CityBuilder.buildOptionsContainerId);\n        // <div class=\"build-option\"\n        Object.values(buildings_1.buildings).forEach(building => {\n            const button = document.createElement('div');\n            button.className = CityBuilder.buildOptionItemClass;\n            button.style.backgroundImage = building.backgroundImageProp;\n            buildOptions.appendChild(button);\n            // <div class=\"build-options-add\">+</div>\n            const addIcon = document.createElement('div');\n            addIcon.className = CityBuilder.buildOptionItemAddClass;\n            addIcon.innerHTML = '+';\n            button.appendChild(addIcon);\n            button.addEventListener('click', () => {\n                this.onOptionBuildButtonClick(building);\n            });\n        });\n    }\n    tryGoToBuildMode(city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            if (city !== 'current') {\n                yield city.switchAction();\n            }\n            (_a = document.querySelector('[name=\"city_overview\"]')) === null || _a === void 0 ? void 0 : _a.click();\n            const buildModeButton = yield (0, ui_utility_1.waitForElement)('[class=\"construction_queue_build_button\"] div', 2000);\n            if (!buildModeButton.classList.contains('active')) {\n                buildModeButton.click();\n            }\n        });\n    }\n    tryExitBuildMode() {\n        const buildModeButton = document.querySelector('[class=\"construction_queue_build_button\"] div');\n        if (buildModeButton === null || buildModeButton === void 0 ? void 0 : buildModeButton.classList.contains('active')) {\n            buildModeButton.click();\n        }\n    }\n    onOptionBuildButtonClick(building) {\n        const currentCity = this.citySwitchManager.getCurrentCity();\n        let currentCityQueue = this.mainQueue.find((queueObj) => queueObj.city.name === currentCity.name);\n        if (!currentCityQueue) {\n            currentCityQueue = {\n                city: currentCity,\n                queue: [],\n                schedule: null\n            };\n            this.mainQueue.push(currentCityQueue);\n        }\n        this.addToQueue(building, currentCityQueue);\n    }\n    /**\n     * Tworzy element DOM przedstawiający element kolejki i zwraca go.\n     * @param building\n     * @returns\n     */\n    addBuldingToUIQueue(queueItem, position = 'end', cityQueue) {\n        const additionalQueue = document.getElementById('additional-queue');\n        const queueItemEl = document.createElement('div');\n        queueItemEl.className = CityBuilder.queueItemClass;\n        queueItemEl.style.backgroundImage = queueItem.building.backgroundImageProp;\n        queueItemEl.setAttribute('data-id', queueItem.id);\n        position === 'start' ? this.appendChildAtIndex(additionalQueue, queueItemEl, 0) : additionalQueue.appendChild(queueItemEl);\n        // <div class=\"up\">+1</div>\n        const upButton = document.createElement('div');\n        upButton.className = CityBuilder.upButtonClass;\n        upButton.textContent = `+${queueItem.toLvl}`;\n        queueItemEl.appendChild(upButton);\n        // <div class=\"cancel\">&#x2715;</div>\n        const cancelButton = document.createElement('div');\n        cancelButton.className = CityBuilder.cancelButtonClass;\n        cancelButton.innerHTML = '&#x2715;';\n        queueItemEl.appendChild(cancelButton);\n        cancelButton.addEventListener('click', () => {\n            const index = cityQueue.queue.findIndex(item => item.id === queueItem.id);\n            if (index !== -1) {\n                if (index === 0) {\n                    cityQueue.queue.shift();\n                    if (cityQueue.schedule) {\n                        clearInterval(cityQueue.schedule);\n                        clearTimeout(cityQueue.schedule);\n                        cityQueue.schedule = null;\n                    }\n                    this.revalidateQueueItemLevels(queueItem.building, index, cityQueue);\n                    this.handleBuildSchedule(cityQueue);\n                }\n                else {\n                    cityQueue.queue.splice(index, 1);\n                    this.revalidateQueueItemLevels(queueItem.building, index, cityQueue);\n                }\n                queueItemEl.remove();\n                this.saveQueueToStorage();\n            }\n            else {\n                console.log('Item not found in queue');\n            }\n        });\n        console.log('queueItemEl', queueItemEl);\n        return queueItemEl;\n    }\n    revalidateQueueItemLevels(building, fromIndex, cityQueue) {\n        console.log('--------revalidateQueueItemLevels', building, fromIndex);\n        const itemsToRevalidate = cityQueue.queue.filter((item, index) => index >= fromIndex && item.building.name === building.name);\n        itemsToRevalidate.forEach((item) => {\n            const newToLvl = item.toLvl - 1;\n            const newId = `${item.building.name}-${newToLvl}`;\n            const queueItemEl = document.querySelector(`[data-id=\"${item.id}\"]`);\n            if (queueItemEl) {\n                queueItemEl.querySelector('.up').textContent = `+${newToLvl}`;\n                queueItemEl.setAttribute('data-id', newId);\n            }\n            item.toLvl = newToLvl;\n            item.id = newId;\n        });\n    }\n    addToQueue(building, cityQueue) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.tryGoToBuildMode('current');\n            let currentLvl;\n            const buildingElement = yield (0, ui_utility_1.waitForElement)(building.elementSelector, 1000).catch(() => null);\n            if (buildingElement) {\n                const buildingcurrentLvlText = yield (0, ui_utility_1.waitForElement)(`${building.elementSelector} ${buildings_1.buildingsSelectors.currentLvl}`, 1000)\n                    .then(el => el.textContent)\n                    .catch(() => null);\n                currentLvl = (buildingcurrentLvlText !== 'max' || buildingcurrentLvlText !== null) ? Number(buildingcurrentLvlText) : Infinity;\n            }\n            else {\n                currentLvl = 0;\n            }\n            if (currentLvl === Infinity) {\n                return;\n            }\n            const lvlCounter = cityQueue.queue.filter(item => item.building.name === building.name).length + 1;\n            const id = `${building.name}-${currentLvl + lvlCounter}`;\n            const queueItem = { id, building, toLvl: currentLvl + lvlCounter };\n            console.log('queueItem', queueItem);\n            this.addBuldingToUIQueue(queueItem, 'end', cityQueue);\n            cityQueue.queue.push(queueItem);\n            this.saveQueueToStorage();\n            console.log('pushed to queue:', JSON.parse(JSON.stringify(cityQueue.queue)));\n            this.buildOrSchedule(cityQueue);\n        });\n    }\n    buildOrSchedule(cityQueue) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (cityQueue.queue.length === 1) {\n                console.log('\\t-queue has only one item, handling immediately');\n                if (cityQueue.schedule) {\n                    clearInterval(cityQueue.schedule);\n                    clearTimeout(cityQueue.schedule);\n                    cityQueue.schedule = null;\n                }\n                yield this.handleBuildSchedule(cityQueue);\n            }\n            else {\n                console.log('\\t-queue has more than one item, waiting for its turn');\n            }\n        });\n    }\n    performBuildSchedule(cityQueue) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!cityQueue || !cityQueue.queue.length) {\n                if (!(yield this.isQueueEmpty(cityQueue.city))) {\n                    yield this.setTimeoutForNextSpeedUpAndSchedule(cityQueue);\n                }\n                return;\n            }\n            console.log('performBuildSchedule with queue:', JSON.parse(JSON.stringify(cityQueue.queue)));\n            if (yield this.isEmptySlot(cityQueue.city)) {\n                const item = cityQueue.queue[0];\n                yield this.checkIfItemCanBeBuiltAndAddDeleteOrSchedule(cityQueue, item);\n            }\n            else {\n                yield this.setTimeoutForNextSpeedUpAndSchedule(cityQueue);\n            }\n        });\n    }\n    setTimeoutForNextSpeedUpAndSchedule(cityQueue) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const timeToSpeedUp = yield this.getTimeToCanSpeedUp(cityQueue.city).catch(() => null);\n            if (timeToSpeedUp === null) {\n                console.log('\\t-timeToSpeedUp is null, performing build schedule');\n                yield this.performBuildSchedule(cityQueue);\n                return;\n            }\n            if (timeToSpeedUp <= 0) {\n                console.log('\\t-will speed up first build immediately');\n                const emptySlots = this.getEmptySlotsCount();\n                yield this.speedUpFirstBuild(cityQueue.city);\n                yield this.untilEmptyslotsAreEqual(emptySlots + 1);\n                yield this.performBuildSchedule(cityQueue);\n            }\n            else {\n                console.log('\\t-speed up will be scheduled at:', (0, plain_utility_1.getTimeInFuture)(timeToSpeedUp));\n                cityQueue.schedule = setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n                    try {\n                        console.log('setTimeoutForNextSpeedUpAndSchedule, wait for lock', cityQueue.city.name);\n                        yield this.lock.acquire();\n                        console.log('setTimeoutForNextSpeedUpAndSchedule, take lock', cityQueue.city.name);\n                        const emptySlots = this.getEmptySlotsCount();\n                        yield this.speedUpFirstBuild(cityQueue.city);\n                        yield this.untilEmptyslotsAreEqual(emptySlots + 1);\n                        yield this.performBuildSchedule(cityQueue);\n                    }\n                    catch (e) {\n                        console.warn('CityBuilder.setTimeoutForNextSpeedUpAndSchedule().catch', e);\n                    }\n                    finally {\n                        console.log('setTimeoutForNextSpeedUpAndSchedule, release lock', cityQueue.city.name);\n                        this.lock.release();\n                    }\n                }), timeToSpeedUp);\n            }\n        });\n    }\n    checkIfItemCanBeBuiltAndAddDeleteOrSchedule(cityQueue_1, item_1) {\n        return __awaiter(this, arguments, void 0, function* (cityQueue, item, forced = false) {\n            const building = item.building;\n            console.log('check if can build item:', item);\n            const canBuild = yield this.canBuild(building, cityQueue.city);\n            console.log('\\t-canBuild:', canBuild);\n            if (canBuild === true) {\n                console.log('\\t-canBuild is true, building...');\n                const emptySlots = this.getEmptySlotsCount();\n                yield building.buildAction();\n                yield this.untilEmptyslotsAreEqual(emptySlots - 1);\n                yield this.shiftQueueCleanScheduleAndTryNext(item, cityQueue);\n            }\n            else if (canBuild === 'maxed') {\n                console.log('\\t-canBuild is maxed or not possible at the moment, shifting queue');\n                if (forced) {\n                    this.clearUIQueueItem(cityQueue.queue[1]);\n                    cityQueue.queue.splice(1, 1);\n                    yield this.shiftQueueCleanScheduleAndTryNext(item, cityQueue);\n                }\n                else {\n                    yield this.shiftQueueCleanScheduleAndTryNext(item, cityQueue);\n                }\n            }\n            else if (canBuild === 'impossible') {\n                if (!(yield this.isQueueEmpty(cityQueue.city))) {\n                    console.log('\\t-canBuild is impossible, but queue is not empty, scheduling build because maybe after that it will be possible');\n                    yield this.setTimeoutForNextSpeedUpAndSchedule(cityQueue);\n                }\n                else {\n                    console.log('\\t-canBuild is impossible, and queue is empty, element must be deleted');\n                    yield this.shiftQueueCleanScheduleAndTryNext(item, cityQueue);\n                }\n            }\n            else {\n                const resourcesInfo = yield this.areResourcesStackable(building, cityQueue.city);\n                if (resourcesInfo.areStackable === true) {\n                    // const timeToSpeedUp = !(await this.isQueueEmpty(cityQueue.city)) ?\n                    //   await this.getTimeToCanSpeedUp(cityQueue.city).catch(() => null) :\n                    //   null;\n                    // const buildRetryCallback = () => setInterval(async () => {\n                    //   try {\n                    //     console.log('checkIfItemCanBeBuiltAndAddDeleteOrSchedule, wait for lock', cityQueue.city.name);\n                    //     await this.lock.acquire();\n                    //     console.log('checkIfItemCanBeBuiltAndAddDeleteOrSchedule, take lock', cityQueue.city.name);\n                    //     if ((await this.resourceManager.hasEnoughResources(resourcesInfo.requiredResources, cityQueue.city)) && (await this.canBuild(building, cityQueue.city))) {\n                    //       console.log('\\t\\t-canBuild is true, building...');\n                    //       const emptySlots = this.getEmptySlotsCount();\n                    //       await building.buildAction();\n                    //       await this.untilEmptyslotsAreEqual(emptySlots - 1);\n                    //       await this.shiftQueueCleanScheduleAndTryNext(item, cityQueue);\n                    //     }\n                    //   } catch (e) {\n                    //     console.warn('CityBuilder.checkIfItemCanBeBuiltAndAddDeleteOrSchedule().catch', e);\n                    //   } finally {\n                    //     console.log('checkIfItemCanBeBuiltAndAddDeleteOrSchedule, release lock', cityQueue.city.name);\n                    //     this.lock.release();\n                    //   }\n                    // }, CityBuilder.BUILD_RETRY_INTERVAL);\n                    // if (timeToSpeedUp && timeToSpeedUp < CityBuilder.BUILD_RETRY_INTERVAL) {\n                    //   cityQueue.schedule = setTimeout(async () => {\n                    //     try {\n                    //       await this.lock.acquire();\n                    //       await this.speedUpFirstBuild(cityQueue.city);\n                    //       cityQueue.schedule = buildRetryCallback();\n                    //     } catch (e) {\n                    //       console.warn('CityBuilder.checkIfItemCanBeBuiltAndAddDeleteOrSchedule().catch', e);\n                    //     } finally {\n                    //       this.lock.release();\n                    //     }\n                    //   }, timeToSpeedUp);\n                    // }\n                    console.log('\\t-areResourcesStackable is true, scheduling build');\n                    cityQueue.schedule = setInterval(() => __awaiter(this, void 0, void 0, function* () {\n                        try {\n                            console.log('checkIfItemCanBeBuiltAndAddDeleteOrSchedule, wait for lock', cityQueue.city.name);\n                            yield this.lock.acquire();\n                            console.log('checkIfItemCanBeBuiltAndAddDeleteOrSchedule, take lock', cityQueue.city.name);\n                            if ((yield this.resourceManager.hasEnoughResources(resourcesInfo.requiredResources, cityQueue.city)) && (yield this.canBuild(building, cityQueue.city))) {\n                                console.log('\\t\\t-canBuild is true, building...');\n                                const emptySlots = this.getEmptySlotsCount();\n                                yield building.buildAction();\n                                yield this.untilEmptyslotsAreEqual(emptySlots - 1);\n                                yield this.shiftQueueCleanScheduleAndTryNext(item, cityQueue);\n                            }\n                        }\n                        catch (e) {\n                            console.warn('CityBuilder.checkIfItemCanBeBuiltAndAddDeleteOrSchedule().catch', e);\n                        }\n                        finally {\n                            console.log('checkIfItemCanBeBuiltAndAddDeleteOrSchedule, release lock', cityQueue.city.name);\n                            this.lock.release();\n                        }\n                    }), CityBuilder.BUILD_RETRY_INTERVAL);\n                }\n                else if (resourcesInfo.areStackable === 'population' && this.allowCriticalBuilds) {\n                    console.log('\\t\\t-areResourcesStackable is population, adding farm to queue');\n                    const farm = buildings_1.buildings.farm;\n                    const buildingLvl = yield this.getBuildingCurrentLvl(farm);\n                    const id = `${farm.name}-${buildingLvl}`;\n                    const queueItem = { id, building, toLvl: buildingLvl + 1 };\n                    cityQueue.queue.unshift(queueItem);\n                    this.addBuldingToUIQueue(queueItem, 'start', cityQueue);\n                    yield this.performBuildSchedule(cityQueue);\n                }\n                else if (resourcesInfo.areStackable === 'storage' && this.allowCriticalBuilds) {\n                    console.log('\\t\\t-areResourcesStackable is storage, adding storage to queue');\n                    const storage = buildings_1.buildings.storage;\n                    const buildingLvl = yield this.getBuildingCurrentLvl(storage);\n                    const id = `${storage.name}-${buildingLvl}`;\n                    const queueItem = { id, building, toLvl: buildingLvl + 1 };\n                    cityQueue.queue.unshift(queueItem);\n                    this.addBuldingToUIQueue(queueItem, 'start', cityQueue);\n                    yield this.performBuildSchedule(cityQueue);\n                }\n                else if (resourcesInfo.areStackable === 'alreadyStacked' && !(yield this.isQueueEmpty(cityQueue.city))) {\n                    console.log('\\t\\t-areResourcesStackable is alreadyStacked, scheduling build');\n                    yield this.setTimeoutForNextSpeedUpAndSchedule(cityQueue);\n                }\n                else {\n                    console.log('Item cannot be scheduled, because it has not met requirements');\n                    yield this.shiftQueueCleanScheduleAndTryNext(item, cityQueue);\n                }\n            }\n        });\n    }\n    getBuildingCurrentLvl(building) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const buildingcurrentLvlText = (yield (0, ui_utility_1.waitForElement)(`${building.elementSelector} ${buildings_1.buildingsSelectors.currentLvl}`)).textContent;\n            const currentLvl = buildingcurrentLvlText !== 'max' ? Number(buildingcurrentLvlText) : Infinity;\n            return currentLvl;\n        });\n    }\n    clearUIQueueItem(item) {\n        const queueItemEl = document.querySelector(`[data-id=\"${item.id}\"]`);\n        if (queueItemEl) {\n            queueItemEl.remove();\n        }\n    }\n    getEmptySlotsCount() {\n        return document.querySelectorAll('.construction_queue_order_container.instant_buy .js-queue-item.empty_slot').length;\n    }\n    untilEmptyslotsAreEqual(emptySlots) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise((res) => {\n                const interval = setInterval(() => {\n                    if (this.getEmptySlotsCount() === emptySlots) {\n                        console.log('\\t-emptyslotsAreEqual:', emptySlots);\n                        clearInterval(interval);\n                        res();\n                    }\n                }, 333);\n            });\n        });\n    }\n    shiftQueueCleanScheduleAndTryNext(item, cityQueue) {\n        return __awaiter(this, void 0, void 0, function* () {\n            cityQueue.queue.shift();\n            this.saveQueueToStorage();\n            if (cityQueue.schedule) {\n                clearInterval(cityQueue.schedule);\n                clearTimeout(cityQueue.schedule);\n                cityQueue.schedule = null;\n            }\n            this.clearUIQueueItem(item);\n            yield this.performBuildSchedule(cityQueue);\n        });\n    }\n    goToCityView() {\n        const cityViewBtn = document.querySelector('[name=\"city_overview\"]');\n        cityViewBtn === null || cityViewBtn === void 0 ? void 0 : cityViewBtn.click();\n    }\n    handleBuildSchedule(cityQueue) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                console.log('handleBuildSchedule, wait for lock', cityQueue.city.name);\n                yield this.lock.acquire();\n                this.generalInfo.showInfo('Builder:', `Obsługa kolejki w mieście: ${cityQueue.city.name}`);\n                console.log('handleBuildSchedule, take lock', cityQueue.city.name);\n                yield this.performBuildSchedule(cityQueue);\n            }\n            catch (e) {\n                console.warn('CityBuilder.doQueueOperation().catch', e);\n            }\n            finally {\n                console.log('handleBuildSchedule, release lock', cityQueue.city.name);\n                this.generalInfo.hideInfo();\n                this.lock.release();\n            }\n        });\n    }\n    speedUpFirstBuild(city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.tryGoToBuildMode(city);\n            const freeButton = yield (0, ui_utility_1.waitForElement)('[data-order_index=\"0\"] .type_free', 2000).catch(() => null);\n            if (freeButton) {\n                freeButton.click();\n            }\n            else {\n                throw new Error('No free button found');\n            }\n        });\n    }\n    canBuild(building, city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.tryGoToBuildMode(city);\n            const element = yield (0, ui_utility_1.waitForElement)(building.elementSelector, 2000).catch(() => null);\n            if (!element) {\n                return 'impossible';\n            }\n            const buildButton = yield (0, ui_utility_1.waitForElement)(`${building.elementSelector} ${buildings_1.buildingsSelectors.buildButton}`, 1000).catch(() => null);\n            if (!buildButton) {\n                return 'maxed';\n            }\n            const canBuild = !buildButton.classList.contains(buildings_1.buildingsSelectors.disabled);\n            return canBuild;\n        });\n    }\n    areResourcesStackable(building, city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log('areResourcesStackable');\n            yield this.tryGoToBuildMode(city);\n            // const buildButton = await waitForElement(`${building.elementSelector} ${buildingsSelectors.buildButton}`);\n            let counter = 0;\n            do {\n                (0, ui_utility_1.triggerHover)(document.querySelector(`${building.elementSelector} ${buildings_1.buildingsSelectors.buildButton}`));\n                yield (0, plain_utility_1.addDelay)(333);\n                counter++;\n            } while (!(yield (0, ui_utility_1.waitForElement)('#popup_div img[src*=\"images/game/res/wood.png\"]', 500).catch(() => false)) && counter < 4);\n            if (counter === 4) {\n                console.warn('No popup content found, had to try 4 times. Returning false');\n                return { areStackable: false, requiredResources: { wood: 0, stone: 0, iron: 0 } };\n            }\n            console.log('popup_div found !!!');\n            const requiredWood = Number((yield (0, ui_utility_1.waitForElement)('#popup_div img[src*=\"images/game/res/wood.png\"]', 3000)).nextSibling.textContent);\n            const requiredStone = Number((yield (0, ui_utility_1.waitForElement)('#popup_div img[src*=\"images/game/res/stone.png\"]', 0)).nextSibling.textContent);\n            const requiredIron = Number((yield (0, ui_utility_1.waitForElement)('#popup_div img[src*=\"images/game/res/iron.png\"]', 0)).nextSibling.textContent);\n            const requiredPopulation = Number((yield (0, ui_utility_1.waitForElement)('#popup_div img[src*=\"images/game/res/pop.png\"]', 0)).nextSibling.textContent);\n            (0, ui_utility_1.cancelHover)(document.querySelector(`${building.elementSelector} ${buildings_1.buildingsSelectors.buildButton}`));\n            const resourcesInfo = yield this.resourceManager.getResourcesInfo();\n            console.log(`Resource requirements:\r\n      \\t- Required population: ${requiredPopulation}\r\n      \\t- Current population: ${this.resourceManager.getPopulation()}\r\n      \\t- Store capacity: ${yield this.resourceManager.getStoreCapacity()}\r\n      \\t- Required wood: ${requiredWood}\r\n      \\t- Required stone: ${requiredStone}\r\n      \\t- Required iron: ${requiredIron}`);\n            console.log('Current resources:', resourcesInfo);\n            const requiredResources = {\n                wood: requiredWood,\n                stone: requiredStone,\n                iron: requiredIron,\n            };\n            if (requiredPopulation > (resourcesInfo.population.amount)) {\n                return { areStackable: 'population', requiredResources };\n            }\n            if ([requiredWood, requiredStone, requiredIron].reduce((acc, curr) => curr > acc ? curr : acc, 0) > resourcesInfo.storeMaxSize) {\n                return { areStackable: 'storage', requiredResources };\n            }\n            if (requiredWood <= (resourcesInfo).wood.amount &&\n                requiredStone <= (resourcesInfo).stone.amount &&\n                requiredIron <= (resourcesInfo).iron.amount &&\n                requiredPopulation <= (resourcesInfo).population.amount) {\n                return { areStackable: 'alreadyStacked', requiredResources };\n            }\n            return { areStackable: true, requiredResources };\n        });\n    }\n    ;\n    addStyle() {\n        const style = document.createElement('style');\n        style.textContent = queue_css_1.default;\n        document.head.appendChild(style);\n    }\n    isEmptySlot(city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.goToCityView();\n            yield city.switchAction();\n            yield (0, plain_utility_1.addDelay)(1000);\n            return yield (0, ui_utility_1.waitForElement)('.construction_queue_order_container.instant_buy .js-queue-item.empty_slot', 1000)\n                .then(() => true)\n                .catch(() => false);\n        });\n    }\n    getTimeToCanSpeedUp(city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.goToCityView();\n            yield city.switchAction();\n            yield (0, plain_utility_1.addDelay)(1000);\n            const firstOrder = yield (0, ui_utility_1.waitForElement)('[data-order_index=\"0\"] .countdown.js-item-countdown', 3000).catch(() => null);\n            if (firstOrder) {\n                return (0, plain_utility_1.textToMs)(firstOrder.textContent) - 5 * 60 * 1000;\n            }\n            throw new Error('No item in the queue.');\n        });\n    }\n    loadQueueFromStorage() {\n        this.mainQueue = this.citySwitchManager.getCityList().map((cityInfo) => ({\n            city: cityInfo,\n            queue: [],\n            schedule: null\n        }));\n        const storageQueue = localStorage.getItem('cityBuilderQueue');\n        if (storageQueue) {\n            JSON.parse(storageQueue)\n                .forEach((cityQueue) => {\n                const city = this.citySwitchManager.getCityByName(cityQueue.city.name);\n                if (!city) {\n                    return;\n                }\n                // actual queue\n                const queueItems = cityQueue.queue.map(item => {\n                    const building = Object.values(buildings_1.buildings).find(building => building.name === item.building.name);\n                    return Object.assign(Object.assign({}, item), { building });\n                });\n                this.mainQueue.find(queue => queue.city === city).queue = queueItems;\n            });\n        }\n        const currentCity = this.citySwitchManager.getCurrentCity();\n        const currentCityQueue = this.mainQueue.find(queue => queue.city === currentCity);\n        if (currentCityQueue) {\n            currentCityQueue.queue.forEach(item => {\n                this.addBuldingToUIQueue(item, 'end', currentCityQueue);\n            });\n        }\n    }\n    saveQueueToStorage() {\n        localStorage.setItem('cityBuilderQueue', JSON.stringify(this.mainQueue));\n    }\n    isQueueEmpty(city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield city.switchAction();\n            this.goToCityView();\n            return new Promise((res) => setTimeout(() => res(document.querySelector('.empty_queue')) != null, 0));\n        });\n    }\n    start() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.RUN = true;\n            document.getElementById(CityBuilder.toggleBuilderButtonId).classList.remove('hidden');\n            for (const cityQueue of this.mainQueue) {\n                yield this.handleBuildSchedule(cityQueue);\n            }\n        });\n    }\n    stop() {\n        console.log('Stopping');\n        this.RUN = false;\n        this.mainQueue.forEach(cityQueue => {\n            if (cityQueue.schedule) {\n                clearInterval(cityQueue.schedule);\n                clearTimeout(cityQueue.schedule);\n                cityQueue.schedule = null;\n            }\n        });\n        document.getElementById(CityBuilder.toggleBuilderButtonId).classList.add('hidden');\n    }\n    isRunning() {\n        return this.RUN;\n    }\n    appendChildAtIndex(additionalQueue, queueItemEl, index) {\n        additionalQueue.insertBefore(queueItemEl, additionalQueue.children[index]);\n    }\n    rerenderQueue(cityQueue) {\n        document.getElementById('additional-queue').innerHTML = '';\n        if (cityQueue) {\n            cityQueue.queue.forEach(item => {\n                this.addBuldingToUIQueue(item, 'end', cityQueue);\n            });\n        }\n    }\n}\nCityBuilder.queueContainerId = 'additional-queue';\nCityBuilder.queueItemClass = 'queue-item';\nCityBuilder.cancelButtonClass = 'cancel';\nCityBuilder.upButtonClass = 'up';\nCityBuilder.buildOptionsContainerId = 'build-options';\nCityBuilder.buildOptionItemClass = 'build-option';\nCityBuilder.buildOptionItemAddClass = 'build-options-add';\nCityBuilder.buildContainerId = 'build-container';\nCityBuilder.toggleBuilderButtonId = 'toggle-builder';\nCityBuilder.BUILD_RETRY_INTERVAL = 180 * 1000;\nexports.default = CityBuilder;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst events_1 = __importDefault(require(\"events\"));\nconst ui_utility_1 = require(\"../../utility/ui-utility\");\nconst plain_utility_1 = require(\"../../utility/plain-utility\");\nconst general_info_1 = __importDefault(require(\"../master/ui/general-info\"));\nclass CitySwitchManager extends events_1.default {\n    constructor() {\n        super();\n        this.RUN = false;\n        this.cityList = [];\n    }\n    static getInstance() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!CitySwitchManager.instance) {\n                CitySwitchManager.instance = new CitySwitchManager();\n                CitySwitchManager.instance.generalInfo = general_info_1.default.getInstance();\n                CitySwitchManager.instance.cityList = yield CitySwitchManager.instance.initCityList();\n                CitySwitchManager.instance.mountObserver();\n            }\n            return CitySwitchManager.instance;\n        });\n    }\n    mountObserver() {\n        new MutationObserver((mutations) => {\n            for (const mutation of mutations) {\n                if (mutation.addedNodes.length) {\n                    this.emit('cityChange', this.getCurrentCity());\n                    console.log('cityChange:', this.getCurrentCity());\n                }\n            }\n        }).observe(document.querySelector('.town_name_area .town_name.js-rename-caption'), { childList: true });\n    }\n    /**\n     * Method parses list of city, and creates shortcut access.\n     */\n    initCityList() {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a, _b, _c, _d, _e;\n            this.generalInfo.showInfo('City Switch Manager:', 'Inicjalizacja listy miast');\n            const dropdownTrigger = yield (0, ui_utility_1.waitForElement)('.town_groups_dropdown.btn_toggle_town_groups_menu');\n            dropdownTrigger.click();\n            let townListElement;\n            while (!(townListElement = yield (0, ui_utility_1.waitForElement)('.group_towns', 1000).catch(() => null))) {\n                document.querySelector('.btn_toggle_town_groups_menu').click();\n                yield (0, plain_utility_1.addDelay)(100);\n            }\n            const townList = townListElement.querySelectorAll('span.town_name');\n            const cityList = [];\n            for (const town of townList) {\n                console.log('initCityList.town:', town);\n                const cityId = town.parentElement.getAttribute('data-townid');\n                console.log('\\t-cityId:', cityId);\n                yield this.openTownList();\n                console.log('\\t-openTownList');\n                // for (const el of townList) {\n                for (const el of Array.from(yield (0, ui_utility_1.waitForElements)('.group_towns span.town_name', 3000))) {\n                    console.log('\\t\\t-element to match, element searched:', el.textContent, town.textContent);\n                    if (el.textContent === town.textContent) {\n                        console.log('\\t\\t\\t-found matched element:', el, 'click it');\n                        el.click();\n                        break;\n                    }\n                }\n                ;\n                yield (0, plain_utility_1.addDelay)(100);\n                // here switch to city in order to element be in the dom\n                document.querySelector('.btn_jump_to_town.circle_button.jump_to_town').click();\n                console.log('\\t-click', document.querySelector('.btn_jump_to_town.circle_button.jump_to_town'));\n                const isleId = (_e = (_d = (_c = Array.from((_b = (_a = (yield (0, ui_utility_1.waitForElement)(`#town_${cityId}`, 3000))) === null || _a === void 0 ? void 0 : _a.classList) !== null && _b !== void 0 ? _b : [])\n                    .find(cls => cls.match(/town_\\d+_\\d+_\\d+/))) === null || _c === void 0 ? void 0 : _c.match(/town_(\\d+_\\d+)_\\d+/)) === null || _d === void 0 ? void 0 : _d[1]) !== null && _e !== void 0 ? _e : '';\n                const name = town.textContent;\n                cityList.push({\n                    name,\n                    cityId,\n                    isleId,\n                    switchAction: () => __awaiter(this, void 0, void 0, function* () {\n                        try {\n                            if (document.querySelector('div.town_name').textContent !== name) {\n                                let townListElement = document.querySelector('.group_towns');\n                                if (!townListElement) {\n                                    do {\n                                        yield (0, ui_utility_1.waitForElement)('.town_groups_dropdown.btn_toggle_town_groups_menu', 1000).then(el => el.click()).catch(() => null);\n                                        yield (0, plain_utility_1.addDelay)(333);\n                                    } while (!(townListElement = yield (0, ui_utility_1.waitForElement)('.group_towns', 1500).catch(() => null)));\n                                }\n                                const targetTown = Array.from(townListElement.querySelectorAll('span.town_name'))\n                                    .find(el => el.textContent === name);\n                                targetTown.click();\n                                do {\n                                    yield (0, plain_utility_1.addDelay)(100);\n                                } while (document.querySelector('div.town_name').textContent !== name);\n                            }\n                            document.querySelector('.btn_jump_to_town.circle_button.jump_to_town').click();\n                            yield (0, plain_utility_1.addDelay)(100);\n                        }\n                        catch (e) {\n                            console.warn('switchAction.catch:', e);\n                        }\n                    })\n                });\n            }\n            console.log('CitySwitchManager.cityList.initialized:', cityList);\n            yield this.goBackToFirstTown();\n            this.generalInfo.hideInfo();\n            return cityList;\n        });\n    }\n    openTownList() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!(yield (0, ui_utility_1.waitForElement)('.group_towns', 1000).catch(() => null))) {\n                const dropdownTrigger = yield (0, ui_utility_1.waitForElement)('.town_groups_dropdown.btn_toggle_town_groups_menu');\n                dropdownTrigger.click();\n            }\n        });\n    }\n    goBackToFirstTown() {\n        return __awaiter(this, void 0, void 0, function* () {\n            document.querySelector('.btn_next_town.button_arrow.right').click();\n            document.querySelector('.btn_jump_to_town.circle_button.jump_to_town').click();\n        });\n    }\n    clickArrowUntilCityFound(cityName) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const cityWrapper = document.querySelector(`.town_name_area`);\n            const arrowLeft = cityWrapper.querySelector('.btn_prev_town.button_arrow.left');\n            const arrowRight = cityWrapper.querySelector('.btn_next_town.button_arrow.right');\n            do {\n                arrowRight.click();\n                yield (0, plain_utility_1.addDelay)(1500);\n                if (document.querySelector('div.town_name').textContent === cityName) {\n                    return;\n                }\n            } while (arrowRight.classList.contains('disabled'));\n            do {\n                arrowLeft.click();\n                yield (0, plain_utility_1.addDelay)(1500);\n                if (document.querySelector('div.town_name').textContent === cityName) {\n                    return;\n                }\n            } while (!arrowLeft.classList.contains('disabled'));\n        });\n    }\n    getCurrentCity() {\n        var _a, _b;\n        const name = (_b = (_a = document.querySelector('div.town_name')) === null || _a === void 0 ? void 0 : _a.textContent) !== null && _b !== void 0 ? _b : '';\n        return this.getCityByName(name);\n    }\n    getCityByName(name) {\n        return this.cityList.find(city => city.name === name);\n    }\n    getCityList() {\n        return this.cityList;\n    }\n    isRunning() {\n        return this.RUN;\n    }\n    run() {\n        this.RUN = true;\n    }\n    stop() {\n        // TODO: stop potential scheduled switchActions\n        this.RUN = false;\n    }\n}\nexports.default = CitySwitchManager;\nfunction sleep(arg0) {\n    throw new Error(\"Function not implemented.\");\n}\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst events_1 = __importDefault(require(\"events\"));\nconst gps_config_1 = require(\"../../../gps.config\");\nconst config_manager_1 = __importDefault(require(\"../../utility/config-manager\"));\nconst plain_utility_1 = require(\"../../utility/plain-utility\");\nconst ui_lock_1 = __importDefault(require(\"../../utility/ui-lock\"));\nconst ui_utility_1 = require(\"../../utility/ui-utility\");\nconst city_switch_manager_1 = __importDefault(require(\"../city/city-switch-manager\"));\nconst general_info_1 = __importDefault(require(\"../master/ui/general-info\"));\nclass FarmManager extends events_1.default {\n    constructor() {\n        super();\n        this.schedulerArray = [];\n        this.messageDialogObserver = null;\n        this.humanMessageDialogObserver = null;\n        this.RUN = false;\n        this.scheduleNextFarmingOperationForCity = (timeInterval, city) => {\n            const scheduledDate = new Date(Date.now() + timeInterval);\n            const scheduleItem = {\n                scheduledDate,\n                timeout: null,\n                city\n            };\n            const timeout = setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n                this.schedulerArray = this.schedulerArray.filter(item => item !== scheduleItem);\n                this.farmVillages(city);\n            }), timeInterval);\n            scheduleItem.timeout = timeout;\n            this.schedulerArray.push(scheduleItem);\n            console.log('scheduler:', this.schedulerArray);\n        };\n        /**\n         * Metoda jest odpowiedzią na blokadę farmienia wynikającą z konieczności potwierdzenia farmienia w przypadku pełengo magazynu.\n         * Metoda obserwuje czy pojawił się popup z promptem do potwierdzenia kontynuacji i klika akceptuj.\n         */\n        this.mountMessageDialogsObservers = (city) => __awaiter(this, void 0, void 0, function* () {\n            if (!this.messageDialogObserver) {\n                const observer = new MutationObserver((mutations) => __awaiter(this, void 0, void 0, function* () {\n                    for (const mutation of mutations) {\n                        if (mutation.type === 'childList') {\n                            for (const node of mutation.addedNodes) {\n                                if (node instanceof HTMLElement && node.getAttribute('class') === 'window_curtain ui-front show_curtain is_modal_window') {\n                                    yield (0, plain_utility_1.addDelay)(100);\n                                    const confirmButton = node.querySelector('.btn_confirm.button_new');\n                                    confirmButton.click();\n                                    return;\n                                }\n                            }\n                        }\n                    }\n                }));\n                this.messageDialogObserver = observer;\n                this.messageDialogObserver.observe(document.body, { childList: true });\n            }\n            if (!this.humanMessageDialogObserver) {\n                const observer = new MutationObserver((mutations) => __awaiter(this, void 0, void 0, function* () {\n                    for (const mutation of mutations) {\n                        if (mutation.type === 'childList') {\n                            observer.disconnect();\n                            yield city.switchAction();\n                        }\n                    }\n                }));\n                this.humanMessageDialogObserver = observer;\n                observer.observe(document.querySelector('#human_message'), { childList: true, subtree: true });\n            }\n            this.messageDialogObserver.observe(document.body, { childList: true });\n        });\n        // Private constructor to prevent direct instantiation\n    }\n    static getInstance() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!FarmManager.instance) {\n                FarmManager.instance = new FarmManager();\n                FarmManager.instance.generalInfo = general_info_1.default.getInstance();\n                FarmManager.instance.citySwitch = yield city_switch_manager_1.default.getInstance();\n                FarmManager.instance.config = config_manager_1.default.getInstance().getConfig().farmConfig;\n                FarmManager.instance.lock = ui_lock_1.default.getInstance();\n            }\n            return FarmManager.instance;\n        });\n    }\n    start() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.RUN) {\n                console.log('FarmManager started');\n                this.RUN = true;\n                yield this.initFarmAllVillages();\n            }\n        });\n    }\n    /**\n     * Obecna implementacja. Sprawdzenie pierwszej wioski z brzegu, czy posiada czas oczekiwania.\n     * -jeżeli nie, farmienie wszystkich posiadanych wiosek na wyspie (bez względu na stan)\n     * -jeżeli tak (nawet jeżeli pozostałe nie mają czasu oczekiwania), ma miejsce oczekiwanie\n     *\n     * Sposób działania w przypadku wielu miast gracza:\n     * -Wzięcia locka raz na wszystkie miasta\n     * -iteracja przez wszystkie miasta (switchowanie miast)\n     * -farmienie jednym ciągiem tzn traktowanie, że wszystkie miasta mają zawsze ta samą strategię farmienia wiosek i są na tym samym czasie oczekiwania\n     *\n     * Alternatywne podejście\n     * -na każde miasto gracza jest osobny callback\n     *  :w efekcie każde miasto może farmić swoje wioski z potencjalnie innym odsępem czasowym\n     * -wszystkie wioski przypisane od miasta są traktowane jako jeden byt, czyli losowa wioska określa ten sam czas oczekiwania dla wszystkich innych\n     * -sposób przechodzenia między wioskami ten sam: inicjalna funkcja start, która bierze Locka raz na wszystkie iteracje miast\n     *  a potem farmienie przez callbacki\n     */\n    farmVillages(city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                console.log('farmVillages, wait for lock', city.name);\n                yield this.lock.acquire();\n                this.generalInfo.showInfo('Farm Manager:', `farmienie w mieście: ${city.name}`);\n                console.log('farmVillages, take lock', city.name);\n                yield this.farmVillagesFlow(city);\n            }\n            catch (e) {\n                console.warn('FarmManager.farmVillages().catch', e);\n            }\n            finally {\n                this.disconnectObservers();\n                console.log('farmVillages, release lock', city.name);\n                this.generalInfo.hideInfo();\n                this.lock.release();\n                this.emit('farmingFinished');\n            }\n        });\n    }\n    /**\n     * Make sure, that if there are 2 or more cities on the same isle not to duplicate farming operation and scheduling.\n     * Although nothing bad or unpredictable will happen, it is a waste of resources.\n     * Solution\n     * :store villages unique selectors, and check if previous ones (on condtition that there is more than 1 village) are not the same.\n     *  -if previous ones are the same, omit\n     *  -else allow normal flow\n     */\n    farmVillagesFlow(city_1) {\n        return __awaiter(this, arguments, void 0, function* (city, forced = false) {\n            var _a, _b;\n            try {\n                console.log('farmVillagesFlow, switch to city', city.name);\n                yield city.switchAction();\n                let timeout = this.config.farmInterval;\n                this.config.humanize ? (0, plain_utility_1.addDelay)((0, plain_utility_1.getRandomMs)(400, 1200)) : (0, plain_utility_1.addDelay)(333);\n                // Selectors mapping and timeout check\n                const villages = yield (0, ui_utility_1.waitForElementsInterval)('a.owned.farm_town[data-same_island=\"true\"]', { timeout: 3000 }).catch(() => null);\n                console.log('\\t-villages to farm:', villages === null || villages === void 0 ? void 0 : villages.length);\n                if (!villages || villages.length === 0)\n                    return;\n                const villageStyleSelectors = Array.from(villages).map(v => {\n                    return `[style=\"${v.getAttribute('style')}\"]`;\n                });\n                const villagesAmount = villageStyleSelectors.length;\n                this.mountMessageDialogsObservers(city);\n                for (const [i, villageSelector] of villageStyleSelectors.entries()) {\n                    console.log(`\\t-checking village: ${i}, from town: ${city.name}`);\n                    let counter = 0;\n                    do {\n                        console.log('\\t-clicking village element on the map', counter);\n                        yield (0, ui_utility_1.performComplexClick)(document.querySelector(villageSelector));\n                        console.log('\\t-clicked village element on the map', counter);\n                        yield (0, plain_utility_1.addDelay)(100);\n                        if (counter === 3)\n                            throw new Error('Farm villages dialog didn\\'t show up');\n                        counter++;\n                    } while (!(yield (0, ui_utility_1.waitForElement)('.farm_towns', 1500).catch(() => false)));\n                    this.config.humanize ? yield (0, plain_utility_1.addDelay)((0, plain_utility_1.getRandomMs)(400, 1200)) : (0, plain_utility_1.addDelay)(100);\n                    const farmOptionIndex = this.getFarmOptionIndex();\n                    counter = 0;\n                    do {\n                        console.log('\\t-clicking farm button', counter);\n                        yield (0, ui_utility_1.waitForElements)('.btn_claim_resources.button.button_new', 500)\n                            .then((els) => els[farmOptionIndex].click())\n                            .catch(() => { });\n                        console.log('\\t-clicked farm button', counter);\n                        if (counter === 3)\n                            throw new Error('Farm button not found');\n                        counter++;\n                        yield (0, plain_utility_1.addDelay)(100);\n                    } while (!(yield (0, ui_utility_1.waitForElement)('.actions_locked_banner.cooldown', 1500).catch(() => false)));\n                    this.config.humanize ? yield (0, plain_utility_1.addDelay)((0, plain_utility_1.getRandomMs)(400, 1200)) : (0, plain_utility_1.addDelay)(100);\n                    if (i === villagesAmount - 1) {\n                        timeout = (_a = yield this.getUnlockTimeOrNull(yield (0, ui_utility_1.waitForElement)('.farm_towns'), 2000)) !== null && _a !== void 0 ? _a : this.config.farmInterval;\n                    }\n                    console.log('\\t-closing village window');\n                    (_b = document.querySelector('.btn_wnd.close')) === null || _b === void 0 ? void 0 : _b.click();\n                    console.log('\\t-closed village window');\n                    this.config.humanize ? yield (0, plain_utility_1.addDelay)((0, plain_utility_1.getRandomMs)(400, 1200)) : (0, plain_utility_1.addDelay)(100);\n                }\n                this.disconnectObservers();\n                this.scheduleNextFarmingOperationForCity(timeout + 1000, city);\n            }\n            catch (e) {\n                console.warn('FarmManager.farmVillagesFlow().catch', e);\n                yield this.forceRepeatFarming(city);\n            }\n        });\n    }\n    /**\n     * Bierze locka, iteruje przez wszystkie miasta, farmi wszystkie wioski danego miasta, dodaje osobnego callbacka dla każdego miasta.\n     * Po przejściu powraca do pierwszego miasta, zwraca locka, a wioski będą farmione przez osobną metodę: 'farmVillages'.\n     */\n    initFarmAllVillages() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // const cityList = this.citySwitch.getCityList();\n            var _a;\n            // Quickfix, init farming only for one city per island\n            const cityList = this.citySwitch.getCityList().reduce((acc, cityInfo) => {\n                if (!cityInfo.isleId || !acc.some(el => el.isleId === cityInfo.isleId)) {\n                    acc.push(cityInfo);\n                }\n                return acc;\n            }, []);\n            try {\n                console.log('initFarmAllVillages, wait for lock');\n                yield this.lock.acquire();\n                this.generalInfo.showInfo('Farm Manager:', 'Inicjalizacja/farmienie wszystkich wiosek.');\n                console.log('initFarmAllVillages, take lock');\n                for (const cityInfo of cityList) {\n                    yield this.farmVillagesFlow(cityInfo);\n                }\n                if (cityList.length !== 1)\n                    yield cityList[0].switchAction();\n            }\n            catch (e) {\n                console.warn('FarmManager.initFarmAllVillages().catch', e);\n            }\n            finally {\n                this.generalInfo.hideInfo();\n                this.lock.release();\n                (_a = this.messageDialogObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\n                this.emit('farmingFinished');\n            }\n        });\n    }\n    forceRepeatFarming(city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield city.switchAction();\n            yield this.farmVillagesFlow(city, true);\n        });\n    }\n    disconnectObservers() {\n        var _a, _b;\n        (_a = this.messageDialogObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\n        (_b = this.humanMessageDialogObserver) === null || _b === void 0 ? void 0 : _b.disconnect();\n    }\n    getUnlockTimeOrNull(window, timeout) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const cooldownBar = yield (0, ui_utility_1.waitForElementFromNode)(window, '.actions_locked_banner.cooldown', timeout !== null && timeout !== void 0 ? timeout : 500).catch(() => null);\n            if (cooldownBar) {\n                const unlcokTimeEl = cooldownBar.querySelector('.pb_bpv_unlock_time');\n                return new Promise((res, rej) => {\n                    let counter = 0;\n                    const getTextInterval = setInterval(() => {\n                        if (unlcokTimeEl === null || unlcokTimeEl === void 0 ? void 0 : unlcokTimeEl.textContent) {\n                            clearInterval(getTextInterval);\n                            console.log('next unlock time:', unlcokTimeEl.textContent);\n                            res((0, plain_utility_1.textToMs)(unlcokTimeEl.textContent));\n                        }\n                        else if (counter === 10) {\n                            clearInterval(getTextInterval);\n                            console.warn('nie znaleziono czasu odblokowania');\n                            res(null);\n                        }\n                        counter++;\n                    }, 100);\n                });\n            }\n            return null;\n        });\n    }\n    /**\n     * Depending on the length of the farm options, it returns the index of the farm option to click.\n     */\n    getFarmOptionIndex() {\n        switch (this.config.farmInterval) {\n            case gps_config_1.FarmTimeInterval.FirstOption:\n                return 0;\n            case gps_config_1.FarmTimeInterval.SecondOption:\n                return 1;\n            case gps_config_1.FarmTimeInterval.ThirdOption:\n                return 2;\n            case gps_config_1.FarmTimeInterval.FourthOption:\n                return 3;\n            default:\n                return 0;\n        }\n    }\n    getFarmOptionTimeRegex() {\n        switch (this.config.farmInterval) {\n            case gps_config_1.FarmTimeInterval.FirstOption:\n                return /(5|10)/;\n            case gps_config_1.FarmTimeInterval.SecondOption:\n                return /^(20|40)/;\n            case gps_config_1.FarmTimeInterval.ThirdOption:\n                return /^(1.*30|3\\D+)/;\n            case gps_config_1.FarmTimeInterval.FourthOption:\n                return /^(4|8)h/;\n            default:\n                return /^(5|10)/;\n        }\n    }\n    getFarmOption() {\n        return Array.from(document.querySelectorAll('.btn_claim_resources.button.button_new'))\n            .find((el) => { var _a; return this.getFarmOptionTimeRegex().test((_a = el.textContent) !== null && _a !== void 0 ? _a : ''); });\n    }\n    stop() {\n        this.RUN = false;\n        console.log('FarmManager stopped');\n        this.schedulerArray.forEach(item => {\n            clearTimeout(item.timeout);\n        });\n        this.schedulerArray = [];\n    }\n    isRunning() {\n        return this.RUN;\n    }\n}\nexports.default = FarmManager;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst gps_config_1 = require(\"../../../gps.config\");\nconst config_popup_1 = __importDefault(require(\"../../config-popup/config-popup\"));\nconst config_manager_1 = __importDefault(require(\"../../utility/config-manager\"));\nconst plain_utility_1 = require(\"../../utility/plain-utility\");\nconst city_builder_1 = __importDefault(require(\"../city/builder/city-builder\"));\nconst city_switch_manager_1 = __importDefault(require(\"../city/city-switch-manager\"));\nconst farm_manager_1 = __importDefault(require(\"../farm/farm-manager\"));\nconst Scheduler_1 = __importDefault(require(\"../scheduler/Scheduler\"));\nconst general_info_1 = __importDefault(require(\"./ui/general-info\"));\nclass MasterManager {\n    constructor() {\n        this.pausedManagersSnapshot = {\n            farmManager: false,\n            switchManager: false,\n            scheduler: false,\n            builder: false,\n        };\n        // Private constructor to prevent direct instantiation\n    }\n    static getInstance() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!MasterManager.instance) {\n                MasterManager.instance = new MasterManager();\n                MasterManager.instance.generalInfo = general_info_1.default.getInstance();\n                MasterManager.instance.config = config_manager_1.default.getInstance().getConfig();\n                MasterManager.instance.switchManager = yield city_switch_manager_1.default.getInstance();\n                MasterManager.instance.farmManager = yield farm_manager_1.default.getInstance();\n                MasterManager.instance.scheduler = yield Scheduler_1.default.getInstance();\n                MasterManager.instance.builder = yield city_builder_1.default.getInstance();\n                MasterManager.instance.initCaptchaPrevention();\n                MasterManager.instance.initRefreshUtility();\n                MasterManager.instance.initConfigDialog();\n            }\n            return MasterManager.instance;\n        });\n    }\n    initRefreshUtility(timeout) {\n        setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n            const scheduler = yield Scheduler_1.default.getInstance();\n            const canRefresh = !scheduler.isRunning() || scheduler.canSafelyRefresh();\n            if (canRefresh) {\n                console.log('canRefresh, will refresh', canRefresh);\n                console.log('timeout ?? this.config.general.applicationRefreshInterval', timeout !== null && timeout !== void 0 ? timeout : this.config.general.applicationRefreshInterval);\n                console.log('this.config.general.applicationRefreshInterval', this.config.general.applicationRefreshInterval);\n                this.config.general.forcedRefresh = true;\n                config_manager_1.default.getInstance().persistConfig();\n                yield (0, plain_utility_1.addDelay)(10000);\n                window.location.reload();\n            }\n            else {\n                console.log('canRefresh', canRefresh);\n                this.initRefreshUtility(5 * 1000 * 60);\n            }\n        }), timeout !== null && timeout !== void 0 ? timeout : (this.config.general.applicationRefreshInterval + (Math.floor(Math.random() * 121) - 60)) * 1000);\n    }\n    // id=\"recaptcha_window\"\n    // document.querySelector('[class=\"recaptcha-checkbox-border\"]')\n    // document.querySelector('#recaptcha_window [class=\"caption js-caption\"]').click()\n    initCaptchaPrevention() {\n        new MutationObserver((mutations) => __awaiter(this, void 0, void 0, function* () {\n            for (const mutation of mutations) {\n                if (mutation.type === 'childList') {\n                    const recaptchaWindow = document.querySelector('#recaptcha_window');\n                    const captchaCurtain = document.querySelector('#captcha_curtain');\n                    if (recaptchaWindow) {\n                        const checkbox = recaptchaWindow.querySelector('[class=\"recaptcha-checkbox-border\"]');\n                        if (checkbox) {\n                            yield (0, plain_utility_1.addDelay)(4000);\n                            checkbox.click();\n                            const caption = recaptchaWindow.querySelector('#recaptcha_window [class=\"caption js-caption\"]');\n                            if (caption) {\n                                yield (0, plain_utility_1.addDelay)(4000);\n                                caption.click();\n                            }\n                        }\n                    }\n                    else if (captchaCurtain) {\n                        const checkbox = captchaCurtain.querySelector('[class=\"captcha-checkbox-border\"]');\n                        if (checkbox) {\n                            yield (0, plain_utility_1.addDelay)(2000);\n                            checkbox.click();\n                            const caption = captchaCurtain.querySelector('#captcha_curtain [class=\"caption js-caption\"]');\n                            if (caption) {\n                                yield (0, plain_utility_1.addDelay)(2000);\n                                caption.click();\n                            }\n                        }\n                    }\n                }\n            }\n        })).observe(document.body, { childList: true });\n    }\n    runManagersFromConfig() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.configMenuWindow.isSwitchChecked()) {\n                if (!this.switchManager.isRunning()) {\n                    console.log('switchManager will be started...');\n                    this.switchManager.run();\n                }\n            }\n            else {\n                if (this.switchManager.isRunning()) {\n                    console.log('switchManager will be stopped...');\n                    this.switchManager.stop();\n                }\n            }\n            if (this.configMenuWindow.isBuilderChecked()) {\n                if (!this.builder.isRunning()) {\n                    console.log('Builder will be started...');\n                    this.builder.start();\n                }\n            }\n            else {\n                if (this.builder.isRunning()) {\n                    console.log('Builder will be stopped...');\n                    this.builder.stop();\n                }\n            }\n            if (this.configMenuWindow.isFarmChecked()) {\n                if (!this.farmManager.isRunning()) {\n                    console.log('FarmManager will be started...');\n                    yield this.farmManager.start();\n                }\n            }\n            else {\n                if (this.farmManager.isRunning()) {\n                    console.log('FarmManager will be stopped...');\n                    this.farmManager.stop();\n                }\n            }\n        });\n    }\n    initConfigDialog() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.configMenuWindow = new config_popup_1.default();\n            this.configMenuWindow.addListener('managersChange', () => __awaiter(this, void 0, void 0, function* () {\n                yield this.runManagersFromConfig();\n            }));\n            yield this.configMenuWindow.render();\n            if (this.config.general.forcedRefresh) {\n                this.config.general.forcedRefresh = false;\n                this.config.farmConfig.farmInterval = gps_config_1.FarmTimeInterval.FirstOption;\n                config_manager_1.default.getInstance().persistConfig();\n                this.configMenuWindow.minimize();\n                yield this.runManagersFromConfig();\n            }\n        });\n    }\n    run() {\n        this.runManagersFromConfig();\n    }\n    pauseRunningManagers(except) {\n        if (!except.includes('farmManager') && this.farmManager.isRunning()) {\n            this.farmManager.stop();\n            this.pausedManagersSnapshot.farmManager = true;\n        }\n        if (!except.includes('switchManager') && this.switchManager.isRunning()) {\n            this.switchManager.stop();\n            this.pausedManagersSnapshot.switchManager = true;\n        }\n        if (!except.includes('scheduler') && this.scheduler.isRunning()) {\n            this.scheduler.stop();\n            this.pausedManagersSnapshot.scheduler = true;\n        }\n        if (!except.includes('builder') && this.builder.isRunning()) {\n            this.builder.stop();\n            this.pausedManagersSnapshot.builder = true;\n        }\n        console.log('pauseRunningManagers', this.pausedManagersSnapshot);\n    }\n    resumeRunningManagers(except) {\n        Object.entries(this.pausedManagersSnapshot).forEach(([key, isPaused]) => {\n            switch (key) {\n                case 'farmManager':\n                    if (isPaused && !except.includes('farmManager')) {\n                        this.farmManager.start();\n                    }\n                    break;\n                case 'switchManager':\n                    if (isPaused && !except.includes('switchManager')) {\n                        this.switchManager.run();\n                    }\n                    break;\n                case 'scheduler':\n                    if (isPaused && !except.includes('scheduler')) {\n                        this.scheduler.run();\n                    }\n                    break;\n                case 'builder':\n                    if (isPaused && !except.includes('builder')) {\n                        this.builder.start();\n                    }\n                    break;\n            }\n        });\n        Object.keys(this.pausedManagersSnapshot).forEach((key) => {\n            if (except.includes(key)) {\n                this.pausedManagersSnapshot[key] = false;\n            }\n        });\n    }\n    forceRefresh() {\n        this.config.general.forcedRefresh = true;\n        config_manager_1.default.getInstance().persistConfig();\n        window.location.reload();\n    }\n    stopAll() {\n        this.farmManager.stop();\n        this.switchManager.stop();\n        this.scheduler.stop();\n        this.builder.stop();\n    }\n}\nexports.default = MasterManager;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst general_info_css_1 = __importDefault(require(\"./general-info.css\"));\nconst info_template_html_1 = __importDefault(require(\"./info-template.html\"));\nclass GeneralInfo {\n    constructor() {\n        this.initInfoContainer();\n    }\n    static getInstance() {\n        if (!GeneralInfo.instance) {\n            GeneralInfo.instance = new GeneralInfo();\n        }\n        return GeneralInfo.instance;\n    }\n    initInfoContainer() {\n        console.log('initInfoContainer');\n        const style = document.createElement('style');\n        style.innerHTML = general_info_css_1.default;\n        document.head.appendChild(style);\n        const infoContainer = document.createElement('div');\n        infoContainer.innerHTML = info_template_html_1.default;\n        document.body.appendChild(infoContainer);\n    }\n    showInfo(title, text) {\n        const infoContainer = document.getElementById('info-container');\n        infoContainer.querySelector('.info-title').textContent = title;\n        infoContainer.querySelector('.info-text').textContent = text;\n        infoContainer.classList.remove('hidden');\n    }\n    hideInfo() {\n        const infoContainer = document.getElementById('info-container');\n        infoContainer.classList.add('hidden');\n    }\n}\nexports.default = GeneralInfo;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst config_manager_1 = __importDefault(require(\"../../utility/config-manager\"));\nconst plain_utility_1 = require(\"../../utility/plain-utility\");\nconst ui_utility_1 = require(\"../../utility/ui-utility\");\nclass ResourceManager {\n    constructor() {\n        var _a, _b, _c, _d, _e, _f;\n        this.configManager = config_manager_1.default.getInstance();\n        // NOTE: error with fetching this conig data ! probabaly storage sinchronization problem\n        this.minPopulationBuffer = (_c = (_b = (_a = this.configManager.getConfig()) === null || _a === void 0 ? void 0 : _a.resources) === null || _b === void 0 ? void 0 : _b.minPopulationBuffer) !== null && _c !== void 0 ? _c : 100;\n        this.storeAlmostFullPercentage = (_f = (_e = (_d = this.configManager.getConfig()) === null || _d === void 0 ? void 0 : _d.resources) === null || _e === void 0 ? void 0 : _e.storeAlmostFullPercentage) !== null && _f !== void 0 ? _f : 0.9;\n    }\n    static getInstance() {\n        if (!ResourceManager.instance) {\n            ResourceManager.instance = new ResourceManager();\n        }\n        return this.instance;\n    }\n    start() {\n        return __awaiter(this, void 0, void 0, function* () {\n        });\n    }\n    stop() {\n    }\n    getStoreCapacity() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // let maxSizeElement: HTMLDivElement | null = null;\n            // do {\n            //   triggerHover(document.querySelector<HTMLDivElement>('[data-type=\"wood\"] .amount.ui-game-selectable')!);\n            //   await addDelay(100);\n            // } while (!(maxSizeElement = document.querySelector<HTMLDivElement>('.island_resource_info span:nth-of-type(2)')))\n            var _a, _b;\n            (0, ui_utility_1.triggerHover)(document.querySelector('[data-type=\"wood\"] .amount.ui-game-selectable'));\n            const maxSizeText = yield (0, ui_utility_1.waitForElement)('.island_resource_info span:nth-of-type(2)');\n            const storeMaxSize = parseInt(((_b = (_a = maxSizeText === null || maxSizeText === void 0 ? void 0 : maxSizeText.textContent) === null || _a === void 0 ? void 0 : _a.match(/\\d+/)) === null || _b === void 0 ? void 0 : _b[0]) || '0');\n            (0, ui_utility_1.cancelHover)(document.querySelector('[data-type=\"wood\"] .amount.ui-game-selectable'));\n            return storeMaxSize;\n        });\n    }\n    getPopulation() {\n        const population = Number(document.querySelector('[data-type=\"population\"] .amount.ui-game-selectable').textContent);\n        return population;\n    }\n    getResourcesInfo() {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const wood = Number((yield (0, ui_utility_1.waitForElement)('[data-type=\"wood\"] .amount.ui-game-selectable')).textContent);\n            const stone = Number((yield (0, ui_utility_1.waitForElement)('[data-type=\"stone\"] .amount.ui-game-selectable')).textContent);\n            const iron = Number((yield (0, ui_utility_1.waitForElement)('[data-type=\"iron\"] .amount.ui-game-selectable')).textContent);\n            const population = Number((yield (0, ui_utility_1.waitForElement)('[data-type=\"population\"] .amount.ui-game-selectable')).textContent);\n            const resourceItem = yield (0, ui_utility_1.waitForElement)('[data-type=\"wood\"] .amount.ui-game-selectable');\n            let maxSizeElement = null;\n            do {\n                (0, ui_utility_1.triggerHover)(resourceItem);\n                yield (0, plain_utility_1.addDelay)(333);\n            } while (!(maxSizeElement = document.querySelector('.island_resource_info span:nth-of-type(2)')));\n            const maxSizeText = maxSizeElement.textContent;\n            const storeMaxSize = parseInt(((_a = maxSizeText === null || maxSizeText === void 0 ? void 0 : maxSizeText.match(/\\d+/)) === null || _a === void 0 ? void 0 : _a[0]) || '0');\n            (0, ui_utility_1.cancelHover)(resourceItem);\n            const resourcesInfo = {\n                wood: {\n                    amount: wood,\n                    isAlmostFull: wood > this.storeAlmostFullPercentage * storeMaxSize,\n                    isFull: wood === storeMaxSize,\n                },\n                stone: {\n                    amount: stone,\n                    isAlmostFull: stone > this.storeAlmostFullPercentage * storeMaxSize,\n                    isFull: stone === storeMaxSize,\n                },\n                iron: {\n                    amount: iron,\n                    isAlmostFull: iron > this.storeAlmostFullPercentage * storeMaxSize,\n                    isFull: iron === storeMaxSize,\n                },\n                population: {\n                    amount: population,\n                    isLow: population < this.minPopulationBuffer,\n                },\n                storeMaxSize\n            };\n            return resourcesInfo;\n        });\n    }\n    hasEnoughResources(requiredResources, city) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield city.switchAction();\n            const wood = Number(document.querySelector('[data-type=\"wood\"] .amount.ui-game-selectable').textContent);\n            const stone = Number(document.querySelector('[data-type=\"stone\"] .amount.ui-game-selectable').textContent);\n            const iron = Number(document.querySelector('[data-type=\"iron\"] .amount.ui-game-selectable').textContent);\n            return wood >= requiredResources.wood && stone >= requiredResources.stone && iron >= requiredResources.iron;\n        });\n    }\n}\nexports.default = ResourceManager;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst config_manager_1 = __importDefault(require(\"../../utility/config-manager\"));\nconst plain_utility_1 = require(\"../../utility/plain-utility\");\nconst ui_lock_1 = __importDefault(require(\"../../utility/ui-lock\"));\nconst ui_utility_1 = require(\"../../utility/ui-utility\");\nconst army_movement_1 = __importDefault(require(\"../army/army-movement\"));\nconst city_switch_manager_1 = __importDefault(require(\"../city/city-switch-manager\"));\nconst master_manager_1 = __importDefault(require(\"../master/master-manager\"));\nconst general_info_1 = __importDefault(require(\"../master/ui/general-info\"));\nconst button_panel_extension_html_1 = __importDefault(require(\"./button-panel-extension.html\"));\nconst scheduler_list_prod_html_1 = __importDefault(require(\"./scheduler-list-prod.html\"));\nconst scheduler_list_css_1 = __importDefault(require(\"./scheduler-list.css\"));\nvar OperationType;\n(function (OperationType) {\n    OperationType[OperationType[\"ARMY_ATTACK\"] = 0] = \"ARMY_ATTACK\";\n    OperationType[OperationType[\"ARMY_SUPPORT\"] = 1] = \"ARMY_SUPPORT\";\n    OperationType[OperationType[\"ARMY_WITHDRAW\"] = 2] = \"ARMY_WITHDRAW\";\n    OperationType[OperationType[\"RESOURCE_SHIPMENT\"] = 3] = \"RESOURCE_SHIPMENT\";\n})(OperationType || (OperationType = {}));\nclass Scheduler {\n    constructor() {\n        this.isLockTakenByScheduler = false;\n        this.scheduler = [];\n        this._error = null;\n        this._hydrationError = null;\n        this._info = null;\n        this.RUN = true;\n    }\n    privateconstructor() { }\n    static getInstance() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!Scheduler.instance) {\n                Scheduler.instance = new Scheduler();\n                Scheduler.instance.lock = ui_lock_1.default.getInstance();\n                Scheduler.instance.generalInfo = general_info_1.default.getInstance();\n                Scheduler.instance.armyMovement = army_movement_1.default.getInstance();\n                Scheduler.instance.masterManager = yield master_manager_1.default.getInstance();\n                Scheduler.instance.citySwitchManager = yield city_switch_manager_1.default.getInstance();\n                Scheduler.instance.config = config_manager_1.default.getInstance().getConfig();\n                Scheduler.instance.addUIExtenstion();\n                Scheduler.instance.addSchedulerListConfigWindow();\n                Scheduler.instance.synchronizeSchedulerWithStorage();\n            }\n            return Scheduler.instance;\n        });\n    }\n    addUIExtenstion() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.mountCityDialogObserver();\n        });\n    }\n    run() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.RUN = true;\n        });\n    }\n    stop() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.RUN = false;\n        });\n    }\n    isRunning() {\n        return this.RUN;\n    }\n    /**\n     * Potrzebny będzie dodatkowy identyfikator ruchu, ponieważ z danego miasta, do danego miasta może miec miejsce wiele ruchów\n     * i wówczas może zostać anulowany zły ruch. Nie jest to zatem bezpieczna metoda na tą chilę.\n     * Możliwe rozwiązania:\n     * -Mozna zamontować obserwera ruchów wojsk, przekażać mu samo usuwającego się callbacka, któyry otrzyma informację o najnowszym ruchu\n     *  np. unikalne [id=\"movement_1820489002\"], które zostanie przypisane do danego obiektu ruchu. Wówczas cancelowanie ruchów, będzie odbywało się\n     *  po tym id. Przed przypisaniem 'movementId' do obiektu schedulera, będzie miało miejsce sprawdzenie czy parametry ataku się zgadzają, na wypadek, gdyby\n     *  najbliższym ruchem się okazała napaść na wioskę (której nie da się anulować bo nie należy do właściciela)\n     */\n    undoArmyMovement(fromTown, id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            yield fromTown.switchAction();\n            yield (0, plain_utility_1.addDelay)(100);\n            const hoverElement = document.querySelector('#toolbar_activity_commands');\n            (0, ui_utility_1.triggerHover)(hoverElement);\n            (_a = document.querySelector(`#${id}`)) === null || _a === void 0 ? void 0 : _a.click();\n        });\n    }\n    /**\n     * Ma rozpoznawać, czy znajduje się na karcie ATAK/OBRONA\n     * Ma dodać schdule button i inputy do podania czasu wykonania operacji.\n     * Na schedule click:\n     * -zczytać i zapamiętać wartości imputów\n     * -zczytać czas podróży jednostek i obliczyć na podstawie tych danych timeout\n     * -zczytać wioskę źródłową oraz gridy wioski na której operacja ma być wykonana\n     * -dodać obiekt ScheduleItem do listy oraz do LocaleStorage oraz ustawic timeout\n     * -timeout powinien usunąć wszstko co z nim związane powykonaniu operacji\n     */\n    extendAttackSupportUI(node) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // observer mounted, argument is the grand parent of the button panel\n            const buttonWrapper = node.querySelector('.button_wrapper');\n            const div = document.createElement('div');\n            div.innerHTML = button_panel_extension_html_1.default;\n            buttonWrapper.appendChild(div);\n            // Element ready, logic below:\n            const inputDateElement = document.querySelector('#schedule-date');\n            // prefill date input with current date\n            inputDateElement.value = this.getFormattedInputValueFromDate(new Date());\n            const scheduleButton = div.querySelector('#schedule-button');\n            scheduleButton.addEventListener('click', () => __awaiter(this, void 0, void 0, function* () {\n                var _a, _b;\n                this.error = null;\n                // get way duration time\n                const wayDurationText = node.querySelector('.way_duration').textContent.slice(1);\n                const wayDurationMs = (0, plain_utility_1.textToMs)(wayDurationText);\n                // get input data (all unit inputs)\n                const inputData = Array.from(node.querySelectorAll('.unit_input')).map(inputEl => {\n                    return {\n                        name: inputEl.getAttribute('name'),\n                        value: inputEl.value\n                    };\n                });\n                const operationType = node.firstElementChild.getAttribute('data-type') === 'attack' ? OperationType.ARMY_ATTACK : OperationType.ARMY_SUPPORT;\n                const attackTypeSelector = operationType === OperationType.ARMY_ATTACK ?\n                    (`[data-attack='${(_a = document.querySelector('.attack_type.checked')) === null || _a === void 0 ? void 0 : _a.dataset['attack']}']`) : undefined;\n                const inputDateValue = inputDateElement.value;\n                // Wartość z inputu type=\"date\" będzie w formacie \"YYYY-MM-DD\"\n                // Na przykład: \"2023-05-25\" dla 25 maja 2023\n                // #schedule-time      \n                const inputTimeValue = document.querySelector('#schedule-time').value;\n                const targetDate = this.getDateFromDateTimeInputValues(inputDateValue, inputTimeValue);\n                const actionDate = new Date(targetDate.getTime() - wayDurationMs);\n                const sourceCity = this.citySwitchManager.getCurrentCity();\n                // attack_support_tab_target_9542\n                const targetCitySelector = '#town_' + Array.from(node.classList).find(cls => cls.match(/attack_support_tab_target_\\d+/)).match(/\\d+/)[0];\n                if (!this.canAddSchedulerItem(actionDate)) {\n                    console.warn('unsafe operation, failed to be scheudled');\n                    this.error = 'Schedule failed. Cannot safely schedule operation.';\n                    return;\n                }\n                // jezeli inputy nie są wypełnione, nie dodawaj do schedulera\n                if (!inputData.some(data => data.value)) {\n                    this.error = 'Schedule failed. All units are empty.';\n                    return;\n                }\n                const id = `${sourceCity.name}${targetCitySelector}${actionDate.getTime()}${operationType}`;\n                document.querySelector('[data-menu_name=\"Info\"]').click();\n                yield (0, plain_utility_1.addDelay)(100);\n                yield (0, ui_utility_1.waitForElement)('.info_jump_to_town').then(el => el.click()).catch(() => {\n                    this.error = 'Schedule failed. Failed to switch to the city for grids.';\n                    return;\n                });\n                (_b = document.querySelector('.btn_save_location')) === null || _b === void 0 ? void 0 : _b.click();\n                yield (0, plain_utility_1.addDelay)(100);\n                yield (0, ui_utility_1.waitForElement)('.save_coordinates input', 4000)\n                    .then(el => {\n                    console.log('saving id:', id);\n                    (0, ui_utility_1.setInputValue)(el, id);\n                    el.blur();\n                })\n                    .catch(() => { throw new Error('Failed to save coordinates'); });\n                yield (0, plain_utility_1.addDelay)(100);\n                yield (0, ui_utility_1.waitForElement)('.save_coordinates .btn_confirm', 3000)\n                    .then(el => el.click())\n                    .catch(() => { throw new Error('Failed to confirm saving coordinates'); });\n                const scheduleTimeout = {\n                    timeoutPreparation: null,\n                    timeoutPreAction: null,\n                    timeoutAction: null,\n                };\n                const schedulerItem = {\n                    id: id,\n                    operationType: operationType,\n                    attackTypeSelector: attackTypeSelector,\n                    targetDate: targetDate,\n                    actionDate: actionDate,\n                    sourceCity: sourceCity,\n                    targetCitySelector: targetCitySelector,\n                    data: inputData,\n                    timeoutStructure: scheduleTimeout,\n                    movementId: null,\n                    undoMovementAction: null,\n                    cancelSchedule: () => __awaiter(this, void 0, void 0, function* () { return yield this.cancelSchedule(schedulerItem); }),\n                    postActionCleanup: () => __awaiter(this, void 0, void 0, function* () { return yield this.postActionCleanup(schedulerItem); }),\n                };\n                this.addActionTimeouts(schedulerItem);\n                this.scheduler.push(schedulerItem);\n                this.addSchedulerItemToUI(schedulerItem);\n                localStorage.setItem('scheduler', JSON.stringify(this.scheduler));\n                this.info = 'Operation scheduled';\n                console.log('Scheduler.extendAttackSupportUI.schedulerItem', schedulerItem);\n            }));\n        });\n    }\n    postActionCleanup(schedulerItem) {\n        return __awaiter(this, void 0, void 0, function* () {\n            setTimeout(() => {\n                this.removeSchedulerItemFromUI(schedulerItem);\n                this.scheduler = this.scheduler.filter((item) => item !== schedulerItem);\n                localStorage.setItem('scheduler', JSON.stringify(this.scheduler));\n            }, 0);\n            if (this.isLockTakenByScheduler)\n                this.lock.release();\n            this.isLockTakenByScheduler = false;\n            this.generalInfo.showInfo('Scheduler:', 'Czyszczenie cache po operacji.');\n            yield this.removeSavedCoords(schedulerItem.id);\n            this.generalInfo.hideInfo();\n            this.tryRestoreManagers();\n        });\n    }\n    cancelSchedule(schedulerItem) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.generalInfo.showInfo('Scheduler:', 'Anulowanie operacji.');\n            const { timeoutStructure } = schedulerItem;\n            if (timeoutStructure.timeoutPreparation)\n                clearTimeout(timeoutStructure.timeoutPreparation);\n            if (timeoutStructure.timeoutPreAction)\n                clearTimeout(timeoutStructure.timeoutPreAction);\n            if (timeoutStructure.timeoutAction)\n                clearTimeout(timeoutStructure.timeoutAction);\n            if (this.isLockTakenByScheduler) {\n                this.lock.release();\n                this.isLockTakenByScheduler = false;\n            }\n            this.scheduler = this.scheduler.filter(item => item !== schedulerItem);\n            localStorage.setItem('scheduler', JSON.stringify(this.scheduler));\n            this.removeSchedulerItemFromUI(schedulerItem);\n            yield this.removeSavedCoords(schedulerItem.id);\n            this.generalInfo.hideInfo();\n            this.tryRestoreManagers();\n        });\n    }\n    removeSavedCoords(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a, _b;\n            (_b = (_a = Array.from(document.querySelectorAll('.content.js-dropdown-item-list .item.bookmark'))\n                .find(el => { var _a; return ((_a = el.textContent) === null || _a === void 0 ? void 0 : _a.trim()) === id; })) === null || _a === void 0 ? void 0 : _a.querySelector('.remove')) === null || _b === void 0 ? void 0 : _b.click();\n            yield (0, ui_utility_1.waitForElementInterval)('.confirmation .btn_confirm', { interval: 500, timeout: 2000 })\n                .then(el => el.click());\n        });\n    }\n    addActionTimeouts(schedulerItem) {\n        const { actionDate, timeoutStructure, targetCitySelector, data: inputData, operationType, attackTypeSelector } = schedulerItem;\n        const preparationTime = actionDate.getTime() - new Date().getTime() - Scheduler.TURN_OFF_MANAGERS_TIME_MS;\n        timeoutStructure.timeoutPreparation = setTimeout(() => {\n            this.generalInfo.showInfo('Scheduler:', 'pauzowanie uruchomionych managarów przed operacją.');\n            // console.log('NOW half minute before action, time is:', formatDateToSimpleString(new Date()))\n            this.masterManager.pauseRunningManagers(['scheduler']);\n            const tenSecondsBeforeAction = actionDate.getTime() - new Date().getTime() - 10 * 1000;\n            timeoutStructure.timeoutPreAction = setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n                var _a, _b;\n                try {\n                    // console.log('NOW ten seconds before action, time is:', formatDateToSimpleString(new Date()), 'try take lock')\n                    yield this.lock.acquire();\n                    console.log('lock taken');\n                    this.isLockTakenByScheduler = true;\n                    this.generalInfo.showInfo('Scheduler:', 'przygotowanie do operacji.');\n                    yield schedulerItem.sourceCity.switchAction();\n                    // przejdź do współrzędnych\n                    (_a = document.querySelector('.js-coord-button')) === null || _a === void 0 ? void 0 : _a.click();\n                    const dropdownList = yield (0, ui_utility_1.waitForElement)('.content.js-dropdown-item-list', 4000);\n                    const dropdownItem = Array.from(dropdownList.querySelectorAll(`.item.bookmark.option`))\n                        .find(el => { var _a; return ((_a = el.textContent) === null || _a === void 0 ? void 0 : _a.trim()) === schedulerItem.id; });\n                    if (!dropdownItem)\n                        throw new Error('Failed to find dropdown item');\n                    dropdownItem.click();\n                    yield (0, plain_utility_1.addDelay)(400);\n                    // znajdź wioskę i kliknij odpowiednią operację\n                    (_b = document.querySelector('.ui-dialog-titlebar-close')) === null || _b === void 0 ? void 0 : _b.click();\n                    (0, ui_utility_1.performComplexClick)((yield (0, ui_utility_1.waitForElement)(targetCitySelector, 4000).catch(() => { throw new Error('target city not found'); })));\n                    if (operationType === OperationType.ARMY_ATTACK) {\n                        (yield (0, ui_utility_1.waitForElementInterval)('#attack', { interval: 500, timeout: 2000 })).click();\n                        yield (0, ui_utility_1.waitForElementInterval)(attackTypeSelector, { interval: 500, timeout: 2000 }).then(el => el.click());\n                    }\n                    else {\n                        (yield (0, ui_utility_1.waitForElementInterval)('#support', { interval: 500, timeout: 2000 })).click();\n                    }\n                    // wypełnij inputy\n                    for (const data of inputData) {\n                        const input = yield (0, ui_utility_1.waitForElementInterval)(`input[name=\"${data.name}\"]`, { interval: 500, timeout: 2000 });\n                        (0, ui_utility_1.setInputValue)(input, data.value);\n                        input.blur();\n                    }\n                    ;\n                }\n                catch (error) {\n                    console.error('Error during 10 seconds before action:', error);\n                    this.error = 'Schedule failed. Check console for more details.';\n                    this.generalInfo.hideInfo();\n                    schedulerItem.cancelSchedule();\n                    return;\n                }\n                timeoutStructure.timeoutAction = setTimeout(() => __awaiter(this, void 0, void 0, function* () {\n                    var _a;\n                    try {\n                        // console.log('NOW ACTION, time is:', formatDateToSimpleString(new Date()))\n                        // console.log('now time + way duration:', formatDateToSimpleString(new Date(new Date().getTime() + wayDurationMs)))\n                        if (operationType === OperationType.ARMY_ATTACK) {\n                            (yield (0, ui_utility_1.waitForElement)('#btn_attack_town')).click();\n                        }\n                        else {\n                            (yield (0, ui_utility_1.waitForElement)('.attack_support_window a .middle')).click();\n                        }\n                        this.armyMovement.setCallback((id) => {\n                            schedulerItem.movementId = id;\n                            schedulerItem.undoMovementAction = () => this.undoArmyMovement(schedulerItem.sourceCity, id);\n                        });\n                        (_a = document.querySelector('.ui-dialog-titlebar-close')) === null || _a === void 0 ? void 0 : _a.click();\n                        this.error = null;\n                    }\n                    catch (error) {\n                        console.error('Error during action:', error);\n                        this.error = 'Schedule failed. Check console for more details.';\n                    }\n                    finally {\n                        schedulerItem.postActionCleanup();\n                    }\n                }), actionDate.getTime() - new Date().getTime());\n            }), tenSecondsBeforeAction);\n        }, preparationTime);\n    }\n    goToCoords(coords) {\n        const gridXInput = document.querySelector('.coord.coord_x.js-coord-x input[type=\"text\"]');\n        const gridYInput = document.querySelector('.coord.coord_y.js-coord-y input[type=\"text\"]');\n        (0, ui_utility_1.setInputValue)(gridXInput, coords[0]);\n        (0, ui_utility_1.setInputValue)(gridYInput, coords[1]);\n        document.querySelector('.btn_jump_to_coordination').click();\n    }\n    /*\n    Wczytuje storage, w którym znajduje się niebędne info do wykonania timeoutów z planem operacji.\n    Iteruje po każdym itemie i uzupełnia jego objekt o id timeoutów, oraz funkcję do anulowania operacji.\n    */\n    synchronizeSchedulerWithStorage() {\n        const storageScheduler = JSON.parse(localStorage.getItem('scheduler') || '[]');\n        storageScheduler.forEach(schedulerItem => this.hydrateSchedulerItem(schedulerItem));\n        this.handleIfSchedulerListIsEmpty();\n    }\n    hydrateSchedulerItem(schedulerItem) {\n        if (schedulerItem.operationType === OperationType.ARMY_ATTACK || schedulerItem.operationType === OperationType.ARMY_SUPPORT) {\n            schedulerItem.actionDate = new Date(schedulerItem.actionDate);\n            schedulerItem.targetDate = new Date(schedulerItem.targetDate);\n            schedulerItem.sourceCity = this.citySwitchManager.getCityByName(schedulerItem.sourceCity.name); //TODO: possible erorr\n            if (!this.canAddSchedulerItem(schedulerItem.actionDate)) {\n                console.warn('unsafe operation, failed to be scheudled during hydration');\n                this.hydrationError = `${schedulerItem.sourceCity.name} ${schedulerItem.operationType === OperationType.ARMY_ATTACK ? 'attack' : 'support'} operation  at '${schedulerItem.targetDate}' on city \"${schedulerItem.targetCitySelector}\" failed to be scheduled during hydration.`;\n                return;\n            }\n            schedulerItem.cancelSchedule = () => __awaiter(this, void 0, void 0, function* () { return yield this.cancelSchedule(schedulerItem); });\n            schedulerItem.postActionCleanup = () => __awaiter(this, void 0, void 0, function* () { return yield this.postActionCleanup(schedulerItem); });\n            this.addActionTimeouts(schedulerItem);\n            this.scheduler.push(schedulerItem);\n            this.addSchedulerItemToUI(schedulerItem);\n        }\n    }\n    set error(error) {\n        const errorElement = document.querySelector('#schedule-error');\n        if (error) {\n            if (errorElement) {\n                errorElement.textContent = error;\n            }\n        }\n        else {\n            if (errorElement) {\n                errorElement.textContent = '';\n            }\n        }\n        this._error = error;\n    }\n    set hydrationError(error) {\n        // TODO: add error display container\n        this._hydrationError = error;\n    }\n    set info(info) {\n        const infoElement = document.querySelector('#schedule-info');\n        if (info) {\n            if (infoElement) {\n                infoElement.textContent = info;\n                setTimeout(() => {\n                    infoElement.textContent = '';\n                }, 4000);\n            }\n        }\n        else {\n            if (infoElement) {\n                infoElement.textContent = '';\n            }\n        }\n        this._info = info;\n    }\n    /**\n     * Sprawdza czy można dodać operację do schedulera ze względu na czas do wykonania operacji oraz czas do najbliższej akcji w schedulerze.\n     * Jezeli odstęp czasowy pomiędzy tą operacją a teraz lub najbliższą zaplanowaną operacją jest mniejszy niż 10s zwraca fałsz.\n     */\n    canAddSchedulerItem(actionDate) {\n        // jeżeli czas do wykonbania operacji jest większy niż 10s, sprawdź czy czas do najbliższej akcji jest większy niż 10s\n        if (actionDate.getTime() - new Date().getTime() > 10 * 1000) {\n            // jeżeli scheduler jest pusty, można dodać operację\n            if (this.scheduler.length === 0) {\n                return true;\n            }\n            const hasNoInterlacingTimes = !this.scheduler.some((item) => {\n                if (Math.abs(item.actionDate.getTime() - actionDate.getTime()) < 10 * 1000) {\n                    console.log('Interlacing times:', item.actionDate, actionDate);\n                    console.log('\\t:', item.actionDate.getTime() - actionDate.getTime(), (item.actionDate.getTime() - actionDate.getTime()) / 1000);\n                    return true;\n                }\n                console.log('Not interlacing times:', item.actionDate, actionDate);\n                return false;\n            });\n            return hasNoInterlacingTimes;\n        }\n        // jeżeli czas do wykonbania operacji jest mniejszy niż 10s, nie podejmuj się operacji\n        else {\n            return false;\n        }\n    }\n    /**\n     * Sprawdza czy przywrócenie działania managerów nie koliduje z obecną kolejką schedulera, (minumum 60s do najbliższej akcji)\n     * jeżeli nie koliduje to przywraca działanie managerów.\n     */\n    tryRestoreManagers() {\n        if (this.scheduler.length === 0) {\n            console.log('RESTORE MANAGERS');\n            this.masterManager.resumeRunningManagers(['scheduler']);\n        }\n        else {\n            // znajdź najbliższą akcję w schedulerze\n            const now = new Date();\n            const nextClosestActionTime = this.scheduler.reduce((acc, item) => {\n                if (item.actionDate < now) {\n                    return acc;\n                }\n                if (acc && acc < item.actionDate) {\n                    return acc;\n                }\n                return item.actionDate;\n            }, null);\n            if (nextClosestActionTime) {\n                const timeDiff = nextClosestActionTime.getTime() - new Date().getTime();\n                // jeżeli czas do najbliższej akcji jest większy niż 60s to przywróć działanie managerów\n                if (timeDiff > 60 * 1000) {\n                    console.log('RESTORE MANAGERS');\n                    this.masterManager.resumeRunningManagers(['scheduler']);\n                }\n                else {\n                    console.log('DO NOT RESTORE MANAGERS');\n                }\n                return;\n            }\n            // jeżeli czas Data jest zaprzeszła, przywróć działanie managerów\n            this.masterManager.resumeRunningManagers(['scheduler']);\n        }\n    }\n    getDateFromDateTimeInputValues(inputDateValue, inputTimeValue) {\n        const timeRegex = /(\\d{2})\\D*(\\d{2})\\D*(\\d{2})/;\n        const match = inputTimeValue.match(timeRegex);\n        if (!match || !inputDateValue.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n            throw new Error('Invalid time format');\n        }\n        const [, hours, minutes, seconds] = match;\n        const parsedTime = `${hours}:${minutes}:${seconds}`;\n        return new Date(`${inputDateValue}T${parsedTime}`);\n    }\n    getFormattedInputValueFromDate(date) {\n        const year = date.getFullYear();\n        const month = String(date.getMonth() + 1).padStart(2, '0'); // Miesiące są indeksowane od 0\n        const day = String(date.getDate()).padStart(2, '0');\n        return `${year}-${month}-${day}`;\n    }\n    mountAttackSupportSubpageObserver(parentNode) {\n        const observer = new MutationObserver((mutations) => {\n            for (const mutation of mutations) {\n                if (mutation.type === 'childList') {\n                    for (const node of mutation.addedNodes) {\n                        if (node.nodeType === Node.ELEMENT_NODE && node.classList.contains('attack_support_window')) {\n                            this.extendAttackSupportUI(node);\n                            return;\n                        }\n                    }\n                }\n            }\n        });\n        observer.observe(parentNode, { childList: true, subtree: true });\n        return () => observer.disconnect();\n    }\n    mountCityDialogObserver() {\n        return __awaiter(this, void 0, void 0, function* () {\n            let unobserveAttackSupportSubpages = null;\n            const observer = new MutationObserver((mutations) => {\n                for (const mutation of mutations) {\n                    if (mutation.type === 'childList') {\n                        for (const node of mutation.addedNodes) {\n                            if (node.nodeType === Node.ELEMENT_NODE &&\n                                node.getAttribute('class') === 'ui-dialog ui-corner-all ui-widget ui-widget-content ui-front ui-draggable ui-resizable js-window-main-container') {\n                                unobserveAttackSupportSubpages = this.mountAttackSupportSubpageObserver(node);\n                                return;\n                            }\n                        }\n                        for (const node of mutation.removedNodes) {\n                            if (node.nodeType === Node.ELEMENT_NODE &&\n                                node.getAttribute('role') === 'dialog' &&\n                                node.classList.contains('ui-dialog') &&\n                                node.classList.contains('js-window-main-container')) {\n                                if (unobserveAttackSupportSubpages) {\n                                    unobserveAttackSupportSubpages();\n                                    unobserveAttackSupportSubpages = null;\n                                    return;\n                                }\n                            }\n                        }\n                    }\n                }\n            });\n            observer.observe(document.body, {\n                childList: true,\n            });\n        });\n    }\n    addSchedulerListConfigWindow() {\n        const style = document.createElement('style');\n        style.textContent = scheduler_list_css_1.default;\n        document.head.appendChild(style);\n        const schedulerListConfigWindow = document.createElement('div');\n        schedulerListConfigWindow.innerHTML = scheduler_list_prod_html_1.default;\n        document.body.appendChild(schedulerListConfigWindow);\n        this.addSchedulerListConfigListeners();\n    }\n    addSchedulerListConfigListeners() {\n        const toggleButton = document.querySelector('#scheduler-toggle-button');\n        const tableContainer = document.querySelector('#table-container');\n        toggleButton === null || toggleButton === void 0 ? void 0 : toggleButton.addEventListener('click', () => {\n            tableContainer === null || tableContainer === void 0 ? void 0 : tableContainer.classList.toggle('hidden');\n        });\n        const closeIcon = document.querySelector('.close-icon');\n        closeIcon === null || closeIcon === void 0 ? void 0 : closeIcon.addEventListener('click', () => {\n            tableContainer === null || tableContainer === void 0 ? void 0 : tableContainer.classList.add('hidden');\n        });\n    }\n    addSchedulerItemToUI(schedulerItem) {\n        const table = document.querySelector('#scheduler-lookup-table tbody');\n        const row = table.insertRow();\n        const id = this.getSchedulerItemId(schedulerItem);\n        row.setAttribute('data-scheduler-item-id', id);\n        const operaitonTypeCell = row.insertCell();\n        operaitonTypeCell.textContent = schedulerItem.operationType === OperationType.ARMY_ATTACK ? 'Attack' : 'Support';\n        operaitonTypeCell.classList.add(schedulerItem.operationType === OperationType.ARMY_ATTACK ? 'attack' : 'support');\n        row.insertCell().textContent = schedulerItem.sourceCity.name;\n        row.insertCell().textContent = schedulerItem.targetCitySelector;\n        row.insertCell().textContent = schedulerItem.actionDate.toLocaleTimeString();\n        row.insertCell().textContent = schedulerItem.targetDate.toLocaleTimeString();\n        const cancelButtonCell = row.insertCell();\n        const cancelButton = document.createElement('button');\n        cancelButton.classList.add('cancel-button');\n        cancelButton.textContent = 'Cancel';\n        cancelButton.addEventListener('click', () => {\n            schedulerItem.cancelSchedule();\n            this.removeSchedulerItemFromUI(schedulerItem);\n        });\n        cancelButtonCell.appendChild(cancelButton);\n        this.handleIfSchedulerListIsEmpty();\n    }\n    removeSchedulerItemFromUI(schedulerItem) {\n        console.log('removeSchedulerItemFromUI', schedulerItem);\n        const table = document.querySelector('#scheduler-lookup-table tbody');\n        const row = table.querySelector(`[data-scheduler-item-id=\"${this.getSchedulerItemId(schedulerItem)}\"]`);\n        console.log('row', row);\n        row.remove();\n        this.handleIfSchedulerListIsEmpty();\n    }\n    getSchedulerItemId(schedulerItem) {\n        return schedulerItem.operationType + schedulerItem.sourceCity.name + schedulerItem.targetCitySelector + schedulerItem.targetDate.getTime() + schedulerItem.actionDate.getTime();\n    }\n    handleIfSchedulerListIsEmpty() {\n        const noSchedules = document.querySelector('#no-schedules');\n        if (this.scheduler.length === 0) {\n            noSchedules.classList.remove('hidden');\n        }\n        else {\n            noSchedules.classList.add('hidden');\n        }\n    }\n    canSafelyRefresh() {\n        return this.scheduler.length === 0 || this.scheduler.every((item) => item.actionDate > new Date(new Date().getTime() + 120 * 1000));\n    }\n}\nScheduler.MIN_PRECEDENCE_TIME_MS = 10 * 1000;\nScheduler.TURN_OFF_MANAGERS_TIME_MS = 20 * 1000;\nScheduler.PREPARATION_TIME_MS = 10 * 1000;\nexports.default = Scheduler;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst gps_config_1 = __importDefault(require(\"../../gps.config\"));\nconst storage_manager_1 = __importDefault(require(\"./storage-manager\"));\nclass ConfigManager {\n    constructor() { }\n    static getInstance() {\n        if (!ConfigManager.instance) {\n            ConfigManager.instance = new ConfigManager();\n            ConfigManager.instance.storageManager = storage_manager_1.default.getInstance();\n            ConfigManager.instance.config = ConfigManager.instance.initConfig();\n        }\n        return ConfigManager.instance;\n    }\n    initConfig() {\n        const config = this.storageManager.readFromLocalStorage('config');\n        if (!config || !this.isConfigStructureEqual(config, gps_config_1.default)) {\n            this.storageManager.writeToLocalStorage('config', gps_config_1.default);\n            return gps_config_1.default;\n        }\n        return config;\n    }\n    isConfigStructureEqual(config, gpsConfig) {\n        return Object.keys(config).length === Object.keys(gpsConfig).length &&\n            Object.keys(config).every(key => {\n                if (!(key in gpsConfig)) {\n                    return false;\n                }\n                if (typeof config[key] === 'object' && config[key] !== null) {\n                    return this.isConfigStructureEqual(config[key], gpsConfig[key]);\n                }\n                return typeof config[key] === typeof gpsConfig[key];\n            });\n    }\n    getConfig() {\n        return this.config;\n    }\n    persistConfig() {\n        this.storageManager.writeToLocalStorage('config', this.config);\n    }\n    getConfigValue(key) {\n        return this.config[key];\n    }\n}\nexports.default = ConfigManager;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRandomMs = exports.areGridsEqual = exports.msToTimeString = exports.formatDateToSimpleString = exports.getTimeInFuture = exports.addDelay = exports.isVisible = exports.textToMs = void 0;\nexports.getRandomInt = getRandomInt;\nexports.areArraysContentsEqual = areArraysContentsEqual;\nexports.shuffleArray = shuffleArray;\nexports.isMobile = isMobile;\n/**\n * Takes string in format of xx:xx:xx - parses and returns number in miliseconds\n * @param text string in format 00:02:38\n * @returns miliseconds\n */\nconst textToMs = (text) => {\n    const timeArray = text.split(':').map(el => parseInt(el));\n    const timeout = (timeArray[0] * 1000 * 60 * 60) + (timeArray[1] * 1000 * 60) + (timeArray[2] * 1000);\n    return timeout;\n};\nexports.textToMs = textToMs;\nconst isVisible = (element) => {\n    return element.offsetParent;\n};\nexports.isVisible = isVisible;\nconst addDelay = (time = 1000) => {\n    return new Promise(resolve => setTimeout(resolve, time));\n};\nexports.addDelay = addDelay;\nconst getTimeInFuture = (timeMs) => {\n    const now = new Date();\n    const futureDate = new Date(now.getTime() + timeMs);\n    return `${futureDate.getHours().toString().padStart(2, '0')}:${futureDate.getMinutes().toString().padStart(2, '0')}:${futureDate.getSeconds().toString().padStart(2, '0')}`;\n};\nexports.getTimeInFuture = getTimeInFuture;\nconst formatDateToSimpleString = (date) => {\n    return `${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}:${date.getSeconds().toString().padStart(2, '0')}`;\n};\nexports.formatDateToSimpleString = formatDateToSimpleString;\nconst msToTimeString = (ms) => {\n    const hours = Math.floor(ms / (1000 * 60 * 60));\n    const minutes = Math.floor((ms % (1000 * 60 * 60)) / (1000 * 60));\n    const seconds = Math.floor((ms % (1000 * 60)) / 1000);\n    return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n};\nexports.msToTimeString = msToTimeString;\nfunction getRandomInt(max) {\n    return Math.floor(Math.random() * max);\n}\nconst areGridsEqual = (grid1, grid2) => {\n    return grid1[0] === grid2[0] && grid1[1] === grid2[1];\n};\nexports.areGridsEqual = areGridsEqual;\nfunction areArraysContentsEqual(arr1, arr2) {\n    if (arr1.length !== arr2.length)\n        return false;\n    for (let i = 0; i < arr1.length; i++) {\n        if (arr1[i] !== arr2[i])\n            return false;\n    }\n    return true;\n}\nfunction shuffleArray(array) {\n    for (let i = array.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [array[i], array[j]] = [array[j], array[i]];\n    }\n}\nfunction isMobile() {\n    if (navigator.userAgentData) {\n        return navigator.userAgentData.mobile;\n    }\n    else {\n        if (navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/Android/i))\n            return true;\n        return false;\n    }\n}\nconst getRandomMs = (min, max) => {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n};\nexports.getRandomMs = getRandomMs;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass StorageManager {\n    constructor() { }\n    static getInstance() {\n        if (!StorageManager.instance) {\n            StorageManager.instance = new StorageManager();\n        }\n        return StorageManager.instance;\n    }\n    readFromLocalStorage(key) {\n        const item = localStorage.getItem(key);\n        return item ? JSON.parse(item) : null;\n    }\n    writeToLocalStorage(key, value) {\n        localStorage.setItem(key, JSON.stringify(value));\n    }\n}\nexports.default = StorageManager;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Lock {\n    constructor() {\n        this.isLocked = false;\n        this.lockedBy = null;\n        this.lockedAt = null;\n        this.lockCheckInterval = null;\n        this.queue = [];\n    }\n    static getInstance() {\n        if (!this.instance) {\n            this.instance = new Lock();\n            this.instance.setLockCheckInterval();\n        }\n        return this.instance;\n    }\n    setLockCheckInterval() {\n        this.lockCheckInterval = setInterval(() => {\n            if (this.lockedAt && (Date.now() - this.lockedAt > 1000 * 60 * 5)) {\n                console.warn(`lock is locked for too long by ${this.lockedBy}, releasing...`);\n                // TODO: or consider restarting all managers\n                this.release();\n            }\n        }, 1000 * 60 * 5);\n    }\n    acquire(lockedBy) {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log('try acquiring');\n            if (!this.isLocked) {\n                console.log('\\tlock is free, acquire Lock');\n                this.isLocked = true;\n                this.lockedBy = lockedBy !== null && lockedBy !== void 0 ? lockedBy : null;\n                this.lockedAt = Date.now();\n                return;\n            }\n            console.log('\\tlock is locked, add to queue');\n            yield new Promise((resolve) => {\n                this.queue.push(resolve);\n            });\n        });\n    }\n    release() {\n        console.log('release lock()');\n        // Release the next waiting task in the queue\n        if (this.queue.length > 0) {\n            const nextResolve = this.queue.shift();\n            if (nextResolve) {\n                console.log('\\t-but next element in the queue takes it turn');\n                nextResolve();\n            }\n        }\n        else {\n            this.isLocked = false;\n            console.log('lock released()');\n        }\n    }\n    isTaken() {\n        return this.isLocked;\n    }\n}\nLock.instance = null;\nexports.default = Lock;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cancelHover = exports.triggerHover = void 0;\nexports.simulateClick = simulateClick;\nexports.setInputValue = setInputValue;\nexports.waitForElements = waitForElements;\nexports.waitForElement = waitForElement;\nexports.waitForElementInterval = waitForElementInterval;\nexports.waitForElementsInterval = waitForElementsInterval;\nexports.waitForElementFromNode = waitForElementFromNode;\nexports.onPageLoad = onPageLoad;\nexports.mouseDownEvent = mouseDownEvent;\nexports.performComplexClick = performComplexClick;\nexports.mouseUpEvent = mouseUpEvent;\nexports.triggerKeydown = triggerKeydown;\nexports.triggerPaste = triggerPaste;\nexports.performComplexInput = performComplexInput;\nconst plain_utility_1 = require(\"./plain-utility\");\nfunction simulateClick(element) {\n    if (element) {\n        const rect = element.getBoundingClientRect();\n        const event = new MouseEvent('click', {\n            clientX: rect.left + rect.width / 2,\n            clientY: rect.top + rect.height / 2,\n            bubbles: true,\n            cancelable: true,\n            view: window\n        });\n        element.dispatchEvent(event);\n    }\n}\nconst triggerHover = (element) => {\n    element && element.dispatchEvent(new Event('mouseover', {\n        bubbles: true,\n        cancelable: true,\n    }));\n};\nexports.triggerHover = triggerHover;\nconst cancelHover = (element) => {\n    element && element.dispatchEvent(new Event('mouseout', {\n        bubbles: true,\n        cancelable: true,\n    }));\n};\nexports.cancelHover = cancelHover;\nfunction appendChildAtIndex(parent, newChild, index) {\n    const children = parent.children;\n    if (index >= children.length) {\n        parent.appendChild(newChild);\n    }\n    else {\n        parent.insertBefore(newChild, children[index]);\n    }\n}\n// Funkcja do ustawienia wartości i wywołania zdarzeń\nfunction setInputValue(inputElement, value) {\n    // Sprawdzenie, czy element jest rzeczywiście <input>\n    if (inputElement && inputElement.tagName === 'INPUT') {\n        // Ustawienie wartości inputu\n        inputElement.value = typeof value === \"number\" ? value.toString() : value;\n        // Tworzenie zdarzenia input\n        const inputEvent = new Event('input', { bubbles: true });\n        inputElement.dispatchEvent(inputEvent);\n        // Tworzenie zdarzenia change\n        const changeEvent = new Event('change', { bubbles: true });\n        inputElement.dispatchEvent(changeEvent);\n    }\n    else {\n        console.warn(`setInputValue(${inputElement.name}) unsuccessful`);\n    }\n}\nfunction waitForElements(selector, timeoutMs = 8000) {\n    return new Promise((resolve, reject) => {\n        // Funkcja do aktualizacji wyników\n        const elements = document.querySelectorAll(selector);\n        if (elements.length > 0) {\n            resolve(elements);\n        }\n        else {\n            // Ustawienie observera do monitorowania DOM\n            let timeout = setTimeout(() => {\n                observer.disconnect();\n                reject(`waitForElements(${selector}) - not found within timeout`);\n            }, timeoutMs);\n            const observer = new MutationObserver((mutations) => {\n                for (const mutation of mutations) {\n                    if (mutation.type === 'childList') {\n                        const elements = document.querySelectorAll(selector);\n                        if (elements.length > 0) {\n                            observer.disconnect();\n                            clearTimeout(timeout);\n                            resolve(elements);\n                        }\n                    }\n                }\n            });\n            observer.observe(document.body, { childList: true, subtree: true });\n        }\n    });\n}\nfunction waitForElement(selector, timeout = 8000) {\n    return new Promise((resolve, reject) => {\n        const element = document.querySelector(selector);\n        if (element) {\n            return resolve(element);\n        }\n        else {\n            const timeoutId = setTimeout(() => {\n                observer.disconnect();\n                reject(`${selector} - not found within timeout`);\n            }, timeout);\n            const observer = new MutationObserver((mutations) => {\n                for (const mutation of mutations) {\n                    if (mutation.type === 'childList') {\n                        for (const node of mutation.addedNodes) {\n                            if (node.nodeType === Node.ELEMENT_NODE && node.matches(selector)) {\n                                observer.disconnect();\n                                clearTimeout(timeout);\n                                resolve(node);\n                            }\n                        }\n                    }\n                }\n            });\n            // Rozpoczęcie obserwacji\n            observer.observe(document.body, { childList: true, subtree: true });\n        }\n    });\n}\nconst WaitForElementOptionsDefaults = {\n    timeout: 8000,\n    fromNode: document,\n    interval: 333,\n};\nfunction waitForElementInterval(selector, options = WaitForElementOptionsDefaults) {\n    const { timeout = 8000, fromNode = document, interval = 333 } = options;\n    return new Promise((resolve, reject) => {\n        const element = fromNode.querySelector(selector);\n        if (element) {\n            resolve(element);\n        }\n        else {\n            const timeoutId = setTimeout(() => {\n                clearInterval(observer);\n                reject(`${selector} - not found within timeout`);\n            }, timeout);\n            const observer = setInterval(() => {\n                const element = fromNode.querySelector(selector);\n                if (element) {\n                    clearInterval(observer);\n                    clearTimeout(timeoutId);\n                    resolve(element);\n                }\n            }, interval);\n        }\n    });\n}\nfunction waitForElementsInterval(selector, options = WaitForElementOptionsDefaults) {\n    const { timeout = 8000, fromNode = document, interval = 333 } = options;\n    return new Promise((resolve, reject) => {\n        const elements = fromNode.querySelectorAll(selector);\n        if (elements.length > 0) {\n            resolve(elements);\n        }\n        else {\n            const timeoutId = setTimeout(() => {\n                clearInterval(observer);\n                reject(`${selector} - not found within timeout`);\n            }, timeout);\n            const observer = setInterval(() => {\n                const elements = fromNode.querySelectorAll(selector);\n                if (elements.length > 0) {\n                    clearInterval(observer);\n                    clearTimeout(timeoutId);\n                    resolve(elements);\n                }\n            }, interval);\n        }\n    });\n}\nfunction waitForElementFromNode(parentNode, selector, timeout = 8000) {\n    return new Promise((resolve, reject) => {\n        const element = parentNode.querySelector(selector);\n        // Jeśli element już istnieje to zostaje zwrócony odrazu\n        if (element) {\n            // console.log(`${selector} - FOUND, resolve:`, element);\n            return resolve(element);\n        }\n        else {\n            // console.log(`${selector} - not found, mount observer`);\n            // Inicjalizacja timeoutu\n            const timeoutId = setTimeout(() => {\n                observer.disconnect();\n                reject(`${selector} - not found within timeout`);\n            }, timeout);\n            // Inicjalizacja MutationObserver\n            const observer = new MutationObserver((mutations) => {\n                for (const mutation of mutations) {\n                    if (mutation.type === 'childList') {\n                        for (const node of mutation.addedNodes) {\n                            if (node.nodeType === Node.ELEMENT_NODE && node.matches(selector)) {\n                                observer.disconnect();\n                                clearTimeout(timeoutId);\n                                resolve(node);\n                            }\n                        }\n                    }\n                }\n            });\n            // Rozpoczęcie obserwacji\n            observer.observe(parentNode instanceof Document ? parentNode.body : parentNode, { childList: true, subtree: true });\n        }\n    });\n}\n/** Function that waits for DOM to load then applies main loop. */\nfunction onPageLoad(callback) {\n    const initWrapper = () => {\n        // const lodadingContainer = document.querySelector('#screen-loading');\n        const timeout = setTimeout(() => {\n            clearTimeout(timeout);\n            setTimeout(callback, 2000);\n        }, 500);\n    };\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', initWrapper);\n    }\n    else {\n        initWrapper();\n    }\n}\nfunction simulateKeyPress(key) {\n    // Tworzenie zdarzenia keydown\n    const keydownEvent = new KeyboardEvent('keydown', {\n        key: key,\n        code: `Key${key.toUpperCase()}`, // Zakładając, że używasz klawisza alfanumerycznego\n        keyCode: key.charCodeAt(0), // Kod klawisza w starszych przeglądarkach\n        which: key.charCodeAt(0),\n        bubbles: true,\n        cancelable: true\n    });\n    // Tworzenie zdarzenia keyup\n    const keyupEvent = new KeyboardEvent('keyup', {\n        key: key,\n        code: `Key${key.toUpperCase()}`,\n        keyCode: key.charCodeAt(0),\n        which: key.charCodeAt(0),\n        bubbles: true,\n        cancelable: true\n    });\n    // Wywoływanie zdarzeń na całym dokumencie\n    document.dispatchEvent(keydownEvent);\n    setTimeout(() => {\n        document.dispatchEvent(keyupEvent);\n    }, 100); // Czas trwania wciśnięcia klawisza, w milisekundach\n}\nfunction mouseDownEvent(element) {\n    const mouseDownEvent = new MouseEvent('mousedown', {\n        bubbles: true,\n        cancelable: true,\n        view: window\n    });\n    if (element) {\n        element.dispatchEvent(mouseDownEvent);\n    }\n}\nfunction performComplexClick(element) {\n    return __awaiter(this, void 0, void 0, function* () {\n        mouseDownEvent(element);\n        yield (0, plain_utility_1.addDelay)(50);\n        mouseUpEvent(element);\n    });\n}\nfunction mouseUpEvent(element) {\n    const mouseUpEvent = new MouseEvent('mouseup', {\n        bubbles: true,\n        cancelable: true,\n        view: window\n    });\n    if (element) {\n        element.dispatchEvent(mouseUpEvent);\n    }\n    else {\n        console.warn(`mouseUpEvent() - ${element} not found`);\n    }\n}\nfunction triggerKeydown(element, key) {\n    const event = new KeyboardEvent('keydown', {\n        key: key,\n        bubbles: true,\n        cancelable: true\n    });\n    element.dispatchEvent(event);\n}\nfunction triggerPaste(element, pasteData) {\n    const event = new ClipboardEvent('paste', {\n        bubbles: true,\n        cancelable: true,\n        clipboardData: new DataTransfer()\n    });\n    if (event.clipboardData) {\n        event.clipboardData.setData('text/plain', pasteData);\n        element.dispatchEvent(event);\n    }\n    else {\n        console.warn('triggerPaste() - clipboardData is null');\n    }\n}\nfunction performComplexInput(inputElement, value) {\n    // Focus event\n    inputElement.focus();\n    const focusEvent = new Event('focus', { bubbles: true, cancelable: true });\n    inputElement.dispatchEvent(focusEvent);\n    // Simulate typing each character\n    for (let char of value) {\n        // Keydown event\n        const keydownEvent = new KeyboardEvent('keydown', {\n            key: char,\n            bubbles: true,\n            cancelable: true\n        });\n        inputElement.dispatchEvent(keydownEvent);\n        // Keypress event\n        const keypressEvent = new KeyboardEvent('keypress', {\n            key: char,\n            bubbles: true,\n            cancelable: true\n        });\n        inputElement.dispatchEvent(keypressEvent);\n        // Input event\n        inputElement.value += char; // Update the input's value\n        const inputEvent = new Event('input', { bubbles: true, cancelable: true });\n        inputElement.dispatchEvent(inputEvent);\n        // Keyup event\n        const keyupEvent = new KeyboardEvent('keyup', {\n            key: char,\n            bubbles: true,\n            cancelable: true\n        });\n        inputElement.dispatchEvent(keyupEvent);\n    }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(927);\n"],"names":["ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","prototype","call","ownKeys","Object","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","value","EventEmitter","init","this","module","exports","once","emitter","name","Promise","resolve","reject","errorListener","err","removeListener","resolver","slice","arguments","eventTargetAgnosticAddListener","handler","on","addErrorHandlerIfEventEmitter","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","m","events","existing","warning","create","newListener","emit","unshift","push","length","warned","w","Error","String","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","Array","i","unwrapListeners","arrayClone","listenerCount","n","copy","flags","addEventListener","wrapListener","arg","removeEventListener","defineProperty","enumerable","get","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","context","len","listeners","addListener","prependListener","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","key","keys","rawListeners","eventNames","FarmTimeInterval","config","resources","minPopulationBuffer","storeAlmostFullPercentage","farmConfig","farmInterval","FirstOption","humanize","conflictingCities","general","antyTimingMs","applicationRefreshInterval","forcedRefresh","switch","farm","builder","guard","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","e","rejected","result","done","then","__importDefault","mod","__esModule","config_popup_css_1","config_popup_html_1","events_1","config_manager_1","gps_config_1","city_switch_manager_1","ConfigPopup","default","constructor","super","isSwitchChecked","isFarmChecked","isBuilderChecked","isGuardChecked","getPlunderConfig","getManagersFlags","configManager","getInstance","getConfig","initEventListeners","_a","container","document","querySelector","switchCheckbox","plunderCheckbox","builderCheckbox","guardCheckbox","timeIntervalSelect","showTrigger","closeTrigger","humanizeCheckbox","classList","contains","add","querySelectorAll","forEach","btn","checked","conflictingCitiesChanged","some","isleId","persistConfig","FourthOption","alert","remove","log","farmSection","parentElement","farmSectionContainer","farmSectionArrow","toggle","createInitialElements","createElement","innerHTML","intervalSelectElement","farmIntervalValuesUnparsed","values","option","toString","textContent","mapTimeIntervalKeyToText","appendChild","createConfictingCitiesSelects","listOfCities","getCityList","arrayOfArraysOfCitiesOnTheSameIsland","from","Set","map","city","filter","areAnyConflicts","array","conflictingCitiesContainer","conflictingCitiesArrow","conflictingCitiesContent","arrayOfCities","isleContainer","className","isleHeader","isleCitiesSelect","id","selectedCity","find","SecondOption","ThirdOption","addStyle","style","head","render","configWindowElement","body","minimize","master_manager_1","onPageLoad","ArmyMovement","callback","instance","mountObserver","observer","MutationObserver","mutations","mutation","node","addedNodes","HTMLElement","getAttribute","element","observe","childList","subtree","setCallback","buildings","buildingsSelectors","ui_utility_1","buildActionSafe","selector","cityViewBtn","click","buildModeButton","waitForElement","buildButton","currentLvl","disabled","main","backgroundImageProp","elementSelector","currentLvlElSelector","buildAction","hide","lumber","stoner","ironer","market","docks","barracks","wall","storage","academy","temple","plain_utility_1","ui_lock_1","queue_css_1","builder_prod_html_1","buildings_1","resource_manager_1","general_info_1","CityBuilder","allowUnsequentialBuilds","allowCriticalBuilds","RUN","mainQueue","lock","resourceManager","citySwitchManager","generalInfo","renderUI","loadQueueFromStorage","listenToCitySwitch","addBuildButtons","initToggleButtonEvents","getElementById","toggleBuilderButtonId","buildContainer","buildContainerId","tryExitBuildMode","tryGoToBuildMode","currentCityQueue","queue","rerenderQueue","buildOptions","buildOptionsContainerId","building","button","buildOptionItemClass","backgroundImage","addIcon","buildOptionItemAddClass","onOptionBuildButtonClick","switchAction","currentCity","getCurrentCity","queueObj","schedule","addToQueue","addBuldingToUIQueue","queueItem","cityQueue","additionalQueue","queueItemEl","queueItemClass","setAttribute","appendChildAtIndex","upButton","upButtonClass","toLvl","cancelButton","cancelButtonClass","findIndex","item","clearInterval","clearTimeout","revalidateQueueItemLevels","handleBuildSchedule","splice","saveQueueToStorage","fromIndex","newToLvl","newId","catch","buildingcurrentLvlText","el","Infinity","lvlCounter","JSON","parse","stringify","buildOrSchedule","performBuildSchedule","isEmptySlot","checkIfItemCanBeBuiltAndAddDeleteOrSchedule","setTimeoutForNextSpeedUpAndSchedule","isQueueEmpty","timeToSpeedUp","getTimeToCanSpeedUp","emptySlots","getEmptySlotsCount","speedUpFirstBuild","untilEmptyslotsAreEqual","getTimeInFuture","setTimeout","acquire","release","cityQueue_1","item_1","forced","canBuild","shiftQueueCleanScheduleAndTryNext","clearUIQueueItem","resourcesInfo","areResourcesStackable","areStackable","setInterval","hasEnoughResources","requiredResources","BUILD_RETRY_INTERVAL","buildingLvl","getBuildingCurrentLvl","res","interval","goToCityView","showInfo","hideInfo","freeButton","counter","triggerHover","addDelay","wood","stone","iron","requiredWood","nextSibling","requiredStone","requiredIron","requiredPopulation","cancelHover","getResourcesInfo","getPopulation","getStoreCapacity","population","reduce","acc","curr","storeMaxSize","amount","firstOrder","textToMs","cityInfo","storageQueue","localStorage","getItem","getCityByName","queueItems","assign","setItem","start","stop","isRunning","insertBefore","children","queueContainerId","CitySwitchManager","cityList","initCityList","_b","_c","_d","_e","townListElement","townList","town","cityId","openTownList","waitForElements","cls","match","goBackToFirstTown","clickArrowUntilCityFound","cityName","cityWrapper","arrowLeft","arrowRight","run","FarmManager","schedulerArray","messageDialogObserver","humanMessageDialogObserver","scheduleNextFarmingOperationForCity","timeInterval","scheduleItem","scheduledDate","Date","now","timeout","farmVillages","mountMessageDialogsObservers","disconnect","citySwitch","initFarmAllVillages","farmVillagesFlow","disconnectObservers","city_1","getRandomMs","villages","waitForElementsInterval","villageStyleSelectors","v","villagesAmount","villageSelector","entries","performComplexClick","farmOptionIndex","getFarmOptionIndex","els","getUnlockTimeOrNull","forceRepeatFarming","window","cooldownBar","waitForElementFromNode","unlcokTimeEl","rej","getTextInterval","getFarmOptionTimeRegex","getFarmOption","test","config_popup_1","city_builder_1","farm_manager_1","Scheduler_1","MasterManager","pausedManagersSnapshot","farmManager","switchManager","scheduler","initCaptchaPrevention","initRefreshUtility","initConfigDialog","canRefresh","canSafelyRefresh","location","reload","Math","floor","random","recaptchaWindow","captchaCurtain","checkbox","caption","runManagersFromConfig","configMenuWindow","pauseRunningManagers","except","includes","resumeRunningManagers","isPaused","forceRefresh","stopAll","general_info_css_1","info_template_html_1","GeneralInfo","initInfoContainer","infoContainer","title","text","ResourceManager","_f","maxSizeText","parseInt","resourceItem","maxSizeElement","isAlmostFull","isFull","isLow","army_movement_1","button_panel_extension_html_1","scheduler_list_prod_html_1","scheduler_list_css_1","OperationType","Scheduler","isLockTakenByScheduler","_error","_hydrationError","_info","privateconstructor","armyMovement","masterManager","addUIExtenstion","addSchedulerListConfigWindow","synchronizeSchedulerWithStorage","mountCityDialogObserver","undoArmyMovement","fromTown","hoverElement","extendAttackSupportUI","buttonWrapper","div","inputDateElement","getFormattedInputValueFromDate","wayDurationText","wayDurationMs","inputData","inputEl","operationType","firstElementChild","ARMY_ATTACK","ARMY_SUPPORT","attackTypeSelector","dataset","inputDateValue","inputTimeValue","targetDate","getDateFromDateTimeInputValues","actionDate","getTime","sourceCity","targetCitySelector","canAddSchedulerItem","data","setInputValue","blur","schedulerItem","timeoutStructure","timeoutPreparation","timeoutPreAction","timeoutAction","movementId","undoMovementAction","cancelSchedule","postActionCleanup","addActionTimeouts","addSchedulerItemToUI","info","removeSchedulerItemFromUI","removeSavedCoords","tryRestoreManagers","trim","waitForElementInterval","preparationTime","TURN_OFF_MANAGERS_TIME_MS","tenSecondsBeforeAction","dropdownList","dropdownItem","input","goToCoords","coords","gridXInput","gridYInput","hydrateSchedulerItem","handleIfSchedulerListIsEmpty","hydrationError","errorElement","infoElement","abs","nextClosestActionTime","hours","minutes","seconds","date","getFullYear","getMonth","padStart","getDate","mountAttackSupportSubpageObserver","parentNode","nodeType","Node","ELEMENT_NODE","unobserveAttackSupportSubpages","removedNodes","schedulerListConfigWindow","addSchedulerListConfigListeners","toggleButton","tableContainer","closeIcon","row","insertRow","getSchedulerItemId","operaitonTypeCell","insertCell","toLocaleTimeString","cancelButtonCell","noSchedules","every","MIN_PRECEDENCE_TIME_MS","PREPARATION_TIME_MS","storage_manager_1","ConfigManager","storageManager","initConfig","readFromLocalStorage","isConfigStructureEqual","writeToLocalStorage","gpsConfig","getConfigValue","areGridsEqual","msToTimeString","formatDateToSimpleString","isVisible","getRandomInt","max","areArraysContentsEqual","arr1","arr2","shuffleArray","j","isMobile","navigator","userAgentData","mobile","userAgent","timeArray","split","offsetParent","time","timeMs","futureDate","getHours","getMinutes","getSeconds","ms","grid1","grid2","min","StorageManager","Lock","isLocked","lockedBy","lockedAt","lockCheckInterval","setLockCheckInterval","nextResolve","isTaken","simulateClick","rect","getBoundingClientRect","event","MouseEvent","clientX","left","width","clientY","top","height","bubbles","cancelable","view","dispatchEvent","inputElement","tagName","inputEvent","Event","changeEvent","timeoutMs","elements","matches","options","WaitForElementOptionsDefaults","fromNode","timeoutId","Document","initWrapper","readyState","mouseDownEvent","mouseUpEvent","triggerKeydown","KeyboardEvent","triggerPaste","pasteData","ClipboardEvent","clipboardData","DataTransfer","setData","performComplexInput","focus","focusEvent","char","keydownEvent","keypressEvent","keyupEvent","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","d","definition","o","obj","prop","hasOwnProperty","r","Symbol","toStringTag"],"sourceRoot":""}